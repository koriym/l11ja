
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/koriym/l11ja/validation.html">
      
      
        <link rel="prev" href="session.html">
      
      
        <link rel="next" href="errors.html">
      
      
      <link rel="icon" href="assets/images/favicon_io/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>バリデーション - L11JA</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.35f28582.min.css">
      
      


    
    

    

    
      <link rel="stylesheet" href="assets/css/php.css">
    
      <link rel="stylesheet" href="assets/css/mkdocs_material_extra.css">
    
      <link rel="stylesheet" href="assets/css/extra.css">
    
      <link rel="stylesheet" href="assets/css/giscuss.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-G60CEHXLQ1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-G60CEHXLQ1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-G60CEHXLQ1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!-- Determine classes -->



<!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
          class="md-header__inner md-grid"
          aria-label="Header"
  >

    <!-- Link to home -->
    <a
            href="."
            title="L11JA"
            class="md-header__button md-logo"
            aria-label="L11JA"
            data-md-component="logo"
    >
      
  <img src="assets/images/logo.png" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans'; font-size: 20px" >
            L11JA
            </span>
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans Batak'; font-size: 20px" >
            
              バリデーション
            
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette toggle -->
    

    <!-- User preference: color palette -->
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
    <label class="md-header__button md-icon" for="__search">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
    </label>

    <!-- Search interface -->
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
    <div class="md-header__source">
      

<!--
  Check whether the repository is hosted on one of the supported code hosting
  platforms (GitHub, GitLab or Bitbucket) to show icon.
-->


  


<!-- Repository containing source -->
<a href="https://github.com/koriym/l11ja" title="source.link.title"
    class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" fill="#000"/></svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="releases.html" class="md-tabs__link">
          
  
  プロローグ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="installation.html" class="md-tabs__link">
          
  
  はじめに

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="lifecycle.html" class="md-tabs__link">
          
  
  アーキテクチャ

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="routing.html" class="md-tabs__link">
          
  
  基本

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="artisan.html" class="md-tabs__link">
          
  
  掘り下げる

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="authentication.html" class="md-tabs__link">
          
  
  セキュリティ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="database.html" class="md-tabs__link">
          
  
  データベース

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="eloquent.html" class="md-tabs__link">
          
  
  Eloquent ORM

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="testing.html" class="md-tabs__link">
          
  
  テスト

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="starter-kits.html" class="md-tabs__link">
          
  
  パッケージ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="L11JA" class="md-nav__button md-logo" aria-label="L11JA" data-md-component="logo">
      
  <img src="assets/images/logo.png" alt="logo">

    </a>
    L11JA
  </label>
  
    <div class="md-nav__source">
      

<!--
  Check whether the repository is hosted on one of the supported code hosting
  platforms (GitHub, GitLab or Bitbucket) to show icon.
-->


  


<!-- Repository containing source -->
<a href="https://github.com/koriym/l11ja" title="source.link.title"
    class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" fill="#000"/></svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    プロローグ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            プロローグ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="releases.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リリースノート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="upgrade.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アップグレードガイド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contributions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    貢献ガイド
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            はじめに
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    インストール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="configuration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    設定
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="structure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ディレクトリ構造
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="frontend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    フロントエンド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="starter-kits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スターターキット
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deployment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    デプロイ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    アーキテクチャ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            アーキテクチャ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="lifecycle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リクエストライフサイクル
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="container.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    サービスコンテナ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="providers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    サービスプロバイダ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="facades.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファサード
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    基本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            基本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="routing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ルーティング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="middleware.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ミドルウェア
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="csrf.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSRF保護
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="controllers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コントローラ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="requests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リクエスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="responses.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    レスポンス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="views.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ビュー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="blade.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bladeテンプレート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vite.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アセットバンドル
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="urls.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    URL生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="session.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    セッション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    バリデーション
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="validation.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    バリデーション
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      はじめに
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションのクイックスタート
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデーションのクイックスタート">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      ルートの定義
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      コントローラの作成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションロジックの記述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデーションロジックの記述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      最初のバリデーション失敗時に停止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      ネストした属性に関する注意
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションエラーの表示
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデーションエラーの表示">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xhr" class="md-nav__link">
    <span class="md-ellipsis">
      XHRリクエストとバリデーション
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error" class="md-nav__link">
    <span class="md-ellipsis">
      @errorディレクティブ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      フォームの再入力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      オプションフィールドに関する注意
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションエラーレスポンスのフォーマット
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      フォームリクエストのバリデーション
    </span>
  </a>
  
    <nav class="md-nav" aria-label="フォームリクエストのバリデーション">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      フォームリクエストの作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="フォームリクエストの作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      追加のバリデーションの実行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      最初のバリデーション失敗時に停止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      リダイレクト先のカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      フォームリクエストの認可
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージのカスタマイズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラーメッセージのカスタマイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーション属性のカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションのための入力の準備
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      バリデータの手動作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデータの手動作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      最初のバリデーション失敗時に停止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      自動リダイレクト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      名前付きエラーバッグ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージのカスタマイズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラーメッセージのカスタマイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      特定の属性に対するカスタムメッセージの指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      カスタム属性値の指定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      追加のバリデーションの実行
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーション済みの入力の操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージの操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラーメッセージの操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      フィールドの最初のエラーメッセージの取得
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      フィールドのすべてのエラーメッセージの取得
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      すべてのフィールドのすべてのエラーメッセージの取得
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      フィールドにメッセージが存在するかどうかの確認
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      言語ファイルでのカスタムメッセージの指定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="言語ファイルでのカスタムメッセージの指定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      特定の属性のカスタムメッセージ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      言語ファイルでの属性の指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      言語ファイルでの値の指定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      利用可能なバリデーションルール
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="errors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    エラー処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="logging.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ログ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    掘り下げる
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            掘り下げる
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="artisan.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artisanコンソール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="broadcasting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブロードキャスティング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cache.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    キャッシュ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コレクション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concurrency.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    並行処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="context.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コンテキスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contracts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コントラクト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="events.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    イベント
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="filesystem.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファイルストレージ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="helpers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ヘルパー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http-client.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPクライアント
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="localization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ローカライゼーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mail.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="notifications.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通知
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="packages.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    パッケージ開発
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="processes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プロセス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queues.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    キュー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rate-limiting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    レート制限
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="strings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文字列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="scheduling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    タスクスケジューリング
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    セキュリティ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            セキュリティ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="authentication.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認証
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="authorization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認可
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="verification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メール確認
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="encryption.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    暗号化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="hashing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ハッシュ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="passwords.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    パスワードリセット
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    データベース
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            データベース
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クエリビルダ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pagination.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ページネーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migrations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    マイグレーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="seeding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    シーディング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="redis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Eloquent ORM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Eloquent ORM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-relationships.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リレーションシップ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コレクション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-mutators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ミューテータ / キャスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-resources.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APIリソース
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-serialization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    シリアライゼーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-factories.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファクトリ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    テスト
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            テスト
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="console-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コンソールテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dusk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブラウザテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database-testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    データベース
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mocking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    モック
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    パッケージ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            パッケージ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="starter-kits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スターターキット
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="billing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashier (Stripe)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cashier-paddle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashier (Paddle)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dusk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブラウザテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="envoy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Envoy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fortify.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fortify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="folio.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="homestead.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homestead
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="horizon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horizon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mix.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="octane.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Octane
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="passport.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passport
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pennant.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pennant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pint.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="precognition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Precognition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="prompts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prompts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pulse.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pulse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reverb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reverb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sail.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sail
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sanctum.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sanctum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="scout.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="socialite.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Socialite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="telescope.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telescope
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="valet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Valet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      はじめに
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションのクイックスタート
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデーションのクイックスタート">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      ルートの定義
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      コントローラの作成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションロジックの記述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデーションロジックの記述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      最初のバリデーション失敗時に停止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      ネストした属性に関する注意
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションエラーの表示
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデーションエラーの表示">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xhr" class="md-nav__link">
    <span class="md-ellipsis">
      XHRリクエストとバリデーション
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error" class="md-nav__link">
    <span class="md-ellipsis">
      @errorディレクティブ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      フォームの再入力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      オプションフィールドに関する注意
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションエラーレスポンスのフォーマット
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      フォームリクエストのバリデーション
    </span>
  </a>
  
    <nav class="md-nav" aria-label="フォームリクエストのバリデーション">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      フォームリクエストの作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="フォームリクエストの作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      追加のバリデーションの実行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      最初のバリデーション失敗時に停止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      リダイレクト先のカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      フォームリクエストの認可
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージのカスタマイズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラーメッセージのカスタマイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーション属性のカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーションのための入力の準備
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      バリデータの手動作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="バリデータの手動作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      最初のバリデーション失敗時に停止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      自動リダイレクト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      名前付きエラーバッグ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージのカスタマイズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラーメッセージのカスタマイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      特定の属性に対するカスタムメッセージの指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      カスタム属性値の指定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      追加のバリデーションの実行
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーション済みの入力の操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージの操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラーメッセージの操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      フィールドの最初のエラーメッセージの取得
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      フィールドのすべてのエラーメッセージの取得
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      すべてのフィールドのすべてのエラーメッセージの取得
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      フィールドにメッセージが存在するかどうかの確認
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      言語ファイルでのカスタムメッセージの指定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="言語ファイルでのカスタムメッセージの指定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      特定の属性のカスタムメッセージ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      言語ファイルでの属性の指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      言語ファイルでの値の指定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      利用可能なバリデーションルール
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/koriym/l11ja/edit/11.x-ja/validation.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="_1">バリデーション<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="#introduction">はじめに</a></li>
<li><a href="#validation-quickstart">バリデーションのクイックスタート</a><ul>
<li><a href="#quick-defining-the-routes">ルートの定義</a></li>
<li><a href="#quick-creating-the-controller">コントローラの作成</a></li>
<li><a href="#quick-writing-the-validation-logic">バリデーションロジックの記述</a></li>
<li><a href="#quick-displaying-the-validation-errors">バリデーションエラーの表示</a></li>
<li><a href="#repopulating-forms">フォームの再入力</a></li>
<li><a href="#a-note-on-optional-fields">オプションフィールドに関する注意</a></li>
<li><a href="#validation-error-response-format">バリデーションエラーのレスポンスフォーマット</a></li>
</ul>
</li>
<li><a href="#form-request-validation">フォームリクエストによるバリデーション</a><ul>
<li><a href="#creating-form-requests">フォームリクエストの作成</a></li>
<li><a href="#authorizing-form-requests">フォームリクエストの認可</a></li>
<li><a href="#customizing-the-error-messages">エラーメッセージのカスタマイズ</a></li>
<li><a href="#preparing-input-for-validation">バリデーションのための入力の準備</a></li>
</ul>
</li>
<li><a href="#manually-creating-validators">バリデータの手動作成</a><ul>
<li><a href="#automatic-redirection">自動リダイレクト</a></li>
<li><a href="#named-error-bags">名前付きエラーバッグ</a></li>
<li><a href="#manual-customizing-the-error-messages">エラーメッセージのカスタマイズ</a></li>
<li><a href="#performing-additional-validation">追加のバリデーションの実行</a></li>
</ul>
</li>
<li><a href="#working-with-validated-input">バリデーション済みの入力の操作</a></li>
<li><a href="#working-with-error-messages">エラーメッセージの操作</a><ul>
<li><a href="#specifying-custom-messages-in-language-files">言語ファイルでのカスタムメッセージの指定</a></li>
<li><a href="#specifying-attribute-in-language-files">言語ファイルでの属性の指定</a></li>
<li><a href="#specifying-values-in-language-files">言語ファイルでの値の指定</a></li>
</ul>
</li>
<li><a href="#available-validation-rules">利用可能なバリデーションルール</a></li>
<li><a href="#conditionally-adding-rules">条件付きでルールを追加</a></li>
<li><a href="#validating-arrays">配列のバリデーション</a><ul>
<li><a href="#validating-nested-array-input">ネストした配列入力のバリデーション</a></li>
<li><a href="#error-message-indexes-and-positions">エラーメッセージのインデックスと位置</a></li>
</ul>
</li>
<li><a href="#validating-files">ファイルのバリデーション</a></li>
<li><a href="#validating-passwords">パスワードのバリデーション</a></li>
<li><a href="#custom-validation-rules">カスタムバリデーションルール</a><ul>
<li><a href="#using-rule-objects">ルールオブジェクトの使用</a></li>
<li><a href="#using-closures">クロージャの使用</a></li>
<li><a href="#implicit-rules">暗黙のルール</a></li>
</ul>
</li>
</ul>
<p><a name="introduction"></a></p>
<h2 id="_2">はじめに<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>Laravelは、アプリケーションの受信データを検証するためのいくつかの異なるアプローチを提供します。すべての受信HTTPリクエストで利用可能な<code>validate</code>メソッドを使用するのが最も一般的です。しかし、他のバリデーションアプローチについても説明します。</p>
<p>Laravelには、データに適用できるさまざまな便利なバリデーションルールが含まれており、特定のデータベーステーブル内で値が一意であるかどうかを検証する機能も提供します。これらのバリデーションルールについて詳しく説明し、Laravelのバリデーション機能をすべて理解できるようにします。</p>
<p><a name="validation-quickstart"></a></p>
<h2 id="_3">バリデーションのクイックスタート<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>Laravelの強力なバリデーション機能について学ぶために、フォームを検証し、エラーメッセージをユーザーに表示する完全な例を見てみましょう。この概要を読むことで、Laravelを使用して受信リクエストデータを検証する方法について、一般的な理解を得ることができます。</p>
<p><a name="quick-defining-the-routes"></a></p>
<h3 id="_4">ルートの定義<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>まず、<code>routes/web.php</code>ファイルに以下のルートが定義されていると仮定しましょう。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">App\Http\Controllers\PostController</span><span class="p">;</span>

<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/post/create&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">PostController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">]);</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/post&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">PostController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;store&#39;</span><span class="p">]);</span>
</code></pre></div>
<p><code>GET</code>ルートは、ユーザーが新しいブログ投稿を作成するためのフォームを表示し、<code>POST</code>ルートは新しいブログ投稿をデータベースに保存します。</p>
<p><a name="quick-creating-the-controller"></a></p>
<h3 id="_5">コントローラの作成<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>次に、これらのルートに対する受信リクエストを処理するシンプルなコントローラを見てみましょう。今のところ<code>store</code>メソッドは空のままにしておきます。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Http\RedirectResponse</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">PostController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * 新しいブログ投稿を作成するためのフォームを表示します。</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">create</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;post.create&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * 新しいブログ投稿を保存します。</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="c1">// バリデーションとブログ投稿の保存...</span>

        <span class="nv">$post</span> <span class="o">=</span> <span class="sd">/** ... */</span>

        <span class="k">return</span> <span class="nx">to_route</span><span class="p">(</span><span class="s1">&#39;post.show&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;post&#39;</span> <span class="o">=&gt;</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="quick-writing-the-validation-logic"></a></p>
<h3 id="_6">バリデーションロジックの記述<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>これで、新しいブログ投稿を検証するロジックを<code>store</code>メソッドに記述する準備が整いました。これを行うには、<code>Illuminate\Http\Request</code>オブジェクトによって提供される<code>validate</code>メソッドを使用します。バリデーションルールが通過すると、コードは通常どおり実行されます。しかし、バリデーションが失敗すると、<code>Illuminate\Validation\ValidationException</code>例外がスローされ、適切なエラーレスポンスが自動的にユーザーに返されます。</p>
<p>従来のHTTPリクエスト中にバリデーションが失敗した場合、前のURLへのリダイレクトレスポンスが生成されます。受信リクエストがXHRリクエストの場合、<a href="#validation-error-response-format">バリデーションエラーメッセージを含むJSONレスポンス</a>が返されます。</p>
<p><code>validate</code>メソッドをよりよく理解するために、<code>store</code>メソッドに戻りましょう。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 新しいブログ投稿を保存します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
<span class="p">{</span>
    <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
        <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
    <span class="p">]);</span>

    <span class="c1">// ブログ投稿は有効です...</span>

    <span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/posts&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ご覧のように、バリデーションルールは<code>validate</code>メソッドに渡されます。心配しないでください。利用可能なすべてのバリデーションルールは<a href="#available-validation-rules">ドキュメント化されています</a>。繰り返しますが、バリデーションが失敗すると、適切なレスポンスが自動的に生成されます。バリデーションが通過すると、コントローラは通常どおり実行されます。</p>
<p>あるいは、バリデーションルールを単一の<code>|</code>区切りの文字列ではなく、ルールの配列として指定することもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validatedData</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;unique:posts&#39;</span><span class="p">,</span> <span class="s1">&#39;max:255&#39;</span><span class="p">],</span>
    <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">],</span>
<span class="p">]);</span>
</code></pre></div>
<p>さらに、<code>validateWithBag</code>メソッドを使用してリクエストを検証し、エラーメッセージを<a href="#named-error-bags">名前付きエラーバッグ</a>に保存することもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validatedData</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validateWithBag</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;unique:posts&#39;</span><span class="p">,</span> <span class="s1">&#39;max:255&#39;</span><span class="p">],</span>
    <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">],</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="stopping-on-first-validation-failure"></a></p>
<h4 id="_7">最初のバリデーション失敗時に停止<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>属性の最初のバリデーション失敗時にバリデーションルールの実行を停止したい場合があります。そのためには、属性に<code>bail</code>ルールを割り当てます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bail|required|unique:posts|max:255&#39;</span><span class="p">,</span>
    <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>この例では、<code>title</code>属性の<code>unique</code>ルールが失敗した場合、<code>max</code>ルールはチェックされません。ルールは割り当てられた順序で検証されます。</p>
<p><a name="a-note-on-nested-attributes"></a></p>
<h4 id="_8">ネストした属性に関する注意<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>受信HTTPリクエストに「ネスト」したフィールドデータが含まれている場合、「ドット」構文を使用してバリデーションルールでこれらのフィールドを指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
    <span class="s1">&#39;author.name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;author.description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>一方、フィールド名にリテラルなピリオドが含まれている場合、バックスラッシュでエスケープして、「ドット」構文として解釈されないように明示的に防ぐことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
    <span class="s1">&#39;v1\.0&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="quick-displaying-the-validation-errors"></a></p>
<h3 id="_9">バリデーションエラーの表示<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>では、受信リクエストフィールドが指定されたバリデーションルールを通過しない場合はどうなるでしょうか？前述のように、Laravelは自動的にユーザーを前の場所にリダイレクトします。さらに、すべてのバリデーションエラーと<a href="requests.html#retrieving-old-input">リクエスト入力</a>は自動的に<a href="session.html#flash-data">セッションにフラッシュ</a>されます。</p>
<p><code>Illuminate\View\Middleware\ShareErrorsFromSession</code>ミドルウェアによって、アプリケーションのすべてのビューで<code>$errors</code>変数が共有されます。このミドルウェアは<code>web</code>ミドルウェアグループによって提供されます。このミドルウェアが適用されると、<code>$errors</code>変数は常にビューで利用可能になり、<code>$errors</code>変数が常に定義されており、安全に使用できると仮定できます。<code>$errors</code>変数は<code>Illuminate\Support\MessageBag</code>のインスタンスになります。このオブジェクトの操作についての詳細は、<a href="#working-with-error-messages">そのドキュメント</a>を参照してください。</p>
<p>したがって、この例では、バリデーションが失敗すると、ユーザーはコントローラの<code>create</code>メソッドにリダイレクトされ、エラーメッセージをビューに表示できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x">&lt;!-- /resources/views/post/create.blade.php --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="x">&lt;h1&gt;Create Post&lt;/h1&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="x">@if ($errors-&gt;any())</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="x">    &lt;div class=&quot;alert alert-danger&quot;&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="x">        &lt;ul&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="x">            @foreach ($errors-&gt;all() as $error)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="x">                &lt;li&gt;{{ $error }}&lt;/li&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="x">            @endforeach</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="x">        &lt;/ul&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="x">    &lt;/div&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="x">@endif</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="x">&lt;!-- Create Post Form --&gt;</span>
</code></pre></div>
<p><a name="quick-customizing-the-error-messages"></a></p>
<h4 id="_10">エラーメッセージのカスタマイズ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>Laravelの組み込みバリデーションルールには、アプリケーションの<code>lang/en/validation.php</code>ファイルにあるエラーメッセージがあります。アプリケーションに<code>lang</code>ディレクトリがない場合、<code>lang:publish</code> Artisanコマンドを使用してLaravelに作成させることができます。</p>
<p><code>lang/en/validation.php</code>ファイル内には、各バリデーションルールの翻訳エントリがあります。アプリケーションのニーズに基づいて、これらのメッセージを自由に変更または修正できます。</p>
<p>さらに、このファイルを別の言語ディレクトリにコピーして、アプリケーションの言語用のメッセージを翻訳することもできます。Laravelのローカリゼーションについて詳しく知りたい場合は、完全な<a href="localization.html">ローカリゼーションドキュメント</a>を確認してください。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>デフォルトでは、Laravelアプリケーションのスケルトンには<code>lang</code>ディレクトリは含まれていません。Laravelの言語ファイルをカスタマイズしたい場合は、<code>lang:publish</code> Artisanコマンドを介してそれらを公開することができます。</p>
</div>
<p><a name="quick-xhr-requests-and-validation"></a></p>
<h4 id="xhr">XHRリクエストとバリデーション<a class="headerlink" href="#xhr" title="Permanent link">&para;</a></h4>
<p>この例では、従来のフォームを使用してデータをアプリケーションに送信しました。しかし、多くのアプリケーションはJavaScriptを使用したフロントエンドからXHRリクエストを受け取ります。XHRリクエスト中に<code>validate</code>メソッドを使用すると、Laravelはリダイレクトレスポンスを生成しません。代わりに、Laravelは<a href="#validation-error-response-format">すべてのバリデーションエラーを含むJSONレスポンス</a>を生成します。このJSONレスポンスは422 HTTPステータスコードとともに送信されます。</p>
<p><a name="the-at-error-directive"></a></p>
<h4 id="error"><code>@error</code>ディレクティブ<a class="headerlink" href="#error" title="Permanent link">&para;</a></h4>
<p>特定の属性に対するバリデーションエラーメッセージが存在するかどうかを素早く判断するために、<code>@error</code> <a href="blade.html">Blade</a>ディレクティブを使用できます。<code>@error</code>ディレクティブ内で、エラーメッセージを表示するために<code>$message</code>変数をechoすることができます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="x">&lt;!-- /resources/views/post/create.blade.php --&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="x">&lt;label for=&quot;title&quot;&gt;Post Title&lt;/label&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="x">&lt;input id=&quot;title&quot;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="x">    type=&quot;text&quot;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="x">    name=&quot;title&quot;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="x">    class=&quot;@error(&#39;title&#39;) is-invalid @enderror&quot;&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="x">@error(&#39;title&#39;)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="x">    &lt;div class=&quot;alert alert-danger&quot;&gt;{{ $message }}&lt;/div&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="x">@enderror</span>
</code></pre></div>
<p><a href="#named-error-bags">名前付きエラーバッグ</a>を使用している場合、<code>@error</code>ディレクティブにエラーバッグの名前を2番目の引数として渡すことができます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="x">&lt;input ... class=&quot;@error(&#39;title&#39;, &#39;post&#39;) is-invalid @enderror&quot;&gt;</span>
</code></pre></div>
<p><a name="repopulating-forms"></a></p>
<h3 id="_11">フォームの再入力<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>バリデーションエラーによりLaravelがリダイレクトレスポンスを生成する場合、フレームワークは自動的に<a href="session.html#flash-data">リクエストのすべての入力をセッションにフラッシュ</a>します。これにより、次のリクエスト中に入力にアクセスし、ユーザーが送信しようとしたフォームを再入力することが便利になります。</p>
<p>前のリクエストからフラッシュされた入力を取得するには、<code>Illuminate\Http\Request</code>のインスタンスで<code>old</code>メソッドを呼び出します。<code>old</code>メソッドは、<a href="session.html">セッション</a>から以前にフラッシュされた入力データを引き出します：</p>
<div class="highlight"><pre><span></span><code><span class="nv">$title</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">old</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Laravelはグローバルな<code>old</code>ヘルパーも提供しています。<a href="blade.html">Bladeテンプレート</a>内で古い入力を表示する場合、<code>old</code>ヘルパーを使用してフォームを再入力する方が便利です。指定されたフィールドの古い入力が存在しない場合、<code>null</code>が返されます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="x">&lt;input type=&quot;text&quot; name=&quot;title&quot; value=&quot;{{ old(&#39;title&#39;) }}&quot;&gt;</span>
</code></pre></div>
<p><a name="a-note-on-optional-fields"></a></p>
<h3 id="_12">オプションフィールドに関する注意<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>デフォルトでは、Laravelはアプリケーションのグローバルミドルウェアスタックに<code>TrimStrings</code>と<code>ConvertEmptyStringsToNull</code>ミドルウェアを含んでいます。このため、バリデーターが<code>null</code>値を無効と見なさないようにするには、"オプション"のリクエストフィールドを<code>nullable</code>とマークする必要があることが多いです。例えば：</p>
<div class="highlight"><pre><span></span><code><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
    <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;publish_at&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nullable|date&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>この例では、<code>publish_at</code>フィールドが<code>null</code>または有効な日付表現のいずれかであることを指定しています。<code>nullable</code>修飾子がルール定義に追加されていない場合、バリデーターは<code>null</code>を無効な日付と見なします。</p>
<p><a name="validation-error-response-format"></a></p>
<h3 id="_13">バリデーションエラーレスポンスのフォーマット<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>アプリケーションが<code>Illuminate\Validation\ValidationException</code>例外をスローし、受信したHTTPリクエストがJSONレスポンスを期待している場合、Laravelは自動的にエラーメッセージをフォーマットし、<code>422 Unprocessable Entity</code> HTTPレスポンスを返します。</p>
<p>以下に、バリデーションエラーのJSONレスポンスフォーマットの例を示します。ネストされたエラーキーは"ドット"記法形式に平坦化されていることに注意してください：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The team name must be a string. (and 4 more errors)&quot;</span><span class="p">,</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span><span class="nt">&quot;team_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">            </span><span class="s2">&quot;The team name must be a string.&quot;</span><span class="p">,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">            </span><span class="s2">&quot;The team name must be at least 1 characters.&quot;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">        </span><span class="nt">&quot;authorization.role&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">            </span><span class="s2">&quot;The selected authorization.role is invalid.&quot;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">        </span><span class="nt">&quot;users.0.email&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">            </span><span class="s2">&quot;The users.0.email field is required.&quot;</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">        </span><span class="nt">&quot;users.2.email&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">            </span><span class="s2">&quot;The users.2.email must be a valid email address.&quot;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">        </span><span class="p">]</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="p">}</span>
</code></pre></div>
<p><a name="form-request-validation"></a></p>
<h2 id="_14">フォームリクエストのバリデーション<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<p><a name="creating-form-requests"></a></p>
<h3 id="_15">フォームリクエストの作成<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>より複雑なバリデーションシナリオの場合、"フォームリクエスト"を作成することができます。フォームリクエストは、独自のバリデーションと認可ロジックをカプセル化するカスタムリクエストクラスです。フォームリクエストクラスを作成するには、<code>make:request</code> Artisan CLIコマンドを使用できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>make:request<span class="w"> </span>StorePostRequest
</code></pre></div>
<p>生成されたフォームリクエストクラスは<code>app/Http/Requests</code>ディレクトリに配置されます。このディレクトリが存在しない場合、<code>make:request</code>コマンドを実行すると作成されます。Laravelによって生成される各フォームリクエストには、<code>authorize</code>と<code>rules</code>の2つのメソッドがあります。</p>
<p>ご想像の通り、<code>authorize</code>メソッドは現在認証されているユーザーがリクエストで表されるアクションを実行できるかどうかを判断する役割を果たし、<code>rules</code>メソッドはリクエストのデータに適用されるバリデーションルールを返します：</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * Get the validation rules that apply to the request.</span>
<span class="sd"> *</span>
<span class="sd"> * @return array&lt;string, \Illuminate\Contracts\Validation\ValidationRule|array&lt;mixed&gt;|string&gt;</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">rules</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
        <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>rules</code>メソッドのシグネチャ内で必要な依存関係をタイプヒントすることができます。これらは自動的にLaravelの<a href="container.html">サービスコンテナ</a>を介して解決されます。</p>
</div>
<p>では、バリデーションルールはどのように評価されるのでしょうか？必要なのは、コントローラーメソッドにリクエストをタイプヒントすることだけです。コントローラーメソッドが呼び出される前に、受信したフォームリクエストがバリデーションされます。つまり、コントローラーにバリデーションロジックを散らかす必要はありません：</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * Store a new blog post.</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">StorePostRequest</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
<span class="p">{</span>
    <span class="c1">// The incoming request is valid...</span>

    <span class="c1">// Retrieve the validated input data...</span>
    <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validated</span><span class="p">();</span>

    <span class="c1">// Retrieve a portion of the validated input data...</span>
    <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">]);</span>
    <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">except</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">]);</span>

    <span class="c1">// Store the blog post...</span>

    <span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/posts&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>バリデーションが失敗すると、リダイレクトレスポンスが生成され、ユーザーを前の場所に戻します。エラーもセッションにフラッシュされ、表示できるようになります。リクエストがXHRリクエストだった場合、<a href="#validation-error-response-format">バリデーションエラーのJSON表現</a>を含む422ステータスコードのHTTPレスポンスがユーザーに返されます。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Inertiaを使用したLaravelフロントエンドにリアルタイムのフォームリクエストバリデーションを追加する必要がありますか？<a href="precognition.html">Laravel Precognition</a>をチェックしてください。</p>
</div>
<p><a name="performing-additional-validation-on-form-requests"></a></p>
<h4 id="_16">追加のバリデーションの実行<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>最初のバリデーションが完了した後に追加のバリデーションを実行する必要がある場合、フォームリクエストの<code>after</code>メソッドを使用してこれを実現できます。</p>
<p><code>after</code>メソッドは、バリデーションが完了した後に呼び出されるコールバックまたはクロージャの配列を返す必要があります。与えられたコールバックは<code>Illuminate\Validation\Validator</code>インスタンスを受け取り、必要に応じて追加のエラーメッセージを発生させることができます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Validation\Validator</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * Get the &quot;after&quot; validation callables for the request.</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">after</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="k">function</span> <span class="p">(</span><span class="nx">Validator</span> <span class="nv">$validator</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">somethingElseIsInvalid</span><span class="p">())</span> <span class="p">{</span>
                <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
                    <span class="s1">&#39;field&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Something is wrong with this field!&#39;</span>
                <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>前述のように、<code>after</code>メソッドによって返される配列には、呼び出し可能なクラスを含めることもできます。これらのクラスの<code>__invoke</code>メソッドは<code>Illuminate\Validation\Validator</code>インスタンスを受け取ります：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">use</span> <span class="nx">App\Validation\ValidateShippingTime</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">use</span> <span class="nx">App\Validation\ValidateUserStatus</span><span class="p">;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Validator</span><span class="p">;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="sd">/**</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="sd"> * Get the &quot;after&quot; validation callables for the request.</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="sd"> */</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">after</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">{</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>        <span class="k">new</span> <span class="nx">ValidateUserStatus</span><span class="p">,</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>        <span class="k">new</span> <span class="nx">ValidateShippingTime</span><span class="p">,</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>        <span class="k">function</span> <span class="p">(</span><span class="nx">Validator</span> <span class="nv">$validator</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>            <span class="c1">//</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>        <span class="p">}</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>    <span class="p">];</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="p">}</span>
</code></pre></div>
<p><a name="request-stopping-on-first-validation-rule-failure"></a></p>
<h4 id="_17">最初のバリデーション失敗時に停止<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p>リクエストクラスに<code>stopOnFirstFailure</code>プロパティを追加することで、バリデーターに単一のバリデーション失敗が発生したらすべての属性のバリデーションを停止するように指示できます：</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * Indicates if the validator should stop on the first rule failure.</span>
<span class="sd"> *</span>
<span class="sd"> * @var bool</span>
<span class="sd"> */</span>
<span class="k">protected</span> <span class="nv">$stopOnFirstFailure</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div>
<p><a name="customizing-the-redirect-location"></a></p>
<h4 id="_18">リダイレクト先のカスタマイズ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<p>前述のように、フォームリクエストのバリデーションが失敗した場合、ユーザーを前の場所に戻すリダイレクトレスポンスが生成されます。しかし、この動作を自由にカスタマイズすることができます。そのためには、フォームリクエストに<code>$redirect</code>プロパティを定義します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="sd">/**</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="sd"> * バリデーションが失敗した場合にユーザーがリダイレクトされるURI。</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="sd"> *</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="sd"> * @var string</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="sd"> */</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="k">protected</span> <span class="nv">$redirect</span> <span class="o">=</span> <span class="s1">&#39;/dashboard&#39;</span><span class="p">;</span>
</code></pre></div>
<p>または、ユーザーを名前付きルートにリダイレクトしたい場合は、代わりに <code>$redirectRoute</code> プロパティを定義できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="sd">/**</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="sd"> * バリデーションが失敗した場合にユーザーがリダイレクトされるルート。</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="sd"> *</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="sd"> * @var string</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="sd"> */</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">protected</span> <span class="nv">$redirectRoute</span> <span class="o">=</span> <span class="s1">&#39;dashboard&#39;</span><span class="p">;</span>
</code></pre></div>
<p><a name="authorizing-form-requests"></a></p>
<h3 id="_19">フォームリクエストの認可<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>フォームリクエストクラスには <code>authorize</code> メソッドも含まれています。このメソッド内で、認証されたユーザーが実際に特定のリソースを更新する権限を持っているかどうかを判断できます。たとえば、ユーザーが更新しようとしているブログコメントを実際に所有しているかどうかを判断できます。おそらく、このメソッド内で <a href="authorization.html">認可ゲートとポリシー</a> とやり取りするでしょう：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">use</span> <span class="nx">App\Models\Comment</span><span class="p">;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="sd">/**</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="sd"> * ユーザーがこのリクエストを行うことを認可されているかどうかを判断します。</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="sd"> */</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">authorize</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="p">{</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>    <span class="nv">$comment</span> <span class="o">=</span> <span class="nx">Comment</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">));</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>    <span class="k">return</span> <span class="nv">$comment</span> <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">can</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="nv">$comment</span><span class="p">);</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="p">}</span>
</code></pre></div>
<p>すべてのフォームリクエストはベースの Laravel リクエストクラスを拡張しているため、<code>user</code> メソッドを使用して現在認証されているユーザーにアクセスできます。また、上記の例で <code>route</code> メソッドの呼び出しに注意してください。このメソッドを使用すると、呼び出されているルートに定義された URI パラメータにアクセスできます。たとえば、以下の例では <code>{comment}</code> パラメータにアクセスできます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/comment/{comment}&#39;</span><span class="p">);</span>
</code></pre></div>
<p>したがって、アプリケーションが <a href="routing.html#route-model-binding">ルートモデルバインディング</a> を利用している場合、リクエストのプロパティとして解決されたモデルにアクセスすることで、コードをさらに簡潔にすることができます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">can</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">comment</span><span class="p">);</span>
</code></pre></div>
<p><code>authorize</code> メソッドが <code>false</code> を返す場合、403 ステータスコードの HTTP レスポンスが自動的に返され、コントローラメソッドは実行されません。</p>
<p>リクエストの認可ロジックをアプリケーションの別の部分で処理する予定の場合は、<code>authorize</code> メソッドを完全に削除するか、単に <code>true</code> を返すことができます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="sd">/**</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="sd"> * ユーザーがこのリクエストを行うことを認可されているかどうかを判断します。</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="sd"> */</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">authorize</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="p">{</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>authorize</code> メソッドのシグネチャ内に必要な依存関係をタイプヒントで指定できます。これらは自動的に Laravel の <a href="container.html">サービスコンテナ</a> を介して解決されます。</p>
</div>
<p><a name="customizing-the-error-messages"></a></p>
<h3 id="_20">エラーメッセージのカスタマイズ<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>フォームリクエストによって使用されるエラーメッセージをカスタマイズするには、<code>messages</code> メソッドをオーバーライドします。このメソッドは、属性/ルールのペアとそれに対応するエラーメッセージの配列を返す必要があります：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="sd">/**</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="sd"> * 定義されたバリデーションルールのエラーメッセージを取得します。</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="sd"> *</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="sd"> * @return array&lt;string, string&gt;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="sd"> */</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">messages</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="p">{</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>        <span class="s1">&#39;title.required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;タイトルは必須です&#39;</span><span class="p">,</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>        <span class="s1">&#39;body.required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メッセージは必須です&#39;</span><span class="p">,</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>    <span class="p">];</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-validation-attributes"></a></p>
<h4 id="_21">バリデーション属性のカスタマイズ<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<p>Laravel の組み込みバリデーションルールの多くのエラーメッセージには、<code>:attribute</code> プレースホルダが含まれています。バリデーションメッセージの <code>:attribute</code> プレースホルダをカスタム属性名に置き換えたい場合は、<code>attributes</code> メソッドをオーバーライドしてカスタム名を指定できます。このメソッドは、属性/名前のペアの配列を返す必要があります：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="sd">/**</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="sd"> * バリデータエラーのカスタム属性を取得します。</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="sd"> *</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="sd"> * @return array&lt;string, string&gt;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="sd"> */</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">attributes</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="p">{</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メールアドレス&#39;</span><span class="p">,</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    <span class="p">];</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="p">}</span>
</code></pre></div>
<p><a name="preparing-input-for-validation"></a></p>
<h3 id="_22">バリデーションのための入力の準備<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>バリデーションルールを適用する前にリクエストからのデータを準備またはサニタイズする必要がある場合は、<code>prepareForValidation</code> メソッドを使用できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Str</span><span class="p">;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="sd">/**</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="sd"> * バリデーションのためにデータを準備します。</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="sd"> */</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="k">protected</span> <span class="k">function</span> <span class="nf">prepareForValidation</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">{</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">merge</span><span class="p">([</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>        <span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="nx">Str</span><span class="o">::</span><span class="na">slug</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">slug</span><span class="p">),</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>    <span class="p">]);</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="p">}</span>
</code></pre></div>
<p>同様に、バリデーションが完了した後にリクエストデータを正規化する必要がある場合は、<code>passedValidation</code> メソッドを使用できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="sd">/**</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="sd"> * バリデーションが成功した試行を処理します。</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="sd"> */</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="k">protected</span> <span class="k">function</span> <span class="nf">passedValidation</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="p">{</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">replace</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">]);</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="p">}</span>
</code></pre></div>
<p><a name="manually-creating-validators"></a></p>
<h2 id="_23">バリデータの手動作成<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h2>
<p>リクエストの <code>validate</code> メソッドを使用したくない場合は、<code>Validator</code> <a href="facades.html">ファサード</a> を使用してバリデータインスタンスを手動で作成できます。ファサードの <code>make</code> メソッドは新しいバリデータインスタンスを生成します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="k">use</span> <span class="nx">Illuminate\Http\RedirectResponse</span><span class="p">;</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="k">class</span> <span class="nc">PostController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="p">{</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>    <span class="sd">/**</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="sd">     * 新しいブログ記事を保存します。</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="sd">     */</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>    <span class="p">{</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>        <span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>            <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>        <span class="p">]);</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>        <span class="k">if</span> <span class="p">(</span><span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">fails</span><span class="p">())</span> <span class="p">{</span>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>            <span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/post/create&#39;</span><span class="p">)</span>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>                        <span class="o">-&gt;</span><span class="na">withErrors</span><span class="p">(</span><span class="nv">$validator</span><span class="p">)</span>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>                        <span class="o">-&gt;</span><span class="na">withInput</span><span class="p">();</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>        <span class="p">}</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>        <span class="c1">// バリデーション済みの入力を取得...</span>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>        <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">validated</span><span class="p">();</span>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>        <span class="c1">// バリデーション済みの入力の一部を取得...</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>        <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">]);</span>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>        <span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">except</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">]);</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>        <span class="c1">// ブログ記事を保存...</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>        <span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/posts&#39;</span><span class="p">);</span>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>    <span class="p">}</span>
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a><span class="p">}</span>
</code></pre></div>
<p><code>make</code> メソッドに渡される最初の引数は、バリデーション対象のデータです。2番目の引数は、データに適用する必要があるバリデーションルールの配列です。</p>
<p>リクエストのバリデーションが失敗したかどうかを判断した後、<code>withErrors</code> メソッドを使用してセッションにエラーメッセージをフラッシュできます。このメソッドを使用すると、リダイレクト後に <code>$errors</code> 変数が自動的にビューと共有され、ユーザーに簡単に表示できるようになります。<code>withErrors</code> メソッドは、バリデータ、<code>MessageBag</code>、または PHP の <code>array</code> を受け入れます。</p>
<h4 id="_24">最初のバリデーション失敗時に停止<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<p><code>stopOnFirstFailure</code> メソッドは、バリデータに一度バリデーション失敗が発生したらすべての属性のバリデーションを停止するように指示します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">if</span> <span class="p">(</span><span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">stopOnFirstFailure</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">fails</span><span class="p">())</span> <span class="p">{</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>    <span class="c1">// ...</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="p">}</span>
</code></pre></div>
<p><a name="automatic-redirection"></a></p>
<h3 id="_25">自動リダイレクト<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<p>バリデータインスタンスを手動で作成したいが、HTTP リクエストの <code>validate</code> メソッドが提供する自動リダイレクトを利用したい場合は、既存のバリデータインスタンスで <code>validate</code> メソッドを呼び出すことができます。バリデーションが失敗した場合、ユーザーは自動的にリダイレクトされます。XHR リクエストの場合は、<a href="#validation-error-response-format">JSON レスポンスが返されます</a>：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>    <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">();</span>
</code></pre></div>
<p>バリデーションが失敗した場合にエラーメッセージを <a href="#named-error-bags">名前付きエラーバッグ</a> に保存するには、<code>validateWithBag</code> メソッドを使用できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|unique:posts|max:255&#39;</span><span class="p">,</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">validateWithBag</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="named-error-bags"></a></p>
<h3 id="_26">名前付きエラーバッグ<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<p>1 つのページに複数のフォームがある場合、バリデーションエラーを含む <code>MessageBag</code> に名前を付け、特定のフォームのエラーメッセージを取得できるようにすることができます。これを実現するには、<code>withErrors</code> の 2 番目の引数として名前を渡します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/register&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">withErrors</span><span class="p">(</span><span class="nv">$validator</span><span class="p">,</span> <span class="s1">&#39;login&#39;</span><span class="p">);</span>
</code></pre></div>
<p>その後、<code>$errors</code> 変数から名前付き <code>MessageBag</code> インスタンスにアクセスできます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="x">{{ $errors-&gt;login-&gt;first(&#39;email&#39;) }}</span>
</code></pre></div>
<p><a name="manual-customizing-the-error-messages"></a></p>
<h3 id="_27">エラーメッセージのカスタマイズ<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p>必要に応じて、バリデータインスタンスが使用するデフォルトのエラーメッセージの代わりにカスタムエラーメッセージを指定できます。カスタムメッセージを指定するには、いくつかの方法があります。まず、<code>Validator::make</code> メソッドにカスタムメッセージを 3 番目の引数として渡すことができます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$rules</span><span class="p">,</span> <span class="nv">$messages</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:attribute フィールドは必須です。&#39;</span><span class="p">,</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="p">]);</span>
</code></pre></div>
<p>この例では、<code>:attribute</code> プレースホルダは、バリデーション中のフィールドの実際の名前に置き換えられます。バリデーションメッセージで他のプレースホルダを利用することもできます。例：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nv">$messages</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    <span class="s1">&#39;same&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:attribute と :other は一致する必要があります。&#39;</span><span class="p">,</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:attribute は正確に :size である必要があります。&#39;</span><span class="p">,</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>    <span class="s1">&#39;between&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:attribute の値 :input は :min から :max の間である必要があります。&#39;</span><span class="p">,</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    <span class="s1">&#39;in&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:attribute は次のいずれかのタイプである必要があります: :values&#39;</span><span class="p">,</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="p">];</span>
</code></pre></div>
<p><a name="specifying-a-custom-message-for-a-given-attribute"></a></p>
<h4 id="_28">特定の属性に対するカスタムメッセージの指定<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<p>特定の属性に対してのみカスタムエラーメッセージを指定したい場合があります。これは、「ドット」表記を使用して行うことができます。最初に属性の名前を指定し、次にルールを指定します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nv">$messages</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="s1">&#39;email.required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メールアドレスを教えてください！&#39;</span><span class="p">,</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="p">];</span>
</code></pre></div>
<p><a name="specifying-custom-attribute-values"></a></p>
<h4 id="_29">カスタム属性値の指定<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<p>Laravelの組み込みエラーメッセージの多くには、バリデーション対象のフィールドまたは属性の名前に置き換えられる <code>:attribute</code> プレースホルダが含まれています。特定のフィールドに対してこれらのプレースホルダを置き換える値をカスタマイズするには、<code>Validator::make</code> メソッドの第4引数としてカスタム属性の配列を渡すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$rules</span><span class="p">,</span> <span class="nv">$messages</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メールアドレス&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="performing-additional-validation"></a></p>
<h3 id="_30">追加のバリデーションの実行<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>初期バリデーションが完了した後に追加のバリデーションを実行する必要がある場合があります。これは、バリデータの <code>after</code> メソッドを使用して実現できます。<code>after</code> メソッドは、バリデーションが完了した後に呼び出されるクロージャまたはコールバックの配列を受け取ります。指定されたコールバックは <code>Illuminate\Validation\Validator</code> インスタンスを受け取り、必要に応じて追加のエラーメッセージを発生させることができます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>

<span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>

<span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">after</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$validator</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">somethingElseIsInvalid</span><span class="p">())</span> <span class="p">{</span>
        <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
            <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;このフィールドに何か問題があります！&#39;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">fails</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p>前述のように、<code>after</code> メソッドはコールバックの配列も受け取ります。これは、"バリデーション後" のロジックが呼び出し可能なクラスにカプセル化されている場合に特に便利です。これらのクラスは、<code>__invoke</code> メソッドを介して <code>Illuminate\Validation\Validator</code> インスタンスを受け取ります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">use</span> <span class="nx">App\Validation\ValidateShippingTime</span><span class="p">;</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="k">use</span> <span class="nx">App\Validation\ValidateUserStatus</span><span class="p">;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">after</span><span class="p">([</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>    <span class="k">new</span> <span class="nx">ValidateUserStatus</span><span class="p">,</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>    <span class="k">new</span> <span class="nx">ValidateShippingTime</span><span class="p">,</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>    <span class="k">function</span> <span class="p">(</span><span class="nv">$validator</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>        <span class="c1">// ...</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>    <span class="p">},</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="p">]);</span>
</code></pre></div>
<p><a name="working-with-validated-input"></a></p>
<h2 id="_31">バリデーション済みの入力の操作<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h2>
<p>フォームリクエストまたは手動で作成したバリデータインスタンスを使用して受信リクエストデータをバリデーションした後、実際にバリデーションを受けた受信リクエストデータを取得したい場合があります。これはいくつかの方法で実現できます。まず、フォームリクエストまたはバリデータインスタンスで <code>validated</code> メソッドを呼び出すことができます。このメソッドは、バリデーションを受けたデータの配列を返します。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validated</span><span class="p">();</span>

<span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">validated</span><span class="p">();</span>
</code></pre></div>
<p>または、フォームリクエストまたはバリデータインスタンスで <code>safe</code> メソッドを呼び出すこともできます。このメソッドは <code>Illuminate\Support\ValidatedInput</code> のインスタンスを返します。このオブジェクトは、バリデーション済みデータのサブセットまたはバリデーション済みデータ全体を取得するための <code>only</code>、<code>except</code>、<code>all</code> メソッドを公開しています。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">]);</span>

<span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">except</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">]);</span>

<span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<p>さらに、<code>Illuminate\Support\ValidatedInput</code> インスタンスは、配列のように反復処理したりアクセスしたりすることができます。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// バリデーション済みデータは反復処理できます...</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// バリデーション済みデータは配列としてアクセスできます...</span>
<span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">();</span>

<span class="nv">$email</span> <span class="o">=</span> <span class="nv">$validated</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>
</code></pre></div>
<p>バリデーション済みデータに追加のフィールドを追加したい場合は、<code>merge</code> メソッドを呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validated</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">merge</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor Otwell&#39;</span><span class="p">]);</span>
</code></pre></div>
<p>バリデーション済みデータを <a href="collections.html">コレクション</a> インスタンスとして取得したい場合は、<code>collect</code> メソッドを呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$collection</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">safe</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">collect</span><span class="p">();</span>
</code></pre></div>
<p><a name="working-with-error-messages"></a></p>
<h2 id="_32">エラーメッセージの操作<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h2>
<p><code>Validator</code> インスタンスで <code>errors</code> メソッドを呼び出すと、エラーメッセージを操作するためのさまざまな便利なメソッドを持つ <code>Illuminate\Support\MessageBag</code> インスタンスが返されます。すべてのビューで自動的に利用可能な <code>$errors</code> 変数も <code>MessageBag</code> クラスのインスタンスです。</p>
<p><a name="retrieving-the-first-error-message-for-a-field"></a></p>
<h4 id="_33">フィールドの最初のエラーメッセージの取得<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<p>特定のフィールドの最初のエラーメッセージを取得するには、<code>first</code> メソッドを使用します。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">();</span>

<span class="k">echo</span> <span class="nv">$errors</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="retrieving-all-error-messages-for-a-field"></a></p>
<h4 id="_34">フィールドのすべてのエラーメッセージの取得<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p>特定のフィールドのすべてのメッセージを配列として取得するには、<code>get</code> メソッドを使用します。</p>
<div class="highlight"><pre><span></span><code><span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p>配列フォームフィールドをバリデーションする場合、<code>*</code> 文字を使用して各配列要素のすべてのメッセージを取得できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;attachments.*&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="retrieving-all-error-messages-for-all-fields"></a></p>
<h4 id="_35">すべてのフィールドのすべてのエラーメッセージの取得<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>すべてのフィールドのすべてのメッセージを配列として取得するには、<code>all</code> メソッドを使用します。</p>
<div class="highlight"><pre><span></span><code><span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="determining-if-messages-exist-for-a-field"></a></p>
<h4 id="_36">フィールドにメッセージが存在するかどうかの確認<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<p>特定のフィールドにエラーメッセージが存在するかどうかを確認するには、<code>has</code> メソッドを使用します。</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="specifying-custom-messages-in-language-files"></a></p>
<h3 id="_37">言語ファイルでのカスタムメッセージの指定<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<p>Laravelの組み込みバリデーションルールにはそれぞれ、アプリケーションの <code>lang/en/validation.php</code> ファイルにあるエラーメッセージがあります。アプリケーションに <code>lang</code> ディレクトリがない場合は、<code>lang:publish</code> Artisan コマンドを使用してLaravelに作成させることができます。</p>
<p><code>lang/en/validation.php</code> ファイル内に、各バリデーションルールの翻訳エントリがあります。アプリケーションのニーズに基づいてこれらのメッセージを自由に変更または修正できます。</p>
<p>さらに、このファイルを別の言語ディレクトリにコピーして、アプリケーションの言語のメッセージを翻訳することもできます。Laravelのローカリゼーションの詳細については、完全な <a href="localization.html">ローカリゼーションドキュメント</a> を確認してください。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>デフォルトでは、Laravelアプリケーションのスケルトンには <code>lang</code> ディレクトリが含まれていません。Laravelの言語ファイルをカスタマイズしたい場合は、<code>lang:publish</code> Artisan コマンドを介してそれらを公開することができます。</p>
</div>
<p><a name="custom-messages-for-specific-attributes"></a></p>
<h4 id="_38">特定の属性のカスタムメッセージ<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<p>アプリケーションのバリデーション言語ファイル内で指定された属性とルールの組み合わせに使用されるエラーメッセージをカスタマイズすることができます。そのためには、アプリケーションの <code>lang/xx/validation.php</code> 言語ファイルの <code>custom</code> 配列にメッセージのカスタマイズを追加します。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;custom&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メールアドレスを教えてください！&#39;</span><span class="p">,</span>
        <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メールアドレスが長すぎます！&#39;</span>
    <span class="p">],</span>
<span class="p">],</span>
</code></pre></div>
<p><a name="specifying-attribute-in-language-files"></a></p>
<h3 id="_39">言語ファイルでの属性の指定<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h3>
<p>Laravelの組み込みエラーメッセージの多くには、バリデーション対象のフィールドまたは属性の名前に置き換えられる <code>:attribute</code> プレースホルダが含まれています。バリデーションメッセージの <code>:attribute</code> 部分をカスタム値に置き換えたい場合は、<code>lang/xx/validation.php</code> 言語ファイルの <code>attributes</code> 配列でカスタム属性名を指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;attributes&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;メールアドレス&#39;</span><span class="p">,</span>
<span class="p">],</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>デフォルトでは、Laravelアプリケーションのスケルトンには <code>lang</code> ディレクトリが含まれていません。Laravelの言語ファイルをカスタマイズしたい場合は、<code>lang:publish</code> Artisan コマンドを介してそれらを公開することができます。</p>
</div>
<p><a name="specifying-values-in-language-files"></a></p>
<h3 id="_40">言語ファイルでの値の指定<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h3>
<p>Laravelの組み込みバリデーションルールのエラーメッセージの一部には、リクエスト属性の現在の値に置き換えられる <code>:value</code> プレースホルダが含まれています。ただし、バリデーションメッセージの <code>:value</code> 部分をカスタム表現に置き換えたい場合があります。たとえば、<code>payment_type</code> の値が <code>cc</code> の場合にクレジットカード番号が必須であるというルールを考えてみましょう。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;credit_card_number&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required_if:payment_type,cc&#39;</span>
<span class="p">]);</span>
</code></pre></div>
<p>このバリデーションルールが失敗すると、次のエラーメッセージが生成されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="x">The credit card number field is required when payment type is cc.</span>
</code></pre></div>
<p>支払いタイプの値として <code>cc</code> を表示する代わりに、<code>lang/xx/validation.php</code> 言語ファイルで <code>values</code> 配列を定義することで、よりユーザーフレンドリーな値表現を指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;values&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;payment_type&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;cc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;クレジットカード&#39;</span>
    <span class="p">],</span>
<span class="p">],</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>デフォルトでは、Laravelアプリケーションのスケルトンには <code>lang</code> ディレクトリが含まれていません。Laravelの言語ファイルをカスタマイズしたい場合は、<code>lang:publish</code> Artisan コマンドを介してそれらを公開することができます。</p>
</div>
<p>この値を定義した後、バリデーションルールは次のエラーメッセージを生成します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="x">The credit card number field is required when payment type is クレジットカード.</span>
</code></pre></div>
<p><a name="available-validation-rules"></a></p>
<h2 id="_41">利用可能なバリデーションルール<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h2>
<p>以下は、利用可能なすべてのバリデーションルールとその機能のリストです。</p>
<style>
    .collection-method-list > p {
        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;
    }

    .collection-method-list a {
        display: block;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
</style>

<div class="collection-method-list">
<h1 id="_42">検証ルール<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h1>
<p><a href="#rule-accepted">Accepted</a><br />
<a href="#rule-accepted-if">Accepted If</a><br />
<a href="#rule-active-url">Active URL</a><br />
<a href="#rule-after">After (Date)</a><br />
<a href="#rule-after-or-equal">After Or Equal (Date)</a><br />
<a href="#rule-alpha">Alpha</a><br />
<a href="#rule-alpha-dash">Alpha Dash</a><br />
<a href="#rule-alpha-num">Alpha Numeric</a><br />
<a href="#rule-array">Array</a><br />
<a href="#rule-ascii">Ascii</a><br />
<a href="#rule-bail">Bail</a><br />
<a href="#rule-before">Before (Date)</a><br />
<a href="#rule-before-or-equal">Before Or Equal (Date)</a><br />
<a href="#rule-between">Between</a><br />
<a href="#rule-boolean">Boolean</a><br />
<a href="#rule-confirmed">Confirmed</a><br />
<a href="#rule-contains">Contains</a><br />
<a href="#rule-current-password">Current Password</a><br />
<a href="#rule-date">Date</a><br />
<a href="#rule-date-equals">Date Equals</a><br />
<a href="#rule-date-format">Date Format</a><br />
<a href="#rule-decimal">Decimal</a><br />
<a href="#rule-declined">Declined</a><br />
<a href="#rule-declined-if">Declined If</a><br />
<a href="#rule-different">Different</a><br />
<a href="#rule-digits">Digits</a><br />
<a href="#rule-digits-between">Digits Between</a><br />
<a href="#rule-dimensions">Dimensions (Image Files)</a><br />
<a href="#rule-distinct">Distinct</a><br />
<a href="#rule-doesnt-start-with">Doesnt Start With</a><br />
<a href="#rule-doesnt-end-with">Doesnt End With</a><br />
<a href="#rule-email">Email</a><br />
<a href="#rule-ends-with">Ends With</a><br />
<a href="#rule-enum">Enum</a><br />
<a href="#rule-exclude">Exclude</a><br />
<a href="#rule-exclude-if">Exclude If</a><br />
<a href="#rule-exclude-unless">Exclude Unless</a><br />
<a href="#rule-exclude-with">Exclude With</a><br />
<a href="#rule-exclude-without">Exclude Without</a><br />
<a href="#rule-exists">Exists (Database)</a><br />
<a href="#rule-extensions">Extensions</a><br />
<a href="#rule-file">File</a><br />
<a href="#rule-filled">Filled</a><br />
<a href="#rule-gt">Greater Than</a><br />
<a href="#rule-gte">Greater Than Or Equal</a><br />
<a href="#rule-hex-color">Hex Color</a><br />
<a href="#rule-image">Image (File)</a><br />
<a href="#rule-in">In</a><br />
<a href="#rule-in-array">In Array</a><br />
<a href="#rule-integer">Integer</a><br />
<a href="#rule-ip">IP Address</a><br />
<a href="#rule-json">JSON</a><br />
<a href="#rule-lt">Less Than</a><br />
<a href="#rule-lte">Less Than Or Equal</a><br />
<a href="#rule-list">List</a><br />
<a href="#rule-lowercase">Lowercase</a><br />
<a href="#rule-mac">MAC Address</a><br />
<a href="#rule-max">Max</a><br />
<a href="#rule-max-digits">Max Digits</a><br />
<a href="#rule-mimetypes">MIME Types</a><br />
<a href="#rule-mimes">MIME Type By File Extension</a><br />
<a href="#rule-min">Min</a><br />
<a href="#rule-min-digits">Min Digits</a><br />
<a href="#rule-missing">Missing</a><br />
<a href="#rule-missing-if">Missing If</a><br />
<a href="#rule-missing-unless">Missing Unless</a><br />
<a href="#rule-missing-with">Missing With</a><br />
<a href="#rule-missing-with-all">Missing With All</a><br />
<a href="#rule-multiple-of">Multiple Of</a><br />
<a href="#rule-not-in">Not In</a><br />
<a href="#rule-not-regex">Not Regex</a><br />
<a href="#rule-nullable">Nullable</a><br />
<a href="#rule-numeric">Numeric</a><br />
<a href="#rule-present">Present</a><br />
<a href="#rule-present-if">Present If</a><br />
<a href="#rule-present-unless">Present Unless</a><br />
<a href="#rule-present-with">Present With</a><br />
<a href="#rule-present-with-all">Present With All</a><br />
<a href="#rule-prohibited">Prohibited</a><br />
<a href="#rule-prohibited-if">Prohibited If</a><br />
<a href="#rule-prohibited-unless">Prohibited Unless</a><br />
<a href="#rule-prohibits">Prohibits</a><br />
<a href="#rule-regex">Regular Expression</a><br />
<a href="#rule-required">Required</a><br />
<a href="#rule-required-if">Required If</a><br />
<a href="#rule-required-if-accepted">Required If Accepted</a><br />
<a href="#rule-required-if-declined">Required If Declined</a><br />
<a href="#rule-required-unless">Required Unless</a><br />
<a href="#rule-required-with">Required With</a><br />
<a href="#rule-required-with-all">Required With All</a><br />
<a href="#rule-required-without">Required Without</a><br />
<a href="#rule-required-without-all">Required Without All</a><br />
<a href="#rule-required-array-keys">Required Array Keys</a><br />
<a href="#rule-same">Same</a><br />
<a href="#rule-size">Size</a><br />
<a href="#validating-when-present">Sometimes</a><br />
<a href="#rule-starts-with">Starts With</a><br />
<a href="#rule-string">String</a><br />
<a href="#rule-timezone">Timezone</a><br />
<a href="#rule-unique">Unique (Database)</a><br />
<a href="#rule-uppercase">Uppercase</a><br />
<a href="#rule-url">URL</a><br />
<a href="#rule-ulid">ULID</a><br />
<a href="#rule-uuid">UUID</a></p>
</div>
<p><a name="rule-accepted"></a></p>
<h3 id="accepted">accepted<a class="headerlink" href="#accepted" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは <code>"yes"</code>、<code>"on"</code>、<code>1</code>、<code>"1"</code>、<code>true</code>、または <code>"true"</code> でなければなりません。これは「利用規約」の同意などのフィールドの検証に便利です。</p>
<p><a name="rule-accepted-if"></a></p>
<h3 id="accepted_ifanotherfieldvalue">accepted_if:anotherfield,value,...<a class="headerlink" href="#accepted_ifanotherfieldvalue" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、別のフィールドが指定された値と等しい場合に <code>"yes"</code>、<code>"on"</code>、<code>1</code>、<code>"1"</code>、<code>true</code>、または <code>"true"</code> でなければなりません。これは「利用規約」の同意などのフィールドの検証に便利です。</p>
<p><a name="rule-active-url"></a></p>
<h3 id="active_url">active_url<a class="headerlink" href="#active_url" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、<code>dns_get_record</code> PHP 関数に従って有効な A または AAAA レコードを持っている必要があります。提供された URL のホスト名は、<code>parse_url</code> PHP 関数を使用して抽出され、<code>dns_get_record</code> に渡されます。</p>
<p><a name="rule-after"></a></p>
<h3 id="afterdate">after:<em>date</em><a class="headerlink" href="#afterdate" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、指定された日付より後の値でなければなりません。日付は <code>strtotime</code> PHP 関数に渡され、有効な <code>DateTime</code> インスタンスに変換されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="s1">&#39;start_date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|date|after:tomorrow&#39;</span>
</code></pre></div>
<p><code>strtotime</code> で評価される日付文字列の代わりに、日付と比較する別のフィールドを指定することもできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="s1">&#39;finish_date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|date|after:start_date&#39;</span>
</code></pre></div>
<p><a name="rule-after-or-equal"></a></p>
<h3 id="after_or_equaldate">after_or_equal:<em>date</em><a class="headerlink" href="#after_or_equaldate" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、指定された日付と等しいかそれより後の値でなければなりません。詳細については、<a href="#rule-after">after</a> ルールを参照してください。</p>
<p><a name="rule-alpha"></a></p>
<h3 id="alpha">alpha<a class="headerlink" href="#alpha" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、<a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AL%3A%5D&amp;g=&amp;i="><code>\p{L}</code></a> および <a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AM%3A%5D&amp;g=&amp;i="><code>\p{M}</code></a> に含まれる Unicode のアルファベット文字でなければなりません。</p>
<p>この検証ルールを ASCII 範囲 (<code>a-z</code> および <code>A-Z</code>) の文字に制限するには、検証ルールに <code>ascii</code> オプションを指定できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alpha:ascii&#39;</span><span class="p">,</span>
</code></pre></div>
<p><a name="rule-alpha-dash"></a></p>
<h3 id="alpha_dash">alpha_dash<a class="headerlink" href="#alpha_dash" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、<a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AL%3A%5D&amp;g=&amp;i="><code>\p{L}</code></a>、<a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AM%3A%5D&amp;g=&amp;i="><code>\p{M}</code></a>、<a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AN%3A%5D&amp;g=&amp;i="><code>\p{N}</code></a> に含まれる Unicode のアルファベット数字文字、および ASCII のダッシュ (<code>-</code>) とアンダースコア (<code>_</code>) でなければなりません。</p>
<p>この検証ルールを ASCII 範囲 (<code>a-z</code> および <code>A-Z</code>) の文字に制限するには、検証ルールに <code>ascii</code> オプションを指定できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alpha_dash:ascii&#39;</span><span class="p">,</span>
</code></pre></div>
<p><a name="rule-alpha-num"></a></p>
<h3 id="alpha_num">alpha_num<a class="headerlink" href="#alpha_num" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、<a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AL%3A%5D&amp;g=&amp;i="><code>\p{L}</code></a>、<a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AM%3A%5D&amp;g=&amp;i="><code>\p{M}</code></a>、および <a href="https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AN%3A%5D&amp;g=&amp;i="><code>\p{N}</code></a> に含まれる Unicode のアルファベット数字文字でなければなりません。</p>
<p>この検証ルールを ASCII 範囲 (<code>a-z</code> および <code>A-Z</code>) の文字に制限するには、検証ルールに <code>ascii</code> オプションを指定できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alpha_num:ascii&#39;</span><span class="p">,</span>
</code></pre></div>
<p><a name="rule-array"></a></p>
<h3 id="array">array<a class="headerlink" href="#array" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、PHP の <code>array</code> でなければなりません。</p>
<p><code>array</code> ルールに追加の値が提供されると、入力配列の各キーは、ルールに提供される値のリスト内に存在しなければなりません。以下の例では、入力配列の <code>admin</code> キーは、<code>array</code> ルールに提供される値のリストに含まれていないため無効です。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="nv">$input</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor Otwell&#39;</span><span class="p">,</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>        <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;taylorotwell&#39;</span><span class="p">,</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>        <span class="s1">&#39;admin&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>    <span class="p">],</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="p">];</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;array:name,username&#39;</span><span class="p">,</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="p">]);</span>
</code></pre></div>
<p>一般的に、配列内に存在することが許可される配列キーを常に指定する必要があります。</p>
<p><a name="rule-ascii"></a></p>
<h3 id="ascii">ascii<a class="headerlink" href="#ascii" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、完全に 7 ビット ASCII 文字でなければなりません。</p>
<p><a name="rule-bail"></a></p>
<h3 id="bail">bail<a class="headerlink" href="#bail" title="Permanent link">&para;</a></h3>
<p>フィールドの最初の検証失敗後に、フィールドの検証ルールの実行を停止します。</p>
<p><code>bail</code> ルールは、検証失敗が発生した場合に特定のフィールドの検証のみを停止しますが、<code>stopOnFirstFailure</code> メソッドは、単一の検証失敗が発生した場合にすべての属性の検証を停止するようにバリデータに指示します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">if</span> <span class="p">(</span><span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">stopOnFirstFailure</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">fails</span><span class="p">())</span> <span class="p">{</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>    <span class="c1">// ...</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="p">}</span>
</code></pre></div>
<p><a name="rule-before"></a></p>
<h3 id="beforedate">before:<em>date</em><a class="headerlink" href="#beforedate" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、指定された日付より前の値でなければなりません。日付は PHP の <code>strtotime</code> 関数に渡され、有効な <code>DateTime</code> インスタンスに変換されます。さらに、<a href="#rule-after"><code>after</code></a> ルールと同様に、検証中の別のフィールドの名前を <code>date</code> の値として指定できます。</p>
<p><a name="rule-before-or-equal"></a></p>
<h3 id="before_or_equaldate">before_or_equal:<em>date</em><a class="headerlink" href="#before_or_equaldate" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、指定された日付と等しいかそれより前の値でなければなりません。日付は PHP の <code>strtotime</code> 関数に渡され、有効な <code>DateTime</code> インスタンスに変換されます。さらに、<a href="#rule-after"><code>after</code></a> ルールと同様に、検証中の別のフィールドの名前を <code>date</code> の値として指定できます。</p>
<p><a name="rule-between"></a></p>
<h3 id="betweenminmax">between:<em>min</em>,<em>max</em><a class="headerlink" href="#betweenminmax" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、指定された <em>min</em> と <em>max</em> の間のサイズでなければなりません（両端を含む）。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ方法で評価されます。</p>
<p><a name="rule-boolean"></a></p>
<h3 id="boolean">boolean<a class="headerlink" href="#boolean" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、ブール値にキャスト可能でなければなりません。受け入れられる入力は <code>true</code>、<code>false</code>、<code>1</code>、<code>0</code>、<code>"1"</code>、および <code>"0"</code> です。</p>
<p><a name="rule-confirmed"></a></p>
<h3 id="confirmed">confirmed<a class="headerlink" href="#confirmed" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、<code>{field}_confirmation</code> と一致するフィールドを持っている必要があります。たとえば、検証中のフィールドが <code>password</code> の場合、<code>password_confirmation</code> フィールドが入力に存在しなければなりません。</p>
<p><a name="rule-contains"></a></p>
<h3 id="containsfoobar">contains:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#containsfoobar" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、すべての指定されたパラメータ値を含む配列でなければなりません。</p>
<p><a name="rule-current-password"></a></p>
<h3 id="current_password">current_password<a class="headerlink" href="#current_password" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、認証されたユーザーのパスワードと一致しなければなりません。ルールの最初のパラメータを使用して、<a href="authentication.html">認証ガード</a> を指定できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;current_password:api&#39;</span>
</code></pre></div>
<p><a name="rule-date"></a></p>
<h3 id="date">date<a class="headerlink" href="#date" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、<code>strtotime</code> PHP 関数に従って有効な非相対日付でなければなりません。</p>
<p><a name="rule-date-equals"></a></p>
<h3 id="date_equalsdate">date_equals:<em>date</em><a class="headerlink" href="#date_equalsdate" title="Permanent link">&para;</a></h3>
<p>検証中のフィールドは、指定された日付と等しい値でなければなりません。日付は <code>strtotime</code> PHP 関数に渡され、有効な <code>DateTime</code> インスタンスに変換されます。</p>
<p>検証対象のフィールドは、指定された日付と等しくなければなりません。日付は、有効な <code>DateTime</code> インスタンスに変換するために、PHP の <code>strtotime</code> 関数に渡されます。</p>
<p><a name="rule-date-format"></a></p>
<h4 id="date_formatformat">date_format:<em>format</em>,...<a class="headerlink" href="#date_formatformat" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、指定されたフォーマットのいずれかに一致しなければなりません。フィールドを検証する際には、<code>date</code> または <code>date_format</code> のいずれかを使用する必要があり、両方を使用することはできません。この検証ルールは、PHP の <a href="https://www.php.net/manual/en/class.datetime.php">DateTime</a> クラスがサポートするすべてのフォーマットをサポートしています。</p>
<p><a name="rule-decimal"></a></p>
<h4 id="decimalminmax">decimal:<em>min</em>,<em>max</em><a class="headerlink" href="#decimalminmax" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは数値であり、指定された小数点以下の桁数を含まなければなりません:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 小数点以下2桁でなければならない (9.99)...</span>
<span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;decimal:2&#39;</span>

<span class="c1">// 小数点以下2から4桁の間でなければならない...</span>
<span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;decimal:2,4&#39;</span>
</code></pre></div>
<p><a name="rule-declined"></a></p>
<h4 id="declined">declined<a class="headerlink" href="#declined" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは <code>"no"</code>、<code>"off"</code>、<code>0</code>、<code>"0"</code>、<code>false</code>、または <code>"false"</code> でなければなりません。</p>
<p><a name="rule-declined-if"></a></p>
<h4 id="declined_ifanotherfieldvalue">declined_if:anotherfield,value,...<a class="headerlink" href="#declined_ifanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、別のフィールドが指定された値と等しい場合に <code>"no"</code>、<code>"off"</code>、<code>0</code>、<code>"0"</code>、<code>false</code>、または <code>"false"</code> でなければなりません。</p>
<p><a name="rule-different"></a></p>
<h4 id="differentfield">different:<em>field</em><a class="headerlink" href="#differentfield" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、<em>field</em> と異なる値でなければなりません。</p>
<p><a name="rule-digits"></a></p>
<h4 id="digitsvalue">digits:<em>value</em><a class="headerlink" href="#digitsvalue" title="Permanent link">&para;</a></h4>
<p>検証対象の整数は、<em>value</em> の正確な長さを持たなければなりません。</p>
<p><a name="rule-digits-between"></a></p>
<h4 id="digits_betweenminmax">digits_between:<em>min</em>,<em>max</em><a class="headerlink" href="#digits_betweenminmax" title="Permanent link">&para;</a></h4>
<p>検証対象の整数は、指定された <em>min</em> と <em>max</em> の間の長さを持たなければなりません。</p>
<p><a name="rule-dimensions"></a></p>
<h4 id="dimensions">dimensions<a class="headerlink" href="#dimensions" title="Permanent link">&para;</a></h4>
<p>検証対象のファイルは、ルールのパラメータで指定された寸法制約を満たす画像でなければなりません:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;dimensions:min_width=100,min_height=200&#39;</span>
</code></pre></div>
<p>利用可能な制約は: <em>min_width</em>、<em>max_width</em>、<em>min_height</em>、<em>max_height</em>、<em>width</em>、<em>height</em>、<em>ratio</em> です。</p>
<p><em>ratio</em> 制約は、幅を高さで割ったものとして表されるべきです。これは <code>3/2</code> のような分数または <code>1.5</code> のような浮動小数点数で指定できます:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;dimensions:ratio=3/2&#39;</span>
</code></pre></div>
<p>このルールは複数の引数を必要とするため、<code>Rule::dimensions</code> メソッドを使用してルールを流暢に構築することができます:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
        <span class="nx">Rule</span><span class="o">::</span><span class="na">dimensions</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">maxWidth</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">maxHeight</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ratio</span><span class="p">(</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="rule-distinct"></a></p>
<h4 id="distinct">distinct<a class="headerlink" href="#distinct" title="Permanent link">&para;</a></h4>
<p>配列を検証する際、検証対象のフィールドは重複する値を持ってはなりません:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;foo.*.id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;distinct&#39;</span>
</code></pre></div>
<p>Distinct はデフォルトで緩い変数比較を使用します。厳密な比較を使用するには、検証ルール定義に <code>strict</code> パラメータを追加できます:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;foo.*.id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;distinct:strict&#39;</span>
</code></pre></div>
<p>検証ルールの引数に <code>ignore_case</code> を追加することで、ルールが大文字と小文字の違いを無視するようにできます:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;foo.*.id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;distinct:ignore_case&#39;</span>
</code></pre></div>
<p><a name="rule-doesnt-start-with"></a></p>
<h4 id="doesnt_start_withfoobar">doesnt_start_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#doesnt_start_withfoobar" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、指定された値のいずれかで始まってはなりません。</p>
<p><a name="rule-doesnt-end-with"></a></p>
<h4 id="doesnt_end_withfoobar">doesnt_end_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#doesnt_end_withfoobar" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、指定された値のいずれかで終わってはなりません。</p>
<p><a name="rule-email"></a></p>
<h4 id="email">email<a class="headerlink" href="#email" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、メールアドレスとしてフォーマットされていなければなりません。この検証ルールは、メールアドレスの検証に <a href="https://github.com/egulias/EmailValidator"><code>egulias/email-validator</code></a> パッケージを利用します。デフォルトでは <code>RFCValidation</code> バリデータが適用されますが、他の検証スタイルも適用できます:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email:rfc,dns&#39;</span>
</code></pre></div>
<p>上記の例では、<code>RFCValidation</code> と <code>DNSCheckValidation</code> の検証が適用されます。適用可能な検証スタイルの完全なリストは以下の通りです:</p>
<div class="content-list">
<ul>
<li><code>rfc</code>: <code>RFCValidation</code></li>
<li><code>strict</code>: <code>NoRFCWarningsValidation</code></li>
<li><code>dns</code>: <code>DNSCheckValidation</code></li>
<li><code>spoof</code>: <code>SpoofCheckValidation</code></li>
<li><code>filter</code>: <code>FilterEmailValidation</code></li>
<li><code>filter_unicode</code>: <code>FilterEmailValidation::unicode()</code></li>
</ul>
</div>
<p><code>filter</code> バリデータは、PHP の <code>filter_var</code> 関数を使用し、Laravel 5.8 以前のデフォルトのメール検証動作でした。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>dns</code> および <code>spoof</code> バリデータには、PHP の <code>intl</code> 拡張が必要です。</p>
</div>
<p><a name="rule-ends-with"></a></p>
<h4 id="ends_withfoobar">ends_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#ends_withfoobar" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、指定された値のいずれかで終わらなければなりません。</p>
<p><a name="rule-enum"></a></p>
<h4 id="enum">enum<a class="headerlink" href="#enum" title="Permanent link">&para;</a></h4>
<p><code>Enum</code> ルールは、クラスベースのルールで、検証対象のフィールドが有効な enum 値を含んでいるかどうかを検証します。<code>Enum</code> ルールは、enum の名前を唯一のコンストラクタ引数として受け取ります。プリミティブ値を検証する場合、<code>Enum</code> ルールには backed Enum を提供する必要があります:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">App\Enums\ServerStatus</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
    <span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">Rule</span><span class="o">::</span><span class="na">enum</span><span class="p">(</span><span class="nx">ServerStatus</span><span class="o">::</span><span class="na">class</span><span class="p">)],</span>
<span class="p">]);</span>
</code></pre></div>
<p><code>Enum</code> ルールの <code>only</code> および <code>except</code> メソッドを使用して、どの enum ケースを有効と見なすかを制限できます:</p>
<div class="highlight"><pre><span></span><code><span class="nx">Rule</span><span class="o">::</span><span class="na">enum</span><span class="p">(</span><span class="nx">ServerStatus</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="nx">ServerStatus</span><span class="o">::</span><span class="na">Pending</span><span class="p">,</span> <span class="nx">ServerStatus</span><span class="o">::</span><span class="na">Active</span><span class="p">]);</span>

<span class="nx">Rule</span><span class="o">::</span><span class="na">enum</span><span class="p">(</span><span class="nx">ServerStatus</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">except</span><span class="p">([</span><span class="nx">ServerStatus</span><span class="o">::</span><span class="na">Pending</span><span class="p">,</span> <span class="nx">ServerStatus</span><span class="o">::</span><span class="na">Active</span><span class="p">]);</span>
</code></pre></div>
<p><code>when</code> メソッドを使用して、<code>Enum</code> ルールを条件付きで変更できます:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Auth</span><span class="p">;</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="nx">Rule</span><span class="o">::</span><span class="na">enum</span><span class="p">(</span><span class="nx">ServerStatus</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>    <span class="o">-&gt;</span><span class="na">when</span><span class="p">(</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>        <span class="nx">Auth</span><span class="o">::</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">isAdmin</span><span class="p">(),</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>        <span class="nx">fn</span> <span class="p">(</span><span class="nv">$rule</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$rule</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>        <span class="nx">fn</span> <span class="p">(</span><span class="nv">$rule</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$rule</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>    <span class="p">);</span>
</code></pre></div>
<p><a name="rule-exclude"></a></p>
<h4 id="exclude">exclude<a class="headerlink" href="#exclude" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、<code>validate</code> および <code>validated</code> メソッドによって返されるリクエストデータから除外されます。</p>
<p><a name="rule-exclude-if"></a></p>
<h4 id="exclude_ifanotherfieldvalue">exclude_if:<em>anotherfield</em>,<em>value</em><a class="headerlink" href="#exclude_ifanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、<em>anotherfield</em> フィールドが <em>value</em> と等しい場合、<code>validate</code> および <code>validated</code> メソッドによって返されるリクエストデータから除外されます。</p>
<p>複雑な条件付き除外ロジックが必要な場合、<code>Rule::excludeIf</code> メソッドを使用できます。このメソッドは、ブール値またはクロージャを受け取ります。クロージャが与えられた場合、クロージャは検証対象のフィールドを除外するかどうかを示すために <code>true</code> または <code>false</code> を返すべきです:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;role_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">excludeIf</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="p">),</span>
<span class="p">]);</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;role_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">excludeIf</span><span class="p">(</span><span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="p">),</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="rule-exclude-unless"></a></p>
<h4 id="exclude_unlessanotherfieldvalue">exclude_unless:<em>anotherfield</em>,<em>value</em><a class="headerlink" href="#exclude_unlessanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、<em>anotherfield</em> フィールドが <em>value</em> と等しくない限り、<code>validate</code> および <code>validated</code> メソッドによって返されるリクエストデータから除外されます。<em>value</em> が <code>null</code> (<code>exclude_unless:name,null</code>) の場合、検証対象のフィールドは、比較フィールドが <code>null</code> であるか、比較フィールドがリクエストデータに存在しない限り、除外されます。</p>
<p><a name="rule-exclude-with"></a></p>
<h4 id="exclude_withanotherfield">exclude_with:<em>anotherfield</em><a class="headerlink" href="#exclude_withanotherfield" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、<em>anotherfield</em> フィールドが存在する場合、<code>validate</code> および <code>validated</code> メソッドによって返されるリクエストデータから除外されます。</p>
<p><a name="rule-exclude-without"></a></p>
<h4 id="exclude_withoutanotherfield">exclude_without:<em>anotherfield</em><a class="headerlink" href="#exclude_withoutanotherfield" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、<em>anotherfield</em> フィールドが存在しない場合、<code>validate</code> および <code>validated</code> メソッドによって返されるリクエストデータから除外されます。</p>
<p><a name="rule-exists"></a></p>
<h4 id="existstablecolumn">exists:<em>table</em>,<em>column</em><a class="headerlink" href="#existstablecolumn" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは、指定されたデータベーステーブルに存在しなければなりません。</p>
<p><a name="basic-usage-of-exists-rule"></a></p>
<h4 id="exists">Exists ルールの基本的な使用法<a class="headerlink" href="#exists" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;state&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exists:states&#39;</span>
</code></pre></div>
<p><code>column</code> オプションが指定されていない場合、フィールド名が使用されます。したがって、この場合、ルールは <code>states</code> データベーステーブルに、リクエストの <code>state</code> 属性値に一致する <code>state</code> 列の値を持つレコードが存在することを検証します。</p>
<p><a name="specifying-a-custom-column-name"></a></p>
<h4 id="_43">カスタム列名の指定<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<p>検証ルールによって使用されるべきデータベース列名を明示的に指定するには、データベーステーブル名の後に列名を配置します:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;state&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exists:states,abbreviation&#39;</span>
</code></pre></div>
<p>時には、<code>exists</code> クエリに使用される特定のデータベース接続を指定する必要があるかもしれません。これは、接続名をテーブル名の前に付けることで実現できます:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exists:connection.staff,email&#39;</span>
</code></pre></div>
<p>テーブル名を直接指定する代わりに、テーブル名を決定するために使用される Eloquent モデルを指定することもできます:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;user_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exists:App\Models\User,id&#39;</span>
</code></pre></div>
<p>検証ルールによって実行されるクエリをカスタマイズしたい場合、<code>Rule</code> クラスを使用してルールを流暢に定義できます。この例では、検証ルールを <code>|</code> 文字で区切る代わりに配列として指定します:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Database\Query\Builder</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
        <span class="nx">Rule</span><span class="o">::</span><span class="na">exists</span><span class="p">(</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Builder</span> <span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;account_id&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}),</span>
    <span class="p">],</span>
<span class="p">]);</span>
</code></pre></div>
<p><code>Rule::exists</code> メソッドによって生成される <code>exists</code> ルールによって使用されるべきデータベース列名を明示的に指定するには、<code>exists</code> メソッドの第2引数として列名を提供します:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;state&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">exists</span><span class="p">(</span><span class="s1">&#39;states&#39;</span><span class="p">,</span> <span class="s1">&#39;abbreviation&#39;</span><span class="p">),</span>
</code></pre></div>
<p><a name="rule-extensions"></a></p>
<h4 id="extensionsfoobar">extensions:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#extensionsfoobar" title="Permanent link">&para;</a></h4>
<p>検証対象のファイルは、リストされた拡張子のいずれかに対応するユーザーが割り当てた拡張子を持たなければなりません:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;photo&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;extensions:jpg,png&#39;</span><span class="p">],</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>ファイルの検証をユーザーが割り当てた拡張子のみに依存するべきではありません。このルールは通常、<a href="#rule-mimes"><code>mimes</code></a> または <a href="#rule-mimetypes"><code>mimetypes</code></a> ルールと組み合わせて使用する必要があります。</p>
</div>
<p><a name="rule-file"></a></p>
<h4 id="file">file<a class="headerlink" href="#file" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、正常にアップロードされたファイルでなければなりません。</p>
<p><a name="rule-filled"></a></p>
<h4 id="filled">filled<a class="headerlink" href="#filled" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、存在する場合に空であってはなりません。</p>
<p><a name="rule-gt"></a></p>
<h4 id="gtfield">gt:<em>field</em><a class="headerlink" href="#gtfield" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された <em>field</em> または <em>value</em> より大きくなければなりません。2つのフィールドは同じ型でなければなりません。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ規則を使用して評価されます。</p>
<p><a name="rule-gte"></a></p>
<h4 id="gtefield">gte:<em>field</em><a class="headerlink" href="#gtefield" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された <em>field</em> または <em>value</em> 以上でなければなりません。2つのフィールドは同じ型でなければなりません。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ規則を使用して評価されます。</p>
<p><a name="rule-hex-color"></a></p>
<h4 id="hex_color">hex_color<a class="headerlink" href="#hex_color" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、有効な <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/hex-color">16進数</a> 形式の色の値を含んでいなければなりません。</p>
<p><a name="rule-image"></a></p>
<h4 id="image">image<a class="headerlink" href="#image" title="Permanent link">&para;</a></h4>
<p>検証中のファイルは、画像（jpg、jpeg、png、bmp、gif、svg、または webp）でなければなりません。</p>
<p><a name="rule-in"></a></p>
<h4 id="infoobar">in:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#infoobar" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された値のリストに含まれていなければなりません。このルールはしばしば配列を <code>implode</code> する必要がありますが、<code>Rule::in</code> メソッドを使用してルールを流暢に構築することができます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;zones&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
        <span class="nx">Rule</span><span class="o">::</span><span class="na">in</span><span class="p">([</span><span class="s1">&#39;first-zone&#39;</span><span class="p">,</span> <span class="s1">&#39;second-zone&#39;</span><span class="p">]),</span>
    <span class="p">],</span>
<span class="p">]);</span>
</code></pre></div>
<p><code>in</code> ルールが <code>array</code> ルールと組み合わされると、入力配列内の各値は <code>in</code> ルールに提供された値のリスト内に存在しなければなりません。次の例では、入力配列内の <code>LAS</code> 空港コードは無効です。なぜなら、<code>in</code> ルールに提供された空港のリストに含まれていないからです：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;airports&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;NYC&#39;</span><span class="p">,</span> <span class="s1">&#39;LAS&#39;</span><span class="p">],</span>
<span class="p">];</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;airports&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
        <span class="s1">&#39;array&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;airports.*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">in</span><span class="p">([</span><span class="s1">&#39;NYC&#39;</span><span class="p">,</span> <span class="s1">&#39;LIT&#39;</span><span class="p">]),</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="rule-in-array"></a></p>
<h4 id="in_arrayanotherfield">in_array:<em>anotherfield</em>.*<a class="headerlink" href="#in_arrayanotherfield" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、<em>anotherfield</em> の値の中に存在しなければなりません。</p>
<p><a name="rule-integer"></a></p>
<h4 id="integer">integer<a class="headerlink" href="#integer" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは整数でなければなりません。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>この検証ルールは、入力が "integer" 変数型であることを検証しません。PHP の <code>FILTER_VALIDATE_INT</code> ルールで受け入れられる型であることのみを検証します。入力が数値であることを検証する場合は、このルールと <a href="#rule-numeric"> <code>numeric</code> 検証ルール</a> を組み合わせて使用してください。</p>
</div>
<p><a name="rule-ip"></a></p>
<h4 id="ip">ip<a class="headerlink" href="#ip" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、IP アドレスでなければなりません。</p>
<p><a name="ipv4"></a></p>
<h4 id="ipv4">ipv4<a class="headerlink" href="#ipv4" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、IPv4 アドレスでなければなりません。</p>
<p><a name="ipv6"></a></p>
<h4 id="ipv6">ipv6<a class="headerlink" href="#ipv6" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、IPv6 アドレスでなければなりません。</p>
<p><a name="rule-json"></a></p>
<h4 id="json">json<a class="headerlink" href="#json" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、有効な JSON 文字列でなければなりません。</p>
<p><a name="rule-lt"></a></p>
<h4 id="ltfield">lt:<em>field</em><a class="headerlink" href="#ltfield" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された <em>field</em> より小さくなければなりません。2つのフィールドは同じ型でなければなりません。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ規則を使用して評価されます。</p>
<p><a name="rule-lte"></a></p>
<h4 id="ltefield">lte:<em>field</em><a class="headerlink" href="#ltefield" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された <em>field</em> 以下でなければなりません。2つのフィールドは同じ型でなければなりません。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ規則を使用して評価されます。</p>
<p><a name="rule-lowercase"></a></p>
<h4 id="lowercase">lowercase<a class="headerlink" href="#lowercase" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、小文字でなければなりません。</p>
<p><a name="rule-list"></a></p>
<h4 id="list">list<a class="headerlink" href="#list" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、リストである配列でなければなりません。配列は、そのキーが 0 から <code>count($array) - 1</code> までの連続した数値で構成されている場合、リストと見なされます。</p>
<p><a name="rule-mac"></a></p>
<h4 id="mac_address">mac_address<a class="headerlink" href="#mac_address" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、MAC アドレスでなければなりません。</p>
<p><a name="rule-max"></a></p>
<h4 id="maxvalue">max:<em>value</em><a class="headerlink" href="#maxvalue" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、最大 <em>value</em> 以下でなければなりません。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ方法で評価されます。</p>
<p><a name="rule-max-digits"></a></p>
<h4 id="max_digitsvalue">max_digits:<em>value</em><a class="headerlink" href="#max_digitsvalue" title="Permanent link">&para;</a></h4>
<p>検証中の整数は、最大 <em>value</em> の長さでなければなりません。</p>
<p><a name="rule-mimetypes"></a></p>
<h4 id="mimetypestextplain">mimetypes:<em>text/plain</em>,...<a class="headerlink" href="#mimetypestextplain" title="Permanent link">&para;</a></h4>
<p>検証中のファイルは、指定された MIME タイプのいずれかと一致しなければなりません：</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;video&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mimetypes:video/avi,video/mpeg,video/quicktime&#39;</span>
</code></pre></div>
<p>アップロードされたファイルの MIME タイプを決定するために、ファイルの内容が読み取られ、フレームワークは MIME タイプを推測しようとします。これは、クライアントが提供した MIME タイプと異なる場合があります。</p>
<p><a name="rule-mimes"></a></p>
<h4 id="mimesfoobar">mimes:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#mimesfoobar" title="Permanent link">&para;</a></h4>
<p>検証中のファイルは、リストされた拡張子のいずれかに対応する MIME タイプを持っていなければなりません：</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;photo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mimes:jpg,bmp,png&#39;</span>
</code></pre></div>
<p>拡張子のみを指定する必要がありますが、このルールは実際にはファイルの内容を読み取り、その MIME タイプを推測することでファイルの MIME タイプを検証します。MIME タイプとそれに対応する拡張子の完全なリストは、次の場所で見つけることができます：</p>
<p><a href="https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types">https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types</a></p>
<p><a name="mime-types-and-extensions"></a></p>
<h4 id="mime">MIME タイプと拡張子<a class="headerlink" href="#mime" title="Permanent link">&para;</a></h4>
<p>この検証ルールは、MIME タイプとユーザーがファイルに割り当てた拡張子の一致を検証しません。たとえば、<code>mimes:png</code> 検証ルールは、有効な PNG コンテンツを含むファイルを有効な PNG 画像と見なします。たとえファイルが <code>photo.txt</code> という名前であってもです。ファイルのユーザー割り当て拡張子を検証したい場合は、<a href="#rule-extensions"><code>extensions</code></a> ルールを使用してください。</p>
<p><a name="rule-min"></a></p>
<h4 id="minvalue">min:<em>value</em><a class="headerlink" href="#minvalue" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、最小 <em>value</em> を持っていなければなりません。文字列、数値、配列、ファイルは、<a href="#rule-size"><code>size</code></a> ルールと同じ方法で評価されます。</p>
<p><a name="rule-min-digits"></a></p>
<h4 id="min_digitsvalue">min_digits:<em>value</em><a class="headerlink" href="#min_digitsvalue" title="Permanent link">&para;</a></h4>
<p>検証中の整数は、最小 <em>value</em> の長さでなければなりません。</p>
<p><a name="rule-multiple-of"></a></p>
<h4 id="multiple_ofvalue">multiple_of:<em>value</em><a class="headerlink" href="#multiple_ofvalue" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、<em>value</em> の倍数でなければなりません。</p>
<p><a name="rule-missing"></a></p>
<h4 id="missing">missing<a class="headerlink" href="#missing" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、入力データに存在してはなりません。</p>
<p><a name="rule-missing-if"></a></p>
<h4 id="missing_ifanotherfieldvalue">missing_if:<em>anotherfield</em>,<em>value</em>,...<a class="headerlink" href="#missing_ifanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p><em>anotherfield</em> フィールドがいずれかの <em>value</em> と等しい場合、検証中のフィールドは存在してはなりません。</p>
<p><a name="rule-missing-unless"></a></p>
<h4 id="missing_unlessanotherfieldvalue">missing_unless:<em>anotherfield</em>,<em>value</em><a class="headerlink" href="#missing_unlessanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p><em>anotherfield</em> フィールドがいずれかの <em>value</em> と等しい場合を除き、検証中のフィールドは存在してはなりません。</p>
<p><a name="rule-missing-with"></a></p>
<h4 id="missing_withfoobar">missing_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#missing_withfoobar" title="Permanent link">&para;</a></h4>
<p>指定された他のフィールドのいずれかが存在する場合、検証中のフィールドは存在してはなりません。</p>
<p><a name="rule-missing-with-all"></a></p>
<h4 id="missing_with_allfoobar">missing_with_all:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#missing_with_allfoobar" title="Permanent link">&para;</a></h4>
<p>指定された他のすべてのフィールドが存在する場合、検証中のフィールドは存在してはなりません。</p>
<p><a name="rule-not-in"></a></p>
<h4 id="not_infoobar">not_in:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#not_infoobar" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された値のリストに含まれてはなりません。<code>Rule::notIn</code> メソッドを使用してルールを流暢に構築することができます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;toppings&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
        <span class="nx">Rule</span><span class="o">::</span><span class="na">notIn</span><span class="p">([</span><span class="s1">&#39;sprinkles&#39;</span><span class="p">,</span> <span class="s1">&#39;cherries&#39;</span><span class="p">]),</span>
    <span class="p">],</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="rule-not-regex"></a></p>
<h4 id="not_regexpattern">not_regex:<em>pattern</em><a class="headerlink" href="#not_regexpattern" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、指定された正規表現に一致してはなりません。</p>
<p>内部的には、このルールは PHP の <code>preg_match</code> 関数を使用します。指定されたパターンは、<code>preg_match</code> で必要とされるのと同じ形式に従う必要があり、有効な区切り文字を含める必要があります。例：<code>'email' =&gt; 'not_regex:/^.+$/i'</code>。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>regex</code> / <code>not_regex</code> パターンを使用する場合、特に正規表現に <code>|</code> 文字が含まれている場合、検証ルールを <code>|</code> 区切り文字ではなく配列で指定する必要があるかもしれません。</p>
</div>
<p><a name="rule-nullable"></a></p>
<h4 id="nullable">nullable<a class="headerlink" href="#nullable" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは <code>null</code> である可能性があります。</p>
<p><a name="rule-numeric"></a></p>
<h4 id="numeric">numeric<a class="headerlink" href="#numeric" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、<a href="https://www.php.net/manual/en/function.is-numeric.php">数値</a> でなければなりません。</p>
<p><a name="rule-present"></a></p>
<h4 id="present">present<a class="headerlink" href="#present" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、入力データに存在しなければなりません。</p>
<p><a name="rule-present-if"></a></p>
<h4 id="present_ifanotherfieldvalue">present_if:<em>anotherfield</em>,<em>value</em>,...<a class="headerlink" href="#present_ifanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p><em>anotherfield</em> フィールドがいずれかの <em>value</em> と等しい場合、検証中のフィールドは存在しなければなりません。</p>
<p><a name="rule-present-unless"></a></p>
<h4 id="present_unlessanotherfieldvalue">present_unless:<em>anotherfield</em>,<em>value</em><a class="headerlink" href="#present_unlessanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p><em>anotherfield</em> フィールドがいずれかの <em>value</em> と等しい場合を除き、検証中のフィールドは存在しなければなりません。</p>
<p><a name="rule-present-with"></a></p>
<h4 id="present_withfoobar">present_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#present_withfoobar" title="Permanent link">&para;</a></h4>
<p>指定された他のフィールドのいずれかが存在する場合、検証中のフィールドは存在しなければなりません。</p>
<p><a name="rule-present-with-all"></a></p>
<h4 id="present_with_allfoobar">present_with_all:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#present_with_allfoobar" title="Permanent link">&para;</a></h4>
<p>指定された他のすべてのフィールドが存在する場合、検証中のフィールドは存在しなければなりません。</p>
<p><a name="rule-prohibited"></a></p>
<h4 id="prohibited">prohibited<a class="headerlink" href="#prohibited" title="Permanent link">&para;</a></h4>
<p>検証中のフィールドは、存在しないか空でなければなりません。フィールドは、次のいずれかの基準を満たす場合、「空」と見なされます：</p>
<div class="content-list">
<ul>
<li>値が <code>null</code> である。</li>
<li>値が空の文字列である。</li>
<li>値が空の配列または空の <code>Countable</code> オブジェクトである。</li>
<li>値が空のパスを持つアップロードファイルである。</li>
</ul>
</div>
<p><a name="rule-prohibited-if"></a></p>
<h4 id="prohibited_ifanotherfieldvalue">prohibited_if:<em>anotherfield</em>,<em>value</em>,...<a class="headerlink" href="#prohibited_ifanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p><em>anotherfield</em> フィールドがいずれかの <em>value</em> と等しい場合、検証中のフィールドは存在しないか空でなければなりません。フィールドは、次のいずれかの基準を満たす場合、「空」と見なされます：</p>
<div class="content-list">
<ul>
<li>値が <code>null</code> である。</li>
<li>値が空の文字列である。</li>
<li>値が空の配列または空の <code>Countable</code> オブジェクトである。</li>
<li>値が空のパスを持つアップロードファイルである。</li>
</ul>
</div>
<p>複雑な条件付き禁止ロジックが必要な場合、<code>Rule::prohibitedIf</code>メソッドを利用できます。このメソッドは、ブール値またはクロージャを受け取ります。クロージャが与えられた場合、クロージャはバリデーション対象のフィールドが禁止されるべきかどうかを示すために<code>true</code>または<code>false</code>を返すべきです。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>    <span class="s1">&#39;role_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">prohibitedIf</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="p">),</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="p">]);</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>    <span class="s1">&#39;role_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">prohibitedIf</span><span class="p">(</span><span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="p">),</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="p">]);</span>
</code></pre></div>
<p><a name="rule-prohibited-unless"></a></p>
<h4 id="prohibited_unlessanotherfieldvalue">prohibited_unless:<em>anotherfield</em>,<em>value</em>,...<a class="headerlink" href="#prohibited_unlessanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、_anotherfield_フィールドが任意の_value_と等しくない限り、存在しないか空である必要があります。フィールドが「空」であるとは、以下のいずれかの条件を満たすことを意味します：</p>
<div class="content-list">
<ul>
<li>値が<code>null</code>である。</li>
<li>値が空の文字列である。</li>
<li>値が空の配列または空の<code>Countable</code>オブジェクトである。</li>
<li>値が空のパスを持つアップロードファイルである。</li>
</ul>
</div>
<p><a name="rule-prohibits"></a></p>
<h4 id="prohibitsanotherfield">prohibits:<em>anotherfield</em>,...<a class="headerlink" href="#prohibitsanotherfield" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドが存在しないか空でない場合、_anotherfield_内のすべてのフィールドは存在しないか空である必要があります。フィールドが「空」であるとは、以下のいずれかの条件を満たすことを意味します：</p>
<div class="content-list">
<ul>
<li>値が<code>null</code>である。</li>
<li>値が空の文字列である。</li>
<li>値が空の配列または空の<code>Countable</code>オブジェクトである。</li>
<li>値が空のパスを持つアップロードファイルである。</li>
</ul>
</div>
<p><a name="rule-regex"></a></p>
<h4 id="regexpattern">regex:<em>pattern</em><a class="headerlink" href="#regexpattern" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、指定された正規表現に一致する必要があります。</p>
<p>内部的には、このルールはPHPの<code>preg_match</code>関数を使用します。指定されたパターンは、<code>preg_match</code>が要求するのと同じフォーマットに従う必要があり、有効な区切り文字も含める必要があります。例：<code>'email' =&gt; 'regex:/^.+@.+$/i'</code>。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>regex</code> / <code>not_regex</code>パターンを使用する場合、特に正規表現に<code>|</code>文字が含まれている場合、ルールを配列で指定する必要があるかもしれません。</p>
</div>
<p><a name="rule-required"></a></p>
<h4 id="required">required<a class="headerlink" href="#required" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、入力データに存在し、空でない必要があります。フィールドが「空」であるとは、以下のいずれかの条件を満たすことを意味します：</p>
<div class="content-list">
<ul>
<li>値が<code>null</code>である。</li>
<li>値が空の文字列である。</li>
<li>値が空の配列または空の<code>Countable</code>オブジェクトである。</li>
<li>値がパスを持たないアップロードファイルである。</li>
</ul>
</div>
<p><a name="rule-required-if"></a></p>
<h4 id="required_ifanotherfieldvalue">required_if:<em>anotherfield</em>,<em>value</em>,...<a class="headerlink" href="#required_ifanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、_anotherfield_フィールドが任意の_value_と等しい場合、存在し、空でない必要があります。</p>
<p><code>required_if</code>ルールのためにより複雑な条件を構築したい場合、<code>Rule::requiredIf</code>メソッドを使用できます。このメソッドは、ブール値またはクロージャを受け取ります。クロージャが渡された場合、クロージャはバリデーション対象のフィールドが必要かどうかを示すために<code>true</code>または<code>false</code>を返すべきです：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>    <span class="s1">&#39;role_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">requiredIf</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="p">),</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="p">]);</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>    <span class="s1">&#39;role_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">requiredIf</span><span class="p">(</span><span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">is_admin</span><span class="p">),</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="p">]);</span>
</code></pre></div>
<p><a name="rule-required-if-accepted"></a></p>
<h4 id="required_if_acceptedanotherfield">required_if_accepted:<em>anotherfield</em>,...<a class="headerlink" href="#required_if_acceptedanotherfield" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、_anotherfield_フィールドが<code>"yes"</code>、<code>"on"</code>、<code>1</code>、<code>"1"</code>、<code>true</code>、または<code>"true"</code>と等しい場合、存在し、空でない必要があります。</p>
<p><a name="rule-required-if-declined"></a></p>
<h4 id="required_if_declinedanotherfield">required_if_declined:<em>anotherfield</em>,...<a class="headerlink" href="#required_if_declinedanotherfield" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、_anotherfield_フィールドが<code>"no"</code>、<code>"off"</code>、<code>0</code>、<code>"0"</code>、<code>false</code>、または<code>"false"</code>と等しい場合、存在し、空でない必要があります。</p>
<p><a name="rule-required-unless"></a></p>
<h4 id="required_unlessanotherfieldvalue">required_unless:<em>anotherfield</em>,<em>value</em>,...<a class="headerlink" href="#required_unlessanotherfieldvalue" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、_anotherfield_フィールドが任意の_value_と等しくない限り、存在し、空でない必要があります。これはまた、_value_が<code>null</code>でない限り、_anotherfield_がリクエストデータに存在する必要があることを意味します。_value_が<code>null</code>の場合（<code>required_unless:name,null</code>）、バリデーション対象のフィールドは、比較フィールドが<code>null</code>であるか、比較フィールドがリクエストデータから欠落している限り、必要です。</p>
<p><a name="rule-required-with"></a></p>
<h4 id="required_withfoobar">required_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#required_withfoobar" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、他の指定されたフィールドのいずれかが存在し、空でない場合にのみ、存在し、空でない必要があります。</p>
<p><a name="rule-required-with-all"></a></p>
<h4 id="required_with_allfoobar">required_with_all:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#required_with_allfoobar" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、他の指定されたフィールドすべてが存在し、空でない場合にのみ、存在し、空でない必要があります。</p>
<p><a name="rule-required-without"></a></p>
<h4 id="required_withoutfoobar">required_without:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#required_withoutfoobar" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、他の指定されたフィールドのいずれかが空または存在しない場合にのみ、存在し、空でない必要があります。</p>
<p><a name="rule-required-without-all"></a></p>
<h4 id="required_without_allfoobar">required_without_all:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#required_without_allfoobar" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、他の指定されたフィールドすべてが空または存在しない場合にのみ、存在し、空でない必要があります。</p>
<p><a name="rule-required-array-keys"></a></p>
<h4 id="required_array_keysfoobar">required_array_keys:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#required_array_keysfoobar" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、配列であり、少なくとも指定されたキーを含む必要があります。</p>
<p><a name="rule-same"></a></p>
<h4 id="samefield">same:<em>field</em><a class="headerlink" href="#samefield" title="Permanent link">&para;</a></h4>
<p>指定された_field_は、バリデーション対象のフィールドと一致する必要があります。</p>
<p><a name="rule-size"></a></p>
<h4 id="sizevalue">size:<em>value</em><a class="headerlink" href="#sizevalue" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、指定された_value_と一致するサイズを持つ必要があります。文字列データの場合、_value_は文字数に対応します。数値データの場合、_value_は指定された整数値に対応します（属性は<code>numeric</code>または<code>integer</code>ルールも持つ必要があります）。配列の場合、_size_は配列の<code>count</code>に対応します。ファイルの場合、_size_はファイルサイズ（キロバイト単位）に対応します。いくつかの例を見てみましょう：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1">// 文字列が正確に12文字であることを検証する...</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;size:12&#39;</span><span class="p">;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="c1">// 提供された整数が10であることを検証する...</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="s1">&#39;seats&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer|size:10&#39;</span><span class="p">;</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="c1">// 配列が正確に5つの要素を持つことを検証する...</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="s1">&#39;tags&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;array|size:5&#39;</span><span class="p">;</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="c1">// アップロードされたファイルが正確に512キロバイトであることを検証する...</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="s1">&#39;image&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;file|size:512&#39;</span><span class="p">;</span>
</code></pre></div>
<p><a name="rule-starts-with"></a></p>
<h4 id="starts_withfoobar">starts_with:<em>foo</em>,<em>bar</em>,...<a class="headerlink" href="#starts_withfoobar" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、指定された値のいずれかで始まる必要があります。</p>
<p><a name="rule-string"></a></p>
<h4 id="string">string<a class="headerlink" href="#string" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、文字列である必要があります。フィールドが<code>null</code>であることも許可したい場合は、フィールドに<code>nullable</code>ルールを割り当てる必要があります。</p>
<p><a name="rule-timezone"></a></p>
<h4 id="timezone">timezone<a class="headerlink" href="#timezone" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、<code>DateTimeZone::listIdentifiers</code>メソッドに従った有効なタイムゾーン識別子である必要があります。</p>
<p><a href="https://www.php.net/manual/en/datetimezone.listidentifiers.php"><code>DateTimeZone::listIdentifiers</code>メソッド</a>によって受け入れられる引数も、このバリデーションルールに提供できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="s1">&#39;timezone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|timezone:all&#39;</span><span class="p">;</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="s1">&#39;timezone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|timezone:Africa&#39;</span><span class="p">;</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="s1">&#39;timezone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|timezone:per_country,US&#39;</span><span class="p">;</span>
</code></pre></div>
<p><a name="rule-unique"></a></p>
<h4 id="uniquetablecolumn">unique:<em>table</em>,<em>column</em><a class="headerlink" href="#uniquetablecolumn" title="Permanent link">&para;</a></h4>
<p>バリデーション対象のフィールドは、指定されたデータベーステーブル内に存在してはなりません。</p>
<p><strong>カスタムテーブル/カラム名の指定：</strong></p>
<p>テーブル名を直接指定する代わりに、テーブル名を決定するために使用されるEloquentモデルを指定できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;unique:App\Models\User,email_address&#39;</span>
</code></pre></div>
<p><code>column</code>オプションは、フィールドの対応するデータベースカラムを指定するために使用できます。<code>column</code>オプションが指定されていない場合、バリデーション対象のフィールドの名前が使用されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;unique:users,email_address&#39;</span>
</code></pre></div>
<p><strong>カスタムデータベース接続の指定</strong></p>
<p>Validatorによって行われるデータベースクエリのためにカスタム接続を設定する必要がある場合があります。これを行うには、テーブル名の前に接続名を付けます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;unique:connection.users,email_address&#39;</span>
</code></pre></div>
<p><strong>ユニークルールを特定のIDを無視するように強制する：</strong></p>
<p>ユニークバリデーション中に特定のIDを無視したい場合があります。例えば、ユーザーの名前、メールアドレス、場所を含む「プロフィール更新」画面を考えてみましょう。メールアドレスがユニークであることを検証したいと思うでしょう。しかし、ユーザーが名前フィールドのみを変更し、メールフィールドを変更しない場合、ユーザーがすでにそのメールアドレスの所有者であるため、バリデーションエラーを投げたくないでしょう。</p>
<p>バリデータにユーザーのIDを無視するように指示するには、<code>Rule</code>クラスを使用してルールを流暢に定義します。この例では、ルールを<code>|</code>文字で区切る代わりに、バリデーションルールを配列として指定します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>        <span class="nx">Rule</span><span class="o">::</span><span class="na">unique</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ignore</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">),</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>    <span class="p">],</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="p">]);</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>ユーザー制御のリクエスト入力を<code>ignore</code>メソッドに渡すべきではありません。代わりに、自動増分IDやEloquentモデルインスタンスからのUUIDなど、システム生成の一意のIDのみを渡すべきです。そうしないと、アプリケーションはSQLインジェクション攻撃に対して脆弱になります。</p>
</div>
<p><code>ignore</code>メソッドにモデルキーの値を渡す代わりに、モデルインスタンス全体を渡すこともできます。Laravelは自動的にモデルからキーを抽出します：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nx">Rule</span><span class="o">::</span><span class="na">unique</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ignore</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span>
</code></pre></div>
<p>テーブルが<code>id</code>以外の主キーカラム名を使用している場合、<code>ignore</code>メソッドを呼び出す際にカラム名を指定できます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nx">Rule</span><span class="o">::</span><span class="na">unique</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ignore</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">)</span>
</code></pre></div>
<p>デフォルトでは、<code>unique</code>ルールはバリデーション対象の属性名に一致するカラムのユニーク性をチェックします。ただし、<code>unique</code>メソッドの第二引数として異なるカラム名を渡すことができます：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nx">Rule</span><span class="o">::</span><span class="na">unique</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;email_address&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ignore</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">)</span>
</code></pre></div>
<p><strong>追加のWhere句の追加：</strong></p>
<p>以下のMarkdownコンテンツを日本語に翻訳します。すべてのMarkdownフォーマットを保持し、ヘッダーには'#'を使用します。</p>
<p>クエリ条件を追加指定するには、<code>where</code>メソッドを使用してクエリをカスタマイズします。例えば、<code>account_id</code>カラムの値が<code>1</code>であるレコードのみを検索対象とするクエリ条件を追加します。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">unique</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nx">Builder</span> <span class="nv">$query</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;account_id&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</code></pre></div>
<p><a name="rule-uppercase"></a></p>
<h4 id="uppercase">uppercase<a class="headerlink" href="#uppercase" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは大文字でなければなりません。</p>
<p><a name="rule-url"></a></p>
<h4 id="url">url<a class="headerlink" href="#url" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは有効なURLでなければなりません。</p>
<p>有効と見なされるURLプロトコルを指定したい場合は、検証ルールパラメータとしてプロトコルを渡すことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;url:http,https&#39;</span><span class="p">,</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="s1">&#39;game&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;url:minecraft,steam&#39;</span><span class="p">,</span>
</code></pre></div>
<p><a name="rule-ulid"></a></p>
<h4 id="ulid">ulid<a class="headerlink" href="#ulid" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは有効な<a href="https://github.com/ulid/spec">Universally Unique Lexicographically Sortable Identifier</a> (ULID)でなければなりません。</p>
<p><a name="rule-uuid"></a></p>
<h4 id="uuid">uuid<a class="headerlink" href="#uuid" title="Permanent link">&para;</a></h4>
<p>検証対象のフィールドは有効なRFC 4122（バージョン1、3、4、または5）のuniversally unique identifier (UUID)でなければなりません。</p>
<p><a name="conditionally-adding-rules"></a></p>
<h2 id="_44">条件付きでルールを追加する<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h2>
<p><a name="skipping-validation-when-fields-have-certain-values"></a></p>
<h4 id="_45">特定の値を持つフィールドの検証をスキップする<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<p>他のフィールドが特定の値を持つ場合に、特定のフィールドの検証を行わないようにしたいことがあります。これは<code>exclude_if</code>検証ルールを使用して実現できます。この例では、<code>has_appointment</code>フィールドが<code>false</code>の場合、<code>appointment_date</code>と<code>doctor_name</code>フィールドの検証は行われません。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>

<span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;has_appointment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|boolean&#39;</span><span class="p">,</span>
    <span class="s1">&#39;appointment_date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exclude_if:has_appointment,false|required|date&#39;</span><span class="p">,</span>
    <span class="s1">&#39;doctor_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exclude_if:has_appointment,false|required|string&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>または、<code>exclude_unless</code>ルールを使用して、他のフィールドが特定の値を持つ場合にのみ検証を行わないようにすることもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;has_appointment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|boolean&#39;</span><span class="p">,</span>
    <span class="s1">&#39;appointment_date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exclude_unless:has_appointment,true|required|date&#39;</span><span class="p">,</span>
    <span class="s1">&#39;doctor_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;exclude_unless:has_appointment,true|required|string&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="validating-when-present"></a></p>
<h4 id="_46">存在する場合に検証する<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<p>特定の状況では、検証対象のデータにフィールドが存在する場合にのみ検証を実行したいことがあります。これを簡単に実現するには、ルールリストに<code>sometimes</code>ルールを追加します。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sometimes|required|email&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>上記の例では、<code>email</code>フィールドは<code>$data</code>配列に存在する場合にのみ検証されます。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>常に存在する必要があるが空である可能性があるフィールドを検証しようとしている場合は、<a href="#a-note-on-optional-fields">オプションフィールドに関するこの注意</a>を確認してください。</p>
</div>
<p><a name="complex-conditional-validation"></a></p>
<h4 id="_47">複雑な条件付き検証<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h4>
<p>より複雑な条件ロジックに基づいて検証ルールを追加したい場合があります。例えば、他のフィールドの値が100より大きい場合にのみ特定のフィールドを要求したい場合や、他のフィールドが存在する場合にのみ2つのフィールドが特定の値を持つ必要がある場合などです。これらの検証ルールを追加するのは難しくありません。まず、変更されない_静的ルール_で<code>Validator</code>インスタンスを作成します。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>

<span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|email&#39;</span><span class="p">,</span>
    <span class="s1">&#39;games&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|numeric&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>ゲームコレクター向けのWebアプリケーションを想定します。ゲームコレクターが100以上のゲームを所有している場合、なぜそんなに多くのゲームを所有しているのかを説明するように要求したいとします。例えば、ゲームのリセールショップを運営しているか、単にゲームを収集するのが好きかもしれません。この要件を条件付きで追加するには、<code>Validator</code>インスタンスの<code>sometimes</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Fluent</span><span class="p">;</span>

<span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">sometimes</span><span class="p">(</span><span class="s1">&#39;reason&#39;</span><span class="p">,</span> <span class="s1">&#39;required|max:500&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Fluent</span> <span class="nv">$input</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$input</span><span class="o">-&gt;</span><span class="na">games</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p><code>sometimes</code>メソッドに渡される最初の引数は、条件付きで検証するフィールドの名前です。2番目の引数は追加したいルールのリストです。3番目の引数として渡されるクロージャが<code>true</code>を返す場合、ルールが追加されます。このメソッドを使用すると、複雑な条件付き検証を簡単に構築できます。複数のフィールドに対して条件付き検証を一度に追加することもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">sometimes</span><span class="p">([</span><span class="s1">&#39;reason&#39;</span><span class="p">,</span> <span class="s1">&#39;cost&#39;</span><span class="p">],</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Fluent</span> <span class="nv">$input</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$input</span><span class="o">-&gt;</span><span class="na">games</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>クロージャに渡される<code>$input</code>パラメータは<code>Illuminate\Support\Fluent</code>のインスタンスであり、検証対象の入力とファイルにアクセスするために使用できます。</p>
</div>
<p><a name="complex-conditional-array-validation"></a></p>
<h4 id="_48">複雑な条件付き配列検証<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<p>同じネストされた配列内の他のフィールドに基づいてフィールドを検証したい場合がありますが、そのインデックスが不明です。このような状況では、クロージャが検証中の配列の現在の個々のアイテムである2番目の引数を受け取ることができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$input</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;channels&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span>
            <span class="s1">&#39;address&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;abigail@example.com&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span>
            <span class="s1">&#39;address&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://example.com&#39;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">],</span>
<span class="p">];</span>

<span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">sometimes</span><span class="p">(</span><span class="s1">&#39;channels.*.address&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Fluent</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">Fluent</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">type</span> <span class="o">===</span> <span class="s1">&#39;email&#39;</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">sometimes</span><span class="p">(</span><span class="s1">&#39;channels.*.address&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Fluent</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">Fluent</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">type</span> <span class="o">!==</span> <span class="s1">&#39;email&#39;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p><code>$input</code>パラメータと同様に、<code>$item</code>パラメータは属性データが配列の場合は<code>Illuminate\Support\Fluent</code>のインスタンスです。それ以外の場合は文字列です。</p>
<p><a name="validating-arrays"></a></p>
<h2 id="_49">配列の検証<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h2>
<p><a href="#rule-array"><code>array</code>検証ルールのドキュメント</a>で説明されているように、<code>array</code>ルールは許可された配列キーのリストを受け取ります。配列内に追加のキーが存在する場合、検証は失敗します。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor Otwell&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;taylorotwell&#39;</span><span class="p">,</span>
        <span class="s1">&#39;admin&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">];</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;array:name,username&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>一般的に、配列内に存在することが許可される配列キーを常に指定する必要があります。そうしないと、バリデータの<code>validate</code>と<code>validated</code>メソッドは、検証されたすべてのデータを返します。これには、配列とそのすべてのキーが含まれます。たとえそれらのキーが他のネストされた配列検証ルールによって検証されなかったとしてもです。</p>
<p><a name="validating-nested-array-input"></a></p>
<h3 id="_50">ネストされた配列入力の検証<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h3>
<p>ネストされた配列ベースのフォーム入力フィールドの検証は、難しいものではありません。"ドット表記"を使用して、配列内の属性を検証できます。例えば、受信HTTPリクエストに<code>photos[profile]</code>フィールドが含まれている場合、次のように検証できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>

<span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;photos.profile&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|image&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>また、配列の各要素を検証することもできます。例えば、特定の配列入力フィールド内の各メールが一意であることを検証するには、次のようにします。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;person.*.email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email|unique:users&#39;</span><span class="p">,</span>
    <span class="s1">&#39;person.*.first_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required_with:person.*.last_name&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>同様に、<a href="#custom-messages-for-specific-attributes">言語ファイル内のカスタム検証メッセージ</a>を指定する際に<code>*</code>文字を使用することで、配列ベースのフィールドに対して単一の検証メッセージを簡単に使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;custom&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;person.*.email&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;各人物は一意のメールアドレスを持つ必要があります&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">],</span>
</code></pre></div>
<p><a name="accessing-nested-array-data"></a></p>
<h4 id="_51">ネストされた配列データへのアクセス<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<p>検証ルールを属性に割り当てる際に、特定のネストされた配列要素の値にアクセスする必要がある場合があります。これは<code>Rule::forEach</code>メソッドを使用して実現できます。<code>forEach</code>メソッドは、検証中の配列属性の各反復に対して呼び出されるクロージャを受け取り、属性の値と完全に展開された属性名を受け取ります。クロージャは配列要素に割り当てるルールの配列を返す必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">App\Rules\HasPermission</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>

<span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
    <span class="s1">&#39;companies.*.id&#39;</span> <span class="o">=&gt;</span> <span class="nx">Rule</span><span class="o">::</span><span class="na">forEach</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">string</span><span class="o">|</span><span class="k">null</span> <span class="nv">$value</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$attribute</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="nx">Rule</span><span class="o">::</span><span class="na">exists</span><span class="p">(</span><span class="nx">Company</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">HasPermission</span><span class="p">(</span><span class="s1">&#39;manage-company&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">),</span>
        <span class="p">];</span>
    <span class="p">}),</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="error-message-indexes-and-positions"></a></p>
<h3 id="_52">エラーメッセージのインデックスと位置<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h3>
<p>配列の検証時に、アプリケーションによって表示されるエラーメッセージ内で、特定の項目のインデックスまたは位置を参照したい場合があります。これを実現するには、<a href="#manual-customizing-the-error-messages">カスタム検証メッセージ</a>内に<code>：index</code>（<code>0</code>から始まる）と<code>：position</code>（<code>1</code>から始まる）のプレースホルダーを含めることができます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;photos&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;BeachVacation.jpg&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A photo of my beach vacation!&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;GrandCanyon.jpg&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">],</span>
<span class="p">];</span>

<span class="nx">Validator</span><span class="o">::</span><span class="na">validate</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;photos.*.description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="p">],</span> <span class="p">[</span>
    <span class="s1">&#39;photos.*.description.required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please describe photo #:position.&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>上記の例に基づくと、バリデーションは失敗し、ユーザーには_"写真 #2 を説明してください。"_というエラーが表示されます。</p>
<p>必要に応じて、<code>second-index</code>、<code>second-position</code>、<code>third-index</code>、<code>third-position</code>などを介して、より深くネストされたインデックスと位置を参照することができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="s1">&#39;photos.*.attributes.*.string&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;写真 #:second-position の属性が無効です。&#39;</span><span class="p">,</span>
</code></pre></div>
<p><a name="validating-files"></a></p>
<h2 id="_53">ファイルのバリデーション<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h2>
<p>Laravelは、<code>mimes</code>、<code>image</code>、<code>min</code>、<code>max</code>など、アップロードされたファイルを検証するために使用できるさまざまなバリデーションルールを提供しています。ファイルを検証する際にこれらのルールを個別に指定することもできますが、Laravelは便利なファイル検証ルールビルダーも提供しています。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rules\File</span><span class="p">;</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">validate</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>    <span class="s1">&#39;attachment&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>        <span class="nx">File</span><span class="o">::</span><span class="na">types</span><span class="p">([</span><span class="s1">&#39;mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;wav&#39;</span><span class="p">])</span>
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>            <span class="o">-&gt;</span><span class="na">min</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a>            <span class="o">-&gt;</span><span class="na">max</span><span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span>
<a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a>    <span class="p">],</span>
<a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a><span class="p">]);</span>
</code></pre></div>
<p>アプリケーションがユーザーによってアップロードされた画像を受け入れる場合、<code>File</code>ルールの<code>image</code>コンストラクタメソッドを使用して、アップロードされたファイルが画像であることを示すことができます。さらに、<code>dimensions</code>ルールを使用して画像の寸法を制限することもできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rule</span><span class="p">;</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rules\File</span><span class="p">;</span>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="nx">Validator</span><span class="o">::</span><span class="na">validate</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a>    <span class="s1">&#39;photo&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a>        <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a>        <span class="nx">File</span><span class="o">::</span><span class="na">image</span><span class="p">()</span>
<a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a>            <span class="o">-&gt;</span><span class="na">min</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a>            <span class="o">-&gt;</span><span class="na">max</span><span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>
<a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a>            <span class="o">-&gt;</span><span class="na">dimensions</span><span class="p">(</span><span class="nx">Rule</span><span class="o">::</span><span class="na">dimensions</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">maxWidth</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">maxHeight</span><span class="p">(</span><span class="mi">500</span><span class="p">)),</span>
<a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a>    <span class="p">],</span>
<a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a><span class="p">]);</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>画像の寸法を検証するための詳細情報は、<a href="#rule-dimensions">dimensionルールのドキュメント</a>で見つけることができます。</p>
</div>
<p><a name="validating-files-file-sizes"></a></p>
<h4 id="_54">ファイルサイズ<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<p>便宜上、最小および最大ファイルサイズは、ファイルサイズ単位を示す接尾辞を持つ文字列として指定できます。<code>kb</code>、<code>mb</code>、<code>gb</code>、<code>tb</code>の接尾辞がサポートされています。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nx">File</span><span class="o">::</span><span class="na">image</span><span class="p">()</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>    <span class="o">-&gt;</span><span class="na">min</span><span class="p">(</span><span class="s1">&#39;1kb&#39;</span><span class="p">)</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>    <span class="o">-&gt;</span><span class="na">max</span><span class="p">(</span><span class="s1">&#39;10mb&#39;</span><span class="p">)</span>
</code></pre></div>
<p><a name="validating-files-file-types"></a></p>
<h4 id="_55">ファイルタイプ<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h4>
<p><code>types</code>メソッドを呼び出す際には拡張子のみを指定する必要がありますが、このメソッドは実際にはファイルの内容を読み取り、そのMIMEタイプを推測することでファイルのMIMEタイプを検証します。MIMEタイプとそれに対応する拡張子の完全なリストは、以下の場所で見つけることができます。</p>
<p><a href="https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types">https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types</a></p>
<p><a name="validating-passwords"></a></p>
<h2 id="_56">パスワードのバリデーション<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h2>
<p>パスワードが十分なレベルの複雑さを持っていることを確認するために、Laravelの<code>Password</code>ルールオブジェクトを使用できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rules\Password</span><span class="p">;</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;confirmed&#39;</span><span class="p">,</span> <span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)],</span>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="p">]);</span>
</code></pre></div>
<p><code>Password</code>ルールオブジェクトを使用すると、アプリケーションのパスワードの複雑さ要件を簡単にカスタマイズできます。例えば、パスワードに少なくとも1つの文字、数字、記号、または大文字と小文字の混合が必要であることを指定できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="c1">// 少なくとも8文字が必要...</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="c1">// 少なくとも1つの文字が必要...</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">letters</span><span class="p">()</span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="c1">// 少なくとも1つの大文字と1つの小文字が必要...</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">mixedCase</span><span class="p">()</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="c1">// 少なくとも1つの数字が必要...</span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">numbers</span><span class="p">()</span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="c1">// 少なくとも1つの記号が必要...</span>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">symbols</span><span class="p">()</span>
</code></pre></div>
<p>さらに、<code>uncompromised</code>メソッドを使用して、パスワードが公開されたパスワードデータ侵害で漏洩していないことを確認できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">uncompromised</span><span class="p">()</span>
</code></pre></div>
<p>内部的には、<code>Password</code>ルールオブジェクトは<a href="https://en.wikipedia.org/wiki/K-anonymity">k-匿名性</a>モデルを使用して、ユーザーのプライバシーやセキュリティを犠牲にすることなく、<a href="https://haveibeenpwned.com">haveibeenpwned.com</a>サービスを介してパスワードが漏洩したかどうかを判断します。</p>
<p>デフォルトでは、パスワードがデータ侵害で少なくとも1回出現した場合、それは侵害されたと見なされます。このしきい値は、<code>uncompromised</code>メソッドの最初の引数を使用してカスタマイズできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1">// パスワードが同じデータ侵害で3回以上出現しないことを確認...</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">uncompromised</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</code></pre></div>
<p>もちろん、上記の例のすべてのメソッドを連鎖させることができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>    <span class="o">-&gt;</span><span class="na">letters</span><span class="p">()</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>    <span class="o">-&gt;</span><span class="na">mixedCase</span><span class="p">()</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>    <span class="o">-&gt;</span><span class="na">numbers</span><span class="p">()</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>    <span class="o">-&gt;</span><span class="na">symbols</span><span class="p">()</span>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>    <span class="o">-&gt;</span><span class="na">uncompromised</span><span class="p">()</span>
</code></pre></div>
<p><a name="defining-default-password-rules"></a></p>
<h4 id="_57">デフォルトのパスワードルールの定義<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h4>
<p>アプリケーションの単一の場所でパスワードのデフォルトのバリデーションルールを指定すると便利な場合があります。これは、<code>Password::defaults</code>メソッドを使用して簡単に実現できます。このメソッドはクロージャを受け取ります。クロージャは、Passwordルールのデフォルト設定を返す必要があります。通常、<code>defaults</code>ルールは、アプリケーションのサービスプロバイダの<code>boot</code>メソッド内で呼び出す必要があります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Rules\Password</span><span class="p">;</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="sd">/**</span>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="sd"> * Bootstrap any application services.</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="sd"> */</span>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="p">{</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a>    <span class="nx">Password</span><span class="o">::</span><span class="na">defaults</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a>        <span class="nv">$rule</span> <span class="o">=</span> <span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span><span class="o">-&gt;</span><span class="na">isProduction</span><span class="p">()</span>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a>                    <span class="o">?</span> <span class="nv">$rule</span><span class="o">-&gt;</span><span class="na">mixedCase</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">uncompromised</span><span class="p">()</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a>                    <span class="o">:</span> <span class="nv">$rule</span><span class="p">;</span>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a>    <span class="p">});</span>
<a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a><span class="p">}</span>
</code></pre></div>
<p>そして、特定のパスワードのバリデーションにデフォルトのルールを適用したい場合、引数なしで<code>defaults</code>メソッドを呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="nx">Password</span><span class="o">::</span><span class="na">defaults</span><span class="p">()],</span>
</code></pre></div>
<p>場合によっては、デフォルトのパスワードバリデーションルールに追加のバリデーションルールを添付したいことがあります。これは、<code>rules</code>メソッドを使用して実現できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="k">use</span> <span class="nx">App\Rules\ZxcvbnRule</span><span class="p">;</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="nx">Password</span><span class="o">::</span><span class="na">defaults</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>    <span class="nv">$rule</span> <span class="o">=</span> <span class="nx">Password</span><span class="o">::</span><span class="na">min</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">rules</span><span class="p">([</span><span class="k">new</span> <span class="nx">ZxcvbnRule</span><span class="p">]);</span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>    <span class="c1">// ...</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="p">});</span>
</code></pre></div>
<p><a name="custom-validation-rules"></a></p>
<h2 id="_58">カスタムバリデーションルール<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h2>
<p><a name="using-rule-objects"></a></p>
<h3 id="_59">ルールオブジェクトの使用<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h3>
<p>Laravelはさまざまな便利なバリデーションルールを提供していますが、独自のルールを指定したい場合があります。カスタムバリデーションルールを登録する方法の1つは、ルールオブジェクトを使用することです。新しいルールオブジェクトを生成するには、<code>make:rule</code> Artisanコマンドを使用できます。このコマンドを使用して、文字列が大文字であることを検証するルールを生成しましょう。Laravelは新しいルールを<code>app/Rules</code>ディレクトリに配置します。このディレクトリが存在しない場合、Laravelはルールを作成するArtisanコマンドを実行するときに作成します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>make:rule<span class="w"> </span>Uppercase
</code></pre></div>
<p>ルールが作成されたら、その動作を定義する準備が整いました。ルールオブジェクトには<code>validate</code>という単一のメソッドが含まれています。このメソッドは、属性名、その値、およびバリデーションエラーメッセージで失敗時に呼び出されるコールバックを受け取ります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="k">namespace</span> <span class="nx">App\Rules</span><span class="p">;</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Validation\ValidationRule</span><span class="p">;</span>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="k">class</span> <span class="nc">Uppercase</span> <span class="k">implements</span> <span class="nx">ValidationRule</span>
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a><span class="p">{</span>
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>    <span class="sd">/**</span>
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a><span class="sd">     * Run the validation rule.</span>
<a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a><span class="sd">     */</span>
<a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">validate</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$attribute</span><span class="p">,</span> <span class="nx">mixed</span> <span class="nv">$value</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$fail</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a>    <span class="p">{</span>
<a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">!==</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a>            <span class="nv">$fail</span><span class="p">(</span><span class="s1">&#39;The :attribute must be uppercase.&#39;</span><span class="p">);</span>
<a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a>        <span class="p">}</span>
<a id="__codelineno-63-18" name="__codelineno-63-18" href="#__codelineno-63-18"></a>    <span class="p">}</span>
<a id="__codelineno-63-19" name="__codelineno-63-19" href="#__codelineno-63-19"></a><span class="p">}</span>
</code></pre></div>
<p>ルールが定義されたら、他のバリデーションルールとともにルールオブジェクトのインスタンスを渡すことで、バリデータに添付できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="k">use</span> <span class="nx">App\Rules\Uppercase</span><span class="p">;</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Uppercase</span><span class="p">],</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="p">]);</span>
</code></pre></div>
<h4 id="_60">バリデーションメッセージの翻訳<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h4>
<p><code>$fail</code>クロージャにリテラルエラーメッセージを提供する代わりに、<a href="localization.html">翻訳文字列キー</a>を提供し、Laravelにエラーメッセージを翻訳させることができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="k">if</span> <span class="p">(</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">!==</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>    <span class="nv">$fail</span><span class="p">(</span><span class="s1">&#39;validation.uppercase&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">translate</span><span class="p">();</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="p">}</span>
</code></pre></div>
<p>必要に応じて、プレースホルダの置換と優先言語を<code>translate</code>メソッドの最初と2番目の引数として提供できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="nv">$fail</span><span class="p">(</span><span class="s1">&#39;validation.location&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">translate</span><span class="p">([</span>
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>    <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span><span class="p">,</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="p">],</span> <span class="s1">&#39;fr&#39;</span><span class="p">)</span>
</code></pre></div>
<h4 id="_61">追加データへのアクセス<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h4>
<p>カスタムバリデーションルールクラスが検証中のすべての他のデータにアクセスする必要がある場合、ルールクラスは<code>Illuminate\Contracts\Validation\DataAwareRule</code>インターフェースを実装できます。このインターフェースは、クラスに<code>setData</code>メソッドを定義することを要求します。このメソッドは、Laravelによって自動的に呼び出され（バリデーションが進行する前に）、検証中のすべてのデータが渡されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="k">namespace</span> <span class="nx">App\Rules</span><span class="p">;</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Validation\DataAwareRule</span><span class="p">;</span>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Validation\ValidationRule</span><span class="p">;</span>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="k">class</span> <span class="nc">Uppercase</span> <span class="k">implements</span> <span class="nx">DataAwareRule</span><span class="p">,</span> <span class="nx">ValidationRule</span>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="p">{</span>
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>    <span class="sd">/**</span>
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a><span class="sd">     * All of the data under validation.</span>
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="sd">     *</span>
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="sd">     * @var array&lt;string, mixed&gt;</span>
<a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a><span class="sd">     */</span>
<a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a>    <span class="k">protected</span> <span class="nv">$data</span> <span class="o">=</span> <span class="p">[];</span>
<a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a>
<a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a>    <span class="c1">// ...</span>
<a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a>
<a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a>    <span class="sd">/**</span>
<a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a><span class="sd">     * Set the data under validation.</span>
<a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a><span class="sd">     *</span>
<a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a><span class="sd">     * @param  array&lt;string, mixed&gt;  $data</span>
<a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a><span class="sd">     */</span>
<a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setData</span><span class="p">(</span><span class="k">array</span> <span class="nv">$data</span><span class="p">)</span><span class="o">:</span> <span class="k">static</span>
<a id="__codelineno-67-25" name="__codelineno-67-25" href="#__codelineno-67-25"></a>    <span class="p">{</span>
<a id="__codelineno-67-26" name="__codelineno-67-26" href="#__codelineno-67-26"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">;</span>
<a id="__codelineno-67-27" name="__codelineno-67-27" href="#__codelineno-67-27"></a>
<a id="__codelineno-67-28" name="__codelineno-67-28" href="#__codelineno-67-28"></a>        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
<a id="__codelineno-67-29" name="__codelineno-67-29" href="#__codelineno-67-29"></a>    <span class="p">}</span>
<a id="__codelineno-67-30" name="__codelineno-67-30" href="#__codelineno-67-30"></a><span class="p">}</span>
</code></pre></div>
<p>または、バリデーションルールがバリデーションを実行しているバリデータインスタンスにアクセスする必要がある場合、<code>ValidatorAwareRule</code>インターフェースを実装できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="k">namespace</span> <span class="nx">App\Rules</span><span class="p">;</span>
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Validation\ValidationRule</span><span class="p">;</span>
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Validation\ValidatorAwareRule</span><span class="p">;</span>
<a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="k">use</span> <span class="nx">Illuminate\Validation\Validator</span><span class="p">;</span>
<a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a>
<a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a><span class="k">class</span> <span class="nc">Uppercase</span> <span class="k">implements</span> <span class="nx">ValidationRule</span><span class="p">,</span> <span class="nx">ValidatorAwareRule</span>
<a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a><span class="p">{</span>
<a id="__codelineno-68-11" name="__codelineno-68-11" href="#__codelineno-68-11"></a>    <span class="sd">/**</span>
<a id="__codelineno-68-12" name="__codelineno-68-12" href="#__codelineno-68-12"></a><span class="sd">     * The validator instance.</span>
<a id="__codelineno-68-13" name="__codelineno-68-13" href="#__codelineno-68-13"></a><span class="sd">     *</span>
<a id="__codelineno-68-14" name="__codelineno-68-14" href="#__codelineno-68-14"></a><span class="sd">     * @var \Illuminate\Validation\Validator</span>
<a id="__codelineno-68-15" name="__codelineno-68-15" href="#__codelineno-68-15"></a><span class="sd">     */</span>
<a id="__codelineno-68-16" name="__codelineno-68-16" href="#__codelineno-68-16"></a>    <span class="k">protected</span> <span class="nv">$validator</span><span class="p">;</span>
<a id="__codelineno-68-17" name="__codelineno-68-17" href="#__codelineno-68-17"></a>
<a id="__codelineno-68-18" name="__codelineno-68-18" href="#__codelineno-68-18"></a>    <span class="c1">// ...</span>
<a id="__codelineno-68-19" name="__codelineno-68-19" href="#__codelineno-68-19"></a>
<a id="__codelineno-68-20" name="__codelineno-68-20" href="#__codelineno-68-20"></a>    <span class="sd">/**</span>
<a id="__codelineno-68-21" name="__codelineno-68-21" href="#__codelineno-68-21"></a><span class="sd">     * Set the current validator.</span>
<a id="__codelineno-68-22" name="__codelineno-68-22" href="#__codelineno-68-22"></a><span class="sd">     */</span>
<a id="__codelineno-68-23" name="__codelineno-68-23" href="#__codelineno-68-23"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setValidator</span><span class="p">(</span><span class="nx">Validator</span> <span class="nv">$validator</span><span class="p">)</span><span class="o">:</span> <span class="k">static</span>
<a id="__codelineno-68-24" name="__codelineno-68-24" href="#__codelineno-68-24"></a>    <span class="p">{</span>
<a id="__codelineno-68-25" name="__codelineno-68-25" href="#__codelineno-68-25"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span> <span class="o">=</span> <span class="nv">$validator</span><span class="p">;</span>
<a id="__codelineno-68-26" name="__codelineno-68-26" href="#__codelineno-68-26"></a>
<a id="__codelineno-68-27" name="__codelineno-68-27" href="#__codelineno-68-27"></a>        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
<a id="__codelineno-68-28" name="__codelineno-68-28" href="#__codelineno-68-28"></a>    <span class="p">}</span>
<a id="__codelineno-68-29" name="__codelineno-68-29" href="#__codelineno-68-29"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>        <span class="sd">/**</span>
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="sd">         * 現在のバリデーターを設定します。</span>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="sd">         */</span>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>        <span class="k">public</span> <span class="k">function</span> <span class="nf">setValidator</span><span class="p">(</span><span class="nx">Validator</span> <span class="nv">$validator</span><span class="p">)</span><span class="o">:</span> <span class="k">static</span>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>        <span class="p">{</span>
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span> <span class="o">=</span> <span class="nv">$validator</span><span class="p">;</span>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a>            <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>        <span class="p">}</span>
<a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a>    <span class="p">}</span>
</code></pre></div>
<p><a name="using-closures"></a></p>
<h3 id="_62">クロージャの使用<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h3>
<p>アプリケーション全体でカスタムルールの機能が一度しか必要ない場合は、ルールオブジェクトの代わりにクロージャを使用できます。クロージャは属性の名前、属性の値、およびバリデーションが失敗した場合に呼び出す必要がある<code>$fail</code>コールバックを受け取ります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>    <span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>    <span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>    <span class="nv">$validator</span> <span class="o">=</span> <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>            <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>            <span class="s1">&#39;max:255&#39;</span><span class="p">,</span>
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>            <span class="k">function</span> <span class="p">(</span><span class="nx">string</span> <span class="nv">$attribute</span><span class="p">,</span> <span class="nx">mixed</span> <span class="nv">$value</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$fail</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>                <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">===</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>                    <span class="nv">$fail</span><span class="p">(</span><span class="s2">&quot;The </span><span class="si">{</span><span class="nv">$attribute</span><span class="si">}</span><span class="s2"> is invalid.&quot;</span><span class="p">);</span>
<a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>                <span class="p">}</span>
<a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>            <span class="p">},</span>
<a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>        <span class="p">],</span>
<a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a>    <span class="p">]);</span>
</code></pre></div>
<p><a name="implicit-rules"></a></p>
<h3 id="_63">暗黙のルール<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h3>
<p>デフォルトでは、バリデーションされる属性が存在しないか、空の文字列を含む場合、通常のバリデーションルール（カスタムルールを含む）は実行されません。例えば、<a href="#rule-unique"><code>unique</code></a>ルールは空の文字列に対して実行されません。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>    <span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>    <span class="nv">$rules</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;unique:users,name&#39;</span><span class="p">];</span>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>    <span class="nv">$input</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">];</span>
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a>    <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$rules</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">passes</span><span class="p">();</span> <span class="c1">// true</span>
</code></pre></div>
<p>属性が空であってもカスタムルールが実行されるようにするには、そのルールは属性が必須であることを示唆する必要があります。新しい暗黙のルールオブジェクトを素早く生成するには、<code>make:rule</code> Artisanコマンドに<code>--implicit</code>オプションを付けて使用できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>make:rule<span class="w"> </span>Uppercase<span class="w"> </span>--implicit
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>「暗黙の」ルールは属性が必須であることを<strong>示唆する</strong>だけです。実際に欠落したり空の属性を無効とするかどうかは、あなた次第です。</p>
</div>









  




<h2>ユーザーノート</h2>
<div id="user-contribution-section">
    <a href="#" id="toggle-contribution" class="toggle-link" aria-expanded="false" aria-controls="contribution-content">+ ユーザーノートを表示する</a>
    <div id="contribution-content" style="display: none;">
        <div id="giscus-container">
            <!-- Giscus script here -->
            <script src="https://giscus.app/client.js"
                    data-repo="koriym/l11ja"
                    data-repo-id="R_kgDOM2Kucw"
                    data-category="Announcements"
                    data-category-id="DIC_kwDOM2Kuc84Civbh"
                    data-mapping="pathname"
                    data-strict="0"
                    data-reactions-enabled="0"
                    data-emit-metadata="0"
                    data-input-position="bottom"
                    data-theme="light"
                    data-lang="en"
                    crossorigin="anonymous"
                    async>
            </script>
            <div id="terms-of-service">
                <h4>ユーザーノートについて</h4>
                <p>PHPマニュアルのように、マニュアルを補足する情報の共有を目的としてます。</p>
                <ul>
                    <li>掲示板ではありません。議論、質問、別のノートへの返信はできません。</li>
                    <li>バグや改善要望、または翻訳の Issue は、該当する GitHub リポジトリで報告してください。</li>
                    <li>ノートは事前の通知なく削除される場合があります。</li>
                    <li>Giscussのコメントシステムを流用しています。そのためノートとしては最適化されてないことをご了承ください。</li>
                    <li>保証されていません。投稿したノートが消失する事やノート機能全体が閉鎖する可能性があります。</li>
                    <li>お願い：いいノートにはup voteを、この規約に違反しているノートを見つけた場合は、優しくdown voteしてください。</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script>
    (function() {
        const toggleLink = document.getElementById('toggle-contribution');
        const contributionContent = document.getElementById('contribution-content');

        toggleLink.addEventListener('click', function(e) {
            e.preventDefault();
            const isHidden = contributionContent.style.display === 'none';
            contributionContent.style.display = isHidden ? 'block' : 'none';
            toggleLink.textContent = isHidden ? '- ノートを非表示にする' : '+ ノートを表示する';
            toggleLink.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
        });
    })();
</script>

                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
<nav class="md-footer-nav">
    
    
</nav>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["back-to-top", "navigation.expand", "navigation.tabs", "navigation.footer", "navigation.sections", "navigation.expand", "content.code.copy", "hide_repository_button", "content.code.annotate", "content.tabs.link", "toc.none", "content.action.edit"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>