
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/koriym/laravel11-ja/notifications.html">
      
      
        <link rel="prev" href="mail.html">
      
      
        <link rel="next" href="packages.html">
      
      
      <link rel="icon" href="assets/images/favicon_io/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>通知 - L11JA</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.35f28582.min.css">
      
      


    
    

    

    
      <link rel="stylesheet" href="assets/css/php.css">
    
      <link rel="stylesheet" href="assets/css/mkdocs_material_extra.css">
    
      <link rel="stylesheet" href="assets/css/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-G60CEHXLQ1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-G60CEHXLQ1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-G60CEHXLQ1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!-- Determine classes -->



<!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
          class="md-header__inner md-grid"
          aria-label="Header"
  >

    <!-- Link to home -->
    <a
            href="."
            title="L11JA"
            class="md-header__button md-logo"
            aria-label="L11JA"
            data-md-component="logo"
    >
      
  <img src="assets/images/logo.png" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans'; font-size: 20px" >
            L11JA
            </span>
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans Batak'; font-size: 20px" >
            
              通知
            
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette toggle -->
    

    <!-- User preference: color palette -->
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
    <label class="md-header__button md-icon" for="__search">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
    </label>

    <!-- Search interface -->
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
    <div class="md-header__source">
      

<!--
  Check whether the repository is hosted on one of the supported code hosting
  platforms (GitHub, GitLab or Bitbucket) to show icon.
-->


  


<!-- Repository containing source -->
<a href="https://github.com/koriym/l11ja" title="source.link.title"
    class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" fill="#000"/></svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="releases.html" class="md-tabs__link">
          
  
  プロローグ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="installation.html" class="md-tabs__link">
          
  
  はじめに

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="lifecycle.html" class="md-tabs__link">
          
  
  アーキテクチャ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="routing.html" class="md-tabs__link">
          
  
  基本

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="artisan.html" class="md-tabs__link">
          
  
  掘り下げる

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="authentication.html" class="md-tabs__link">
          
  
  セキュリティ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="database.html" class="md-tabs__link">
          
  
  データベース

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="eloquent.html" class="md-tabs__link">
          
  
  Eloquent ORM

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="testing.html" class="md-tabs__link">
          
  
  テスト

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="starter-kits.html" class="md-tabs__link">
          
  
  パッケージ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="L11JA" class="md-nav__button md-logo" aria-label="L11JA" data-md-component="logo">
      
  <img src="assets/images/logo.png" alt="logo">

    </a>
    L11JA
  </label>
  
    <div class="md-nav__source">
      

<!--
  Check whether the repository is hosted on one of the supported code hosting
  platforms (GitHub, GitLab or Bitbucket) to show icon.
-->


  


<!-- Repository containing source -->
<a href="https://github.com/koriym/l11ja" title="source.link.title"
    class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" fill="#000"/></svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    プロローグ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            プロローグ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="releases.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リリースノート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="upgrade.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アップグレードガイド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contributions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    貢献ガイド
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            はじめに
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    インストール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="configuration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    設定
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="structure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ディレクトリ構造
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="frontend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    フロントエンド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="starter-kits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スターターキット
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deployment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    デプロイ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    アーキテクチャ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            アーキテクチャ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="lifecycle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リクエストライフサイクル
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="container.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    サービスコンテナ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="providers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    サービスプロバイダ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="facades.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファサード
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            基本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="routing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ルーティング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="middleware.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ミドルウェア
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="csrf.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSRF保護
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="controllers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コントローラ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="requests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リクエスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="responses.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    レスポンス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="views.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ビュー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="blade.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bladeテンプレート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vite.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アセットバンドル
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="urls.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    URL生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="session.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    セッション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="validation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    バリデーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="errors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    エラー処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="logging.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ログ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    掘り下げる
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            掘り下げる
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="artisan.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artisanコンソール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="broadcasting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブロードキャスティング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cache.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    キャッシュ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コレクション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concurrency.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    並行処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="context.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コンテキスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contracts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コントラクト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="events.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    イベント
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="filesystem.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファイルストレージ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="helpers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ヘルパー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http-client.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPクライアント
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="localization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ローカライゼーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mail.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    通知
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="notifications.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    通知
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      はじめに
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      通知の生成
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      通知の送信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知の送信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notifiable" class="md-nav__link">
    <span class="md-ellipsis">
      Notifiableトレイトの使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notification" class="md-nav__link">
    <span class="md-ellipsis">
      Notificationファサードの使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      配信チャネルの指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      通知のキューイング
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知のキューイング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      通知の遅延
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      通知キュー接続のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      通知チャネルのキューのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      キュー通知のミドルウェア
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      キュー通知とデータベーストランザクション
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      キュー通知を送信するかどうかの判断
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      オンデマンド通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      メール通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メール通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      メールメッセージのフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メールメッセージのフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      その他のメール通知のフォーマットオプション
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      送信者のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      受信者のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      件名のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      メーラーのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      テンプレートのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      添付ファイル
    </span>
  </a>
  
    <nav class="md-nav" aria-label="添付ファイル">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      生データの添付
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      タグとメタデータの追加
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symfony" class="md-nav__link">
    <span class="md-ellipsis">
      Symfonyメッセージのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      メール可能オブジェクトの使用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メール可能オブジェクトの使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mailables" class="md-nav__link">
    <span class="md-ellipsis">
      Mailablesとオンデマンド通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      メール通知のプレビュー
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#markdown" class="md-nav__link">
    <span class="md-ellipsis">
      Markdownメール通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Markdownメール通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      メッセージの生成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      メッセージの記述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メッセージの記述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      ボタンコンポーネント
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      パネルコンポーネント
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      テーブルコンポーネント
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      コンポーネントのカスタマイズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="コンポーネントのカスタマイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      CSSのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      データベース通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データベース通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      データベース通知のフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データベース通知のフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#todatabase-vs-toarray" class="md-nav__link">
    <span class="md-ellipsis">
      toDatabase vs. toArray
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      通知へのアクセス
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      通知を既読にする
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      ブロードキャスト通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ブロードキャスト通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      ブロードキャスト通知のフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ブロードキャスト通知のフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      ブロードキャストキューの設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      通知タイプのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      通知のリスニング
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知のリスニング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      通知チャンネルのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sms" class="md-nav__link">
    <span class="md-ellipsis">
      SMS通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMS通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms_1" class="md-nav__link">
    <span class="md-ellipsis">
      SMS通知のフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMS通知のフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unicode" class="md-nav__link">
    <span class="md-ellipsis">
      Unicodeコンテンツ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from" class="md-nav__link">
    <span class="md-ellipsis">
      "From"番号のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      クライアント参照の追加
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms_2" class="md-nav__link">
    <span class="md-ellipsis">
      SMS通知のルーティング
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slack" class="md-nav__link">
    <span class="md-ellipsis">
      Slack通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Slack通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="前提条件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      アプリの配布
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_1" class="md-nav__link">
    <span class="md-ellipsis">
      Slack通知のフォーマット
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_2" class="md-nav__link">
    <span class="md-ellipsis">
      Slackのインタラクティブ機能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Slackのインタラクティブ機能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      確認モーダル
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_3" class="md-nav__link">
    <span class="md-ellipsis">
      Slackブロックの検査
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_4" class="md-nav__link">
    <span class="md-ellipsis">
      Slack通知のルーティング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_5" class="md-nav__link">
    <span class="md-ellipsis">
      外部のSlackワークスペースへの通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      通知のローカライズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知のローカライズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      ユーザーの優先ロケール
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      テスト
    </span>
  </a>
  
    <nav class="md-nav" aria-label="テスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      オンデマンド通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      通知イベント
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知イベント">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      通知送信イベント
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      通知送信済みイベント
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      カスタムチャンネル
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="packages.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    パッケージ開発
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="processes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プロセス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queues.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    キュー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rate-limiting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    レート制限
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="strings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文字列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="scheduling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    タスクスケジューリング
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    セキュリティ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            セキュリティ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="authentication.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認証
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="authorization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認可
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="verification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メール確認
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="encryption.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    暗号化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="hashing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ハッシュ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="passwords.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    パスワードリセット
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    データベース
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            データベース
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クエリビルダ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pagination.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ページネーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migrations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    マイグレーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="seeding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    シーディング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="redis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Eloquent ORM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Eloquent ORM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-relationships.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リレーションシップ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コレクション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-mutators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ミューテータ / キャスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-resources.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APIリソース
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-serialization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    シリアライゼーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-factories.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファクトリ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    テスト
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            テスト
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="console-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コンソールテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dusk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブラウザテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database-testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    データベース
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mocking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    モック
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    パッケージ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            パッケージ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="starter-kits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スターターキット
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="billing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashier (Stripe)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cashier-paddle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashier (Paddle)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dusk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブラウザテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="envoy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Envoy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fortify.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fortify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="folio.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="homestead.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homestead
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="horizon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horizon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mix.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="octane.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Octane
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="passport.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passport
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pennant.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pennant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pint.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="precognition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Precognition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="prompts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prompts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pulse.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pulse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reverb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reverb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sail.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sail
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sanctum.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sanctum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="scout.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="socialite.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Socialite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="telescope.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telescope
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="valet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Valet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      はじめに
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      通知の生成
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      通知の送信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知の送信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notifiable" class="md-nav__link">
    <span class="md-ellipsis">
      Notifiableトレイトの使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notification" class="md-nav__link">
    <span class="md-ellipsis">
      Notificationファサードの使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      配信チャネルの指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      通知のキューイング
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知のキューイング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      通知の遅延
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      通知キュー接続のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      通知チャネルのキューのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      キュー通知のミドルウェア
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      キュー通知とデータベーストランザクション
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      キュー通知を送信するかどうかの判断
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      オンデマンド通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      メール通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メール通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      メールメッセージのフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メールメッセージのフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      エラーメッセージ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      その他のメール通知のフォーマットオプション
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      送信者のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      受信者のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      件名のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      メーラーのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      テンプレートのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      添付ファイル
    </span>
  </a>
  
    <nav class="md-nav" aria-label="添付ファイル">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      生データの添付
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      タグとメタデータの追加
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symfony" class="md-nav__link">
    <span class="md-ellipsis">
      Symfonyメッセージのカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      メール可能オブジェクトの使用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メール可能オブジェクトの使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mailables" class="md-nav__link">
    <span class="md-ellipsis">
      Mailablesとオンデマンド通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      メール通知のプレビュー
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#markdown" class="md-nav__link">
    <span class="md-ellipsis">
      Markdownメール通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Markdownメール通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      メッセージの生成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      メッセージの記述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メッセージの記述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      ボタンコンポーネント
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      パネルコンポーネント
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      テーブルコンポーネント
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      コンポーネントのカスタマイズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="コンポーネントのカスタマイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      CSSのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      データベース通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データベース通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      データベース通知のフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データベース通知のフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#todatabase-vs-toarray" class="md-nav__link">
    <span class="md-ellipsis">
      toDatabase vs. toArray
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      通知へのアクセス
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      通知を既読にする
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      ブロードキャスト通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ブロードキャスト通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      ブロードキャスト通知のフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ブロードキャスト通知のフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      ブロードキャストキューの設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      通知タイプのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      通知のリスニング
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知のリスニング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      通知チャンネルのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sms" class="md-nav__link">
    <span class="md-ellipsis">
      SMS通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMS通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms_1" class="md-nav__link">
    <span class="md-ellipsis">
      SMS通知のフォーマット
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMS通知のフォーマット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unicode" class="md-nav__link">
    <span class="md-ellipsis">
      Unicodeコンテンツ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from" class="md-nav__link">
    <span class="md-ellipsis">
      "From"番号のカスタマイズ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      クライアント参照の追加
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms_2" class="md-nav__link">
    <span class="md-ellipsis">
      SMS通知のルーティング
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slack" class="md-nav__link">
    <span class="md-ellipsis">
      Slack通知
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Slack通知">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      前提条件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="前提条件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      アプリの配布
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_1" class="md-nav__link">
    <span class="md-ellipsis">
      Slack通知のフォーマット
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_2" class="md-nav__link">
    <span class="md-ellipsis">
      Slackのインタラクティブ機能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Slackのインタラクティブ機能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      確認モーダル
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_3" class="md-nav__link">
    <span class="md-ellipsis">
      Slackブロックの検査
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_4" class="md-nav__link">
    <span class="md-ellipsis">
      Slack通知のルーティング
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slack_5" class="md-nav__link">
    <span class="md-ellipsis">
      外部のSlackワークスペースへの通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      通知のローカライズ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知のローカライズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      ユーザーの優先ロケール
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      テスト
    </span>
  </a>
  
    <nav class="md-nav" aria-label="テスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      オンデマンド通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      通知イベント
    </span>
  </a>
  
    <nav class="md-nav" aria-label="通知イベント">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      通知送信イベント
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      通知送信済みイベント
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      カスタムチャンネル
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/koriym/l11ja/edit/11.x-ja/notifications.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="_1">通知<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="#introduction">はじめに</a></li>
<li><a href="#generating-notifications">通知の生成</a></li>
<li><a href="#sending-notifications">通知の送信</a><ul>
<li><a href="#using-the-notifiable-trait">Notifiableトレイトの使用</a></li>
<li><a href="#using-the-notification-facade">Notificationファサードの使用</a></li>
<li><a href="#specifying-delivery-channels">配信チャネルの指定</a></li>
<li><a href="#queueing-notifications">通知のキューイング</a></li>
<li><a href="#on-demand-notifications">オンデマンド通知</a></li>
</ul>
</li>
<li><a href="#mail-notifications">メール通知</a><ul>
<li><a href="#formatting-mail-messages">メールメッセージのフォーマット</a></li>
<li><a href="#customizing-the-sender">送信者のカスタマイズ</a></li>
<li><a href="#customizing-the-recipient">受信者のカスタマイズ</a></li>
<li><a href="#customizing-the-subject">件名のカスタマイズ</a></li>
<li><a href="#customizing-the-mailer">メーラーのカスタマイズ</a></li>
<li><a href="#customizing-the-templates">テンプレートのカスタマイズ</a></li>
<li><a href="#mail-attachments">添付ファイル</a></li>
<li><a href="#adding-tags-metadata">タグとメタデータの追加</a></li>
<li><a href="#customizing-the-symfony-message">Symfonyメッセージのカスタマイズ</a></li>
<li><a href="#using-mailables">Mailableの使用</a></li>
<li><a href="#previewing-mail-notifications">メール通知のプレビュー</a></li>
</ul>
</li>
<li><a href="#markdown-mail-notifications">Markdownメール通知</a><ul>
<li><a href="#generating-the-message">メッセージの生成</a></li>
<li><a href="#writing-the-message">メッセージの記述</a></li>
<li><a href="#customizing-the-components">コンポーネントのカスタマイズ</a></li>
</ul>
</li>
<li><a href="#database-notifications">データベース通知</a><ul>
<li><a href="#database-prerequisites">前提条件</a></li>
<li><a href="#formatting-database-notifications">データベース通知のフォーマット</a></li>
<li><a href="#accessing-the-notifications">通知のアクセス</a></li>
<li><a href="#marking-notifications-as-read">通知を既読としてマーク</a></li>
</ul>
</li>
<li><a href="#broadcast-notifications">ブロードキャスト通知</a><ul>
<li><a href="#broadcast-prerequisites">前提条件</a></li>
<li><a href="#formatting-broadcast-notifications">ブロードキャスト通知のフォーマット</a></li>
<li><a href="#listening-for-notifications">通知のリスニング</a></li>
</ul>
</li>
<li><a href="#sms-notifications">SMS通知</a><ul>
<li><a href="#sms-prerequisites">前提条件</a></li>
<li><a href="#formatting-sms-notifications">SMS通知のフォーマット</a></li>
<li><a href="#unicode-content">Unicodeコンテンツ</a></li>
<li><a href="#customizing-the-from-number">「From」番号のカスタマイズ</a></li>
<li><a href="#adding-a-client-reference">クライアント参照の追加</a></li>
<li><a href="#routing-sms-notifications">SMS通知のルーティング</a></li>
</ul>
</li>
<li><a href="#slack-notifications">Slack通知</a><ul>
<li><a href="#slack-prerequisites">前提条件</a></li>
<li><a href="#formatting-slack-notifications">Slack通知のフォーマット</a></li>
<li><a href="#slack-interactivity">Slackのインタラクティブ性</a></li>
<li><a href="#routing-slack-notifications">Slack通知のルーティング</a></li>
<li><a href="#notifying-external-slack-workspaces">外部Slackワークスペースへの通知</a></li>
</ul>
</li>
<li><a href="#localizing-notifications">通知のローカライズ</a></li>
<li><a href="#testing">テスト</a></li>
<li><a href="#notification-events">通知イベント</a></li>
<li><a href="#custom-channels">カスタムチャネル</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2 id="_2">はじめに<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>Laravelは、<a href="mail.html">メール送信</a>に加えて、メール、SMS（<a href="https://www.vonage.com/communications-apis/">Vonage</a>経由、以前はNexmoとして知られていました）、<a href="https://slack.com">Slack</a>など、さまざまな配信チャネルで通知を送信するためのサポートを提供しています。さらに、<a href="https://laravel-notification-channels.com/about/#suggesting-a-new-channel">コミュニティが構築した通知チャネル</a>を使用して、何十もの異なるチャネルで通知を送信することができます。通知は、Webインターフェースに表示されるようにデータベースに保存することもできます。</p>
<p>通常、通知はアプリケーションで発生した何かをユーザーに通知する短い情報メッセージです。たとえば、請求アプリケーションを作成している場合、ユーザーに「請求書支払い済み」通知をメールとSMSチャネルで送信することができます。</p>
<p><a name="generating-notifications"></a></p>
<h2 id="_3">通知の生成<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>Laravelでは、各通知は通常<code>app/Notifications</code>ディレクトリに格納される単一のクラスで表されます。アプリケーションにこのディレクトリが表示されなくても心配しないでください。<code>make:notification</code> Artisanコマンドを実行すると、作成されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>make:notification<span class="w"> </span>InvoicePaid
</code></pre></div>
<p>このコマンドは、<code>app/Notifications</code>ディレクトリに新しい通知クラスを配置します。各通知クラスには<code>via</code>メソッドと、<code>toMail</code>や<code>toDatabase</code>などのメッセージ構築メソッドが含まれており、通知を特定のチャネルに合わせたメッセージに変換します。</p>
<p><a name="sending-notifications"></a></p>
<h2 id="_4">通知の送信<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p><a name="using-the-notifiable-trait"></a></p>
<h3 id="notifiable">Notifiableトレイトの使用<a class="headerlink" href="#notifiable" title="Permanent link">&para;</a></h3>
<p>通知は、<code>Notifiable</code>トレイトの<code>notify</code>メソッドを使用するか、<code>Notification</code><a href="facades.html">ファサード</a>を使用する2つの方法で送信できます。<code>Notifiable</code>トレイトは、アプリケーションの<code>App\Models\User</code>モデルにデフォルトで含まれています。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Notifiable</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>このトレイトが提供する<code>notify</code>メソッドは、通知インスタンスを受け取ることを期待しています。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">App\Notifications\InvoicePaid</span><span class="p">;</span>

<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>覚えておいてください。<code>Notifiable</code>トレイトは、<code>User</code>モデルにのみ含める必要はありません。どのモデルにも含めることができます。</p>
</div>
<p><a name="using-the-notification-facade"></a></p>
<h3 id="notification">Notificationファサードの使用<a class="headerlink" href="#notification" title="Permanent link">&para;</a></h3>
<p>また、<code>Notification</code><a href="facades.html">ファサード</a>を介して通知を送信することもできます。このアプローチは、ユーザーのコレクションなど、複数の通知可能なエンティティに通知を送信する必要がある場合に便利です。ファサードを使用して通知を送信するには、すべての通知可能なエンティティと通知インスタンスを<code>send</code>メソッドに渡します。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Notification</span><span class="p">;</span>

<span class="nx">Notification</span><span class="o">::</span><span class="na">send</span><span class="p">(</span><span class="nv">$users</span><span class="p">,</span> <span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<p><code>sendNow</code>メソッドを使用して通知を即座に送信することもできます。このメソッドは、通知が<code>ShouldQueue</code>インターフェースを実装していても、即座に通知を送信します。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Notification</span><span class="o">::</span><span class="na">sendNow</span><span class="p">(</span><span class="nv">$developers</span><span class="p">,</span> <span class="k">new</span> <span class="nx">DeploymentCompleted</span><span class="p">(</span><span class="nv">$deployment</span><span class="p">));</span>
</code></pre></div>
<p><a name="specifying-delivery-channels"></a></p>
<h3 id="_5">配信チャネルの指定<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>すべての通知クラスには、通知が配信されるチャネルを決定する<code>via</code>メソッドがあります。通知は、<code>mail</code>、<code>database</code>、<code>broadcast</code>、<code>vonage</code>、<code>slack</code>チャネルで送信できます。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TelegramやPusherなどの他の配信チャネルを使用したい場合は、コミュニティ主導の<a href="http://laravel-notification-channels.com">Laravel Notification Channelsウェブサイト</a>をチェックしてください。</p>
</div>
<p><code>via</code>メソッドは、通知が送信されるクラスのインスタンスである<code>$notifiable</code>インスタンスを受け取ります。<code>$notifiable</code>を使用して、通知を配信するチャネルを決定できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知の配信チャネルを取得します。</span>
<span class="sd"> *</span>
<span class="sd"> * @return array&lt;int, string&gt;</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">via</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">prefers_sms</span> <span class="o">?</span> <span class="p">[</span><span class="s1">&#39;vonage&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mail&#39;</span><span class="p">,</span> <span class="s1">&#39;database&#39;</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="queueing-notifications"></a></p>
<h3 id="_6">通知のキューイング<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>通知をキューに入れる前に、キューを設定し、<a href="queues.html#running-the-queue-worker">ワーカーを起動</a>する必要があります。</p>
</div>
<p>通知の送信には時間がかかる場合があります。特に、チャネルが通知を配信するために外部API呼び出しを行う必要がある場合です。アプリケーションの応答時間を高速化するために、<code>ShouldQueue</code>インターフェースと<code>Queueable</code>トレイトをクラスに追加して、通知をキューに入れることができます。<code>make:notification</code>コマンドを使用して生成されたすべての通知に対して、インターフェースとトレイトはすでにインポートされているため、すぐに通知クラスに追加できます。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Notifications</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Bus\Queueable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Contracts\Queue\ShouldQueue</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">InvoicePaid</span> <span class="k">extends</span> <span class="nx">Notification</span> <span class="k">implements</span> <span class="nx">ShouldQueue</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Queueable</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p><code>ShouldQueue</code>インターフェースが通知クラスに追加されると、通常どおり通知を送信できます。Laravelはクラスの<code>ShouldQueue</code>インターフェースを検出し、通知の配信を自動的にキューに入れます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<p>通知をキューに入れると、受信者とチャネルの組み合わせごとにキューに入れられたジョブが作成されます。たとえば、通知に3人の受信者と2つのチャネルがある場合、6つのジョブがキューにディスパッチされます。</p>
<p><a name="delaying-notifications"></a></p>
<h4 id="_7">通知の遅延<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>通知の配信を遅延させたい場合は、通知インスタンスに<code>delay</code>メソッドをチェーンできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$delay</span> <span class="o">=</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">((</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">delay</span><span class="p">(</span><span class="nv">$delay</span><span class="p">));</span>
</code></pre></div>
<p>特定のチャネルの遅延量を指定するために、配列を<code>delay</code>メソッドに渡すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">((</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">delay</span><span class="p">([</span>
    <span class="s1">&#39;mail&#39;</span> <span class="o">=&gt;</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="s1">&#39;sms&#39;</span> <span class="o">=&gt;</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="p">]));</span>
</code></pre></div>
<p>または、通知クラス自体に<code>withDelay</code>メソッドを定義することもできます。<code>withDelay</code>メソッドは、チャネル名と遅延値の配列を返す必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知の配信遅延を決定します。</span>
<span class="sd"> *</span>
<span class="sd"> * @return array&lt;string, \Illuminate\Support\Carbon&gt;</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">withDelay</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">&#39;mail&#39;</span> <span class="o">=&gt;</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
        <span class="s1">&#39;sms&#39;</span> <span class="o">=&gt;</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-notification-queue-connection"></a></p>
<h4 id="_8">通知キュー接続のカスタマイズ<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>デフォルトでは、キューに入れられた通知は、アプリケーションのデフォルトのキュー接続を使用してキューに入れられます。特定の通知に対して異なる接続を使用する場合は、通知のコンストラクタから <code>onConnection</code> メソッドを呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">namespace</span> <span class="nx">App\Notifications</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">use</span> <span class="nx">Illuminate\Bus\Queueable</span><span class="p">;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Queue\ShouldQueue</span><span class="p">;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="k">class</span> <span class="nc">InvoicePaid</span> <span class="k">extends</span> <span class="nx">Notification</span> <span class="k">implements</span> <span class="nx">ShouldQueue</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="p">{</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="k">use</span> <span class="nx">Queueable</span><span class="p">;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="sd">/**</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="sd">     * 新しい通知インスタンスを作成します。</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="sd">     */</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="p">{</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onConnection</span><span class="p">(</span><span class="s1">&#39;redis&#39;</span><span class="p">);</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    <span class="p">}</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="p">}</span>
</code></pre></div>
<p>また、通知がサポートする各通知チャネルに対して使用される特定のキュー接続を指定したい場合は、通知に <code>viaConnections</code> メソッドを定義できます。このメソッドは、チャネル名とキュー接続名のペアの配列を返す必要があります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="sd">/**</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="sd"> * 各通知チャネルに使用する接続を決定します。</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="sd"> *</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="sd"> * @return array&lt;string, string&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="sd"> */</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">viaConnections</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">{</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>        <span class="s1">&#39;mail&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;redis&#39;</span><span class="p">,</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>        <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sync&#39;</span><span class="p">,</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="p">];</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="p">}</span>
</code></pre></div>
<p><a name="customizing-notification-channel-queues"></a></p>
<h4 id="_9">通知チャネルのキューのカスタマイズ<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>通知がサポートする各通知チャネルに対して使用される特定のキューを指定したい場合は、通知に <code>viaQueues</code> メソッドを定義できます。このメソッドは、チャネル名とキュー名のペアの配列を返す必要があります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="sd">/**</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="sd"> * 各通知チャネルに使用するキューを決定します。</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="sd"> *</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="sd"> * @return array&lt;string, string&gt;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="sd"> */</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">viaQueues</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="p">{</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>        <span class="s1">&#39;mail&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mail-queue&#39;</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>        <span class="s1">&#39;slack&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slack-queue&#39;</span><span class="p">,</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    <span class="p">];</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="p">}</span>
</code></pre></div>
<p><a name="queued-notification-middleware"></a></p>
<h4 id="_10">キュー通知のミドルウェア<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>キュー通知は、<a href="queues.html#job-middleware">キュージョブ</a>のようにミドルウェアを定義できます。開始するには、通知クラスに <code>middleware</code> メソッドを定義します。<code>middleware</code> メソッドは <code>$notifiable</code> と <code>$channel</code> 変数を受け取り、通知の送信先に基づいて返されるミドルウェアをカスタマイズできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">use</span> <span class="nx">Illuminate\Queue\Middleware\RateLimited</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="sd">/**</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="sd"> * 通知ジョブが通過する必要があるミドルウェアを取得します。</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="sd"> *</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="sd"> * @return array&lt;int, object&gt;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="sd"> */</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">middleware</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$channel</span><span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">{</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    <span class="k">return</span> <span class="k">match</span> <span class="p">(</span><span class="nv">$channel</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="k">new</span> <span class="nx">RateLimited</span><span class="p">(</span><span class="s1">&#39;postmark&#39;</span><span class="p">)],</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>        <span class="s1">&#39;slack&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="k">new</span> <span class="nx">RateLimited</span><span class="p">(</span><span class="s1">&#39;slack&#39;</span><span class="p">)],</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>        <span class="k">default</span> <span class="o">=&gt;</span> <span class="p">[],</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="p">};</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="p">}</span>
</code></pre></div>
<p><a name="queued-notifications-and-database-transactions"></a></p>
<h4 id="_11">キュー通知とデータベーストランザクション<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>キュー通知がデータベーストランザクション内でディスパッチされると、データベーストランザクションがコミットされる前にキューによって処理される可能性があります。この場合、データベーストランザクション中にモデルやデータベースレコードに加えた更新がまだデータベースに反映されていない可能性があります。さらに、トランザクション内で作成されたモデルやデータベースレコードがデータベースに存在しない可能性があります。通知がこれらのモデルに依存している場合、キュー通知を送信するジョブが処理されるときに予期しないエラーが発生する可能性があります。</p>
<p>キュー接続の <code>after_commit</code> 設定オプションが <code>false</code> に設定されている場合でも、特定のキュー通知がすべての開いているデータベーストランザクションがコミットされた後にディスパッチされるようにするには、通知を送信するときに <code>afterCommit</code> メソッドを呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">use</span> <span class="nx">App\Notifications\InvoicePaid</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">((</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">afterCommit</span><span class="p">());</span>
</code></pre></div>
<p>または、通知のコンストラクタから <code>afterCommit</code> メソッドを呼び出すこともできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">namespace</span> <span class="nx">App\Notifications</span><span class="p">;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">use</span> <span class="nx">Illuminate\Bus\Queueable</span><span class="p">;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Queue\ShouldQueue</span><span class="p">;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="k">class</span> <span class="nc">InvoicePaid</span> <span class="k">extends</span> <span class="nx">Notification</span> <span class="k">implements</span> <span class="nx">ShouldQueue</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="p">{</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    <span class="k">use</span> <span class="nx">Queueable</span><span class="p">;</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="sd">/**</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="sd">     * 新しい通知インスタンスを作成します。</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="sd">     */</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>    <span class="p">{</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">afterCommit</span><span class="p">();</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>    <span class="p">}</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>これらの問題に対処する方法の詳細については、<a href="queues.html#jobs-and-database-transactions">キュージョブとデータベーストランザクション</a>に関するドキュメントを確認してください。</p>
</div>
<p><a name="determining-if-the-queued-notification-should-be-sent"></a></p>
<h4 id="_12">キュー通知を送信するかどうかの判断<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>キュー通知がキューにディスパッチされ、バックグラウンド処理のためにキューに入れられた後、通常はキューワーカーによって受け入れられ、意図した受信者に送信されます。</p>
<p>ただし、キューワーカーによって処理された後にキュー通知を送信するかどうかを最終的に判断したい場合は、通知クラスに <code>shouldSend</code> メソッドを定義できます。このメソッドが <code>false</code> を返す場合、通知は送信されません。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="sd">/**</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="sd"> * 通知を送信する必要があるかどうかを判断します。</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="sd"> */</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">shouldSend</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$channel</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="p">{</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">isPaid</span><span class="p">();</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">}</span>
</code></pre></div>
<p><a name="on-demand-notifications"></a></p>
<h3 id="_13">オンデマンド通知<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>アプリケーションの「ユーザー」として保存されていない人に通知を送信する必要がある場合があります。<code>Notification</code> ファサードの <code>route</code> メソッドを使用して、通知を送信する前にアドホックな通知ルーティング情報を指定できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">use</span> <span class="nx">Illuminate\Broadcasting\Channel</span><span class="p">;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Notification</span><span class="p">;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nx">Notification</span><span class="o">::</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;mail&#39;</span><span class="p">,</span> <span class="s1">&#39;taylor@example.com&#39;</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>            <span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;vonage&#39;</span><span class="p">,</span> <span class="s1">&#39;5555555555&#39;</span><span class="p">)</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>            <span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;slack&#39;</span><span class="p">,</span> <span class="s1">&#39;#slack-channel&#39;</span><span class="p">)</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>            <span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;broadcast&#39;</span><span class="p">,</span> <span class="p">[</span><span class="k">new</span> <span class="nx">Channel</span><span class="p">(</span><span class="s1">&#39;channel-name&#39;</span><span class="p">)])</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>            <span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<p><code>mail</code> ルートにオンデマンド通知を送信する際に受信者の名前を指定したい場合は、メールアドレスをキーとし、名前を配列の最初の要素の値として含む配列を提供できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nx">Notification</span><span class="o">::</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;mail&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="s1">&#39;barrett@example.com&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Barrett Blair&#39;</span><span class="p">,</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<p><code>routes</code> メソッドを使用して、複数の通知チャネルに対して一度にアドホックなルーティング情報を提供できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nx">Notification</span><span class="o">::</span><span class="na">routes</span><span class="p">([</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="s1">&#39;mail&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;barrett@example.com&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Barrett Blair&#39;</span><span class="p">],</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="s1">&#39;vonage&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;5555555555&#39;</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<p><a name="mail-notifications"></a></p>
<h2 id="_14">メール通知<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<p><a name="formatting-mail-messages"></a></p>
<h3 id="_15">メールメッセージのフォーマット<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>通知がメールとして送信されることをサポートしている場合、通知クラスに <code>toMail</code> メソッドを定義する必要があります。このメソッドは <code>$notifiable</code> エンティティを受け取り、<code>Illuminate\Notifications\Messages\MailMessage</code> インスタンスを返す必要があります。</p>
<p><code>MailMessage</code> クラスには、トランザクションメールメッセージを構築するのに役立ついくつかのシンプルなメソッドが含まれています。メールメッセージには、テキスト行と「アクションの呼び出し」を含めることができます。<code>toMail</code> メソッドの例を見てみましょう。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="sd">/**</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="sd"> * 通知のメール表現を取得します。</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="sd"> */</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">{</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span class="nv">$url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">(</span><span class="s1">&#39;/invoice/&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>                <span class="o">-&gt;</span><span class="na">greeting</span><span class="p">(</span><span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>                <span class="o">-&gt;</span><span class="na">line</span><span class="p">(</span><span class="s1">&#39;One of your invoices has been paid!&#39;</span><span class="p">)</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>                <span class="o">-&gt;</span><span class="na">lineIf</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">amount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Amount paid: </span><span class="si">{</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">amount</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>                <span class="o">-&gt;</span><span class="na">action</span><span class="p">(</span><span class="s1">&#39;View Invoice&#39;</span><span class="p">,</span> <span class="nv">$url</span><span class="p">)</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>                <span class="o">-&gt;</span><span class="na">line</span><span class="p">(</span><span class="s1">&#39;Thank you for using our application!&#39;</span><span class="p">);</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>toMail</code> メソッドで <code>$this-&gt;invoice-&gt;id</code> を使用していることに注意してください。通知がメッセージを生成するために必要なデータは、通知のコンストラクタに渡すことができます。</p>
</div>
<p>この例では、挨拶文、テキスト行、アクションの呼び出し、そして別のテキスト行を登録しています。<code>MailMessage</code> オブジェクトによって提供されるこれらのメソッドにより、小さなトランザクションメールを簡単かつ迅速にフォーマットできます。メールチャネルは、メッセージコンポーネントを美しいレスポンシブHTMLメールテンプレートに変換し、プレーンテキストの対応物を提供します。これは、<code>mail</code> チャネルによって生成されたメールの例です。</p>
<p><img src="https://laravel.com/img/docs/notification-example-2.png"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>メール通知を送信する際には、<code>config/app.php</code> 設定ファイルの <code>name</code> 設定オプションを設定してください。この値は、メール通知メッセージのヘッダーとフッターで使用されます。</p>
</div>
<p><a name="error-messages"></a></p>
<h4 id="_16">エラーメッセージ<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>一部の通知は、例えば請求書の支払いが失敗したなどのエラーをユーザーに通知します。メールメッセージがエラーに関するものであることを示すために、メッセージを構築する際に <code>error</code> メソッドを呼び出すことができます。メールメッセージで <code>error</code> メソッドを使用すると、アクションの呼び出しボタンが黒ではなく赤になります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="sd">/**</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="sd"> * 通知のメール表現を取得します。</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="sd"> */</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="p">{</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>                <span class="o">-&gt;</span><span class="na">error</span><span class="p">()</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>                <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">&#39;Invoice Payment Failed&#39;</span><span class="p">)</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>                <span class="o">-&gt;</span><span class="na">line</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="p">}</span>
</code></pre></div>
<p><a name="other-mail-notification-formatting-options"></a></p>
<h4 id="_17">その他のメール通知のフォーマットオプション<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p>通知クラスにテキストの「行」を定義する代わりに、通知メールのレンダリングに使用するカスタムテンプレートを指定するために <code>view</code> メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="sd">/**</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="sd"> * 通知のメール表現を取得します。</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="sd"> */</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">{</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>        <span class="s1">&#39;mail.invoice.paid&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;invoice&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">]</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="p">);</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="p">}</span>
</code></pre></div>
<p>メールメッセージにプレーンテキストビューを指定するには、<code>view</code>メソッドに渡される配列の2番目の要素としてビュー名を指定します。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span>
        <span class="p">[</span><span class="s1">&#39;mail.invoice.paid&#39;</span><span class="p">,</span> <span class="s1">&#39;mail.invoice.paid-text&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;invoice&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">]</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>また、メッセージがプレーンテキストビューのみを持つ場合は、<code>text</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span>
        <span class="s1">&#39;mail.invoice.paid-text&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;invoice&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">]</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-sender"></a></p>
<h3 id="_18">送信者のカスタマイズ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>デフォルトでは、メールの送信者/送信元アドレスは<code>config/mail.php</code>設定ファイルで定義されています。ただし、<code>from</code>メソッドを使用して特定の通知の送信元アドレスを指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;barrett@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;Barrett Blair&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">line</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-recipient"></a></p>
<h3 id="_19">受信者のカスタマイズ<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p><code>mail</code>チャネル経由で通知を送信する場合、通知システムは自動的に通知可能なエンティティの<code>email</code>プロパティを探します。通知の配信に使用されるメールアドレスをカスタマイズするには、通知可能なエンティティに<code>routeNotificationForMail</code>メソッドを定義します。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Notifiable</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * メールチャネルの通知ルート</span>
<span class="sd">     *</span>
<span class="sd">     * @return  array&lt;string, string&gt;|string</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">routeNotificationForMail</span><span class="p">(</span><span class="nx">Notification</span> <span class="nv">$notification</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span><span class="o">|</span><span class="nx">string</span>
    <span class="p">{</span>
        <span class="c1">// メールアドレスのみを返す...</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">email_address</span><span class="p">;</span>

        <span class="c1">// メールアドレスと名前を返す...</span>
        <span class="k">return</span> <span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">email_address</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-subject"></a></p>
<h3 id="_20">件名のカスタマイズ<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>デフォルトでは、メールの件名は通知クラスの名前が「タイトルケース」にフォーマットされたものです。したがって、通知クラスが<code>InvoicePaid</code>という名前の場合、メールの件名は<code>Invoice Paid</code>になります。メッセージに異なる件名を指定したい場合は、メッセージを構築する際に<code>subject</code>メソッドを呼び出します。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">&#39;Notification Subject&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">line</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-mailer"></a></p>
<h3 id="_21">メーラーのカスタマイズ<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>デフォルトでは、メール通知は<code>config/mail.php</code>設定ファイルで定義されたデフォルトのメーラーを使用して送信されます。ただし、メッセージを構築する際に<code>mailer</code>メソッドを呼び出すことで、実行時に異なるメーラーを指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">mailer</span><span class="p">(</span><span class="s1">&#39;postmark&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">line</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-templates"></a></p>
<h3 id="_22">テンプレートのカスタマイズ<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>メール通知で使用されるHTMLとプレーンテキストテンプレートを変更するには、通知パッケージのリソースを公開します。このコマンドを実行すると、メール通知テンプレートは<code>resources/views/vendor/notifications</code>ディレクトリに配置されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>vendor:publish<span class="w"> </span>--tag<span class="o">=</span>laravel-notifications
</code></pre></div>
<p><a name="mail-attachments"></a></p>
<h3 id="_23">添付ファイル<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>メール通知に添付ファイルを追加するには、メッセージを構築する際に<code>attach</code>メソッドを使用します。<code>attach</code>メソッドは、ファイルへの絶対パスを最初の引数として受け取ります。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">greeting</span><span class="p">(</span><span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">attach</span><span class="p">(</span><span class="s1">&#39;/path/to/file&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>通知メールメッセージが提供する<code>attach</code>メソッドは、<a href="mail.html#attachable-objects">添付可能なオブジェクト</a>も受け入れます。詳細については、<a href="mail.html#attachable-objects">添付可能なオブジェクトのドキュメント</a>を参照してください。</p>
</div>
<p>メッセージにファイルを添付する際に、表示名と/またはMIMEタイプを指定するには、<code>attach</code>メソッドに2番目の引数として<code>array</code>を渡します。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">greeting</span><span class="p">(</span><span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">attach</span><span class="p">(</span><span class="s1">&#39;/path/to/file&#39;</span><span class="p">,</span> <span class="p">[</span>
                    <span class="s1">&#39;as&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;name.pdf&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;mime&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;application/pdf&#39;</span><span class="p">,</span>
                <span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<p>メール可能オブジェクトとは異なり、ストレージディスクから直接ファイルを添付するために<code>attachFromStorage</code>を使用することはできません。代わりに、ストレージディスク上のファイルへの絶対パスを指定して<code>attach</code>メソッドを使用するか、<code>toMail</code>メソッドから<a href="mail.html#generating-mailables">メール可能</a>を返すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">App\Mail\InvoicePaid</span> <span class="k">as</span> <span class="nx">InvoicePaidMailable</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Mailable</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaidMailable</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">))</span>
                <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">attachFromStorage</span><span class="p">(</span><span class="s1">&#39;/path/to/file&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>必要に応じて、<code>attachMany</code>メソッドを使用してメッセージに複数のファイルを添付できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">greeting</span><span class="p">(</span><span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">attachMany</span><span class="p">([</span>
                    <span class="s1">&#39;/path/to/forge.svg&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;/path/to/vapor.svg&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                        <span class="s1">&#39;as&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Logo.svg&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;mime&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;image/svg+xml&#39;</span><span class="p">,</span>
                    <span class="p">],</span>
                <span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="raw-data-attachments"></a></p>
<h4 id="_24">生データの添付<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<p><code>attachData</code>メソッドを使用して、生のバイト文字列を添付ファイルとして添付できます。<code>attachData</code>メソッドを呼び出す際に、添付ファイルに割り当てるファイル名を指定する必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">greeting</span><span class="p">(</span><span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">attachData</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pdf</span><span class="p">,</span> <span class="s1">&#39;name.pdf&#39;</span><span class="p">,</span> <span class="p">[</span>
                    <span class="s1">&#39;mime&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;application/pdf&#39;</span><span class="p">,</span>
                <span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="adding-tags-metadata"></a></p>
<h3 id="_25">タグとメタデータの追加<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<p>MailgunやPostmarkなどの一部のサードパーティメールプロバイダは、メッセージの「タグ」と「メタデータ」をサポートしており、アプリケーションから送信されたメールをグループ化して追跡するために使用できます。<code>tag</code>メソッドと<code>metadata</code>メソッドを介して、メールメッセージにタグとメタデータを追加できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">greeting</span><span class="p">(</span><span class="s1">&#39;Comment Upvoted!&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">tag</span><span class="p">(</span><span class="s1">&#39;upvote&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">metadata</span><span class="p">(</span><span class="s1">&#39;comment_id&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">comment</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>アプリケーションがMailgunドライバを使用している場合は、Mailgunのドキュメントを参照して、<a href="https://documentation.mailgun.com/en/latest/user_manual.html#tagging-1">タグ</a>と<a href="https://documentation.mailgun.com/en/latest/user_manual.html#attaching-data-to-messages">メタデータ</a>の詳細を確認できます。同様に、Postmarkのドキュメントも、<a href="https://postmarkapp.com/blog/tags-support-for-smtp">タグ</a>と<a href="https://postmarkapp.com/support/article/1125-custom-metadata-faq">メタデータ</a>のサポートについて確認できます。</p>
<p>アプリケーションがAmazon SESを使用してメールを送信している場合は、<code>metadata</code>メソッドを使用してメッセージに<a href="https://docs.aws.amazon.com/ses/latest/APIReference/API_MessageTag.html">SES「タグ」</a>を添付する必要があります。</p>
<p><a name="customizing-the-symfony-message"></a></p>
<h3 id="symfony">Symfonyメッセージのカスタマイズ<a class="headerlink" href="#symfony" title="Permanent link">&para;</a></h3>
<p><code>MailMessage</code>クラスの<code>withSymfonyMessage</code>メソッドを使用すると、メッセージが送信される前にSymfonyメッセージインスタンスで呼び出されるクロージャを登録できます。これにより、メッセージが配信される前にメッセージを深くカスタマイズする機会が得られます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Symfony\Component\Mime\Email</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">withSymfonyMessage</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Email</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addTextHeader</span><span class="p">(</span>
                        <span class="s1">&#39;Custom-Header&#39;</span><span class="p">,</span> <span class="s1">&#39;Header Value&#39;</span>
                    <span class="p">);</span>
                <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="using-mailables"></a></p>
<h3 id="_26">メール可能オブジェクトの使用<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<p>必要に応じて、通知の<code>toMail</code>メソッドから完全な<a href="mail.html">メール可能オブジェクト</a>を返すことができます。<code>MailMessage</code>の代わりに<code>Mailable</code>を返す場合、メール可能オブジェクトの<code>to</code>メソッドを使用してメッセージの受信者を指定する必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">App\Mail\InvoicePaid</span> <span class="k">as</span> <span class="nx">InvoicePaidMailable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Mail\Mailable</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のメール表現を取得する</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Mailable</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaidMailable</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">))</span>
                <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="sd">/**</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="sd"> * Get the mail representation of the notification.</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="sd"> */</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Mailable</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="p">{</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaidMailable</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">))</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>                <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">);</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="p">}</span>
</code></pre></div>
<p><a name="mailables-and-on-demand-notifications"></a></p>
<h4 id="mailables">Mailablesとオンデマンド通知<a class="headerlink" href="#mailables" title="Permanent link">&para;</a></h4>
<p><a href="#on-demand-notifications">オンデマンド通知</a>を送信する場合、<code>toMail</code>メソッドに渡される<code>$notifiable</code>インスタンスは、<code>Illuminate\Notifications\AnonymousNotifiable</code>のインスタンスになります。これは、オンデマンド通知の送信先のメールアドレスを取得するために使用できる<code>routeNotificationFor</code>メソッドを提供します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">use</span> <span class="nx">App\Mail\InvoicePaid</span> <span class="k">as</span> <span class="nx">InvoicePaidMailable</span><span class="p">;</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="k">use</span> <span class="nx">Illuminate\Notifications\AnonymousNotifiable</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">use</span> <span class="nx">Illuminate\Mail\Mailable</span><span class="p">;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="sd">/**</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="sd"> * Get the mail representation of the notification.</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="sd"> */</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Mailable</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    <span class="nv">$address</span> <span class="o">=</span> <span class="nv">$notifiable</span> <span class="nx">instanceof</span> <span class="nx">AnonymousNotifiable</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>            <span class="o">?</span> <span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">routeNotificationFor</span><span class="p">(</span><span class="s1">&#39;mail&#39;</span><span class="p">)</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>            <span class="o">:</span> <span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">;</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaidMailable</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="p">))</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>                <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="nv">$address</span><span class="p">);</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="p">}</span>
</code></pre></div>
<p><a name="previewing-mail-notifications"></a></p>
<h3 id="_27">メール通知のプレビュー<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p>メール通知テンプレートを設計する際、典型的なBladeテンプレートのように、レンダリングされたメールメッセージをブラウザですばやくプレビューすると便利です。このため、Laravelでは、ルートクロージャまたはコントローラからメール通知によって生成されたメールメッセージを直接返すことができます。<code>MailMessage</code>が返されると、レンダリングされてブラウザに表示され、実際のメールアドレスに送信する必要なく、そのデザインをすばやくプレビューできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">use</span> <span class="nx">App\Models\Invoice</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">use</span> <span class="nx">App\Notifications\InvoicePaid</span><span class="p">;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/notification&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>    <span class="nv">$invoice</span> <span class="o">=</span> <span class="nx">Invoice</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">))</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>                <span class="o">-&gt;</span><span class="na">toMail</span><span class="p">(</span><span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">);</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="p">});</span>
</code></pre></div>
<p><a name="markdown-mail-notifications"></a></p>
<h2 id="markdown">Markdownメール通知<a class="headerlink" href="#markdown" title="Permanent link">&para;</a></h2>
<p>Markdownメール通知を使用すると、メール通知の事前構築済みテンプレートを利用しながら、より長くカスタマイズされたメッセージを記述する自由度が得られます。メッセージはMarkdownで記述されるため、Laravelはメッセージのために美しいレスポンシブHTMLテンプレートをレンダリングするだけでなく、プレーンテキストの対応物も自動的に生成できます。</p>
<p><a name="generating-the-message"></a></p>
<h3 id="_28">メッセージの生成<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<p>対応するMarkdownテンプレートを含む通知を生成するには、<code>make:notification</code> Artisanコマンドの<code>--markdown</code>オプションを使用できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>make:notification<span class="w"> </span>InvoicePaid<span class="w"> </span>--markdown<span class="o">=</span>mail.invoice.paid
</code></pre></div>
<p>他のすべてのメール通知と同様に、Markdownテンプレートを使用する通知は、通知クラスに<code>toMail</code>メソッドを定義する必要があります。ただし、通知を構築するために<code>line</code>および<code>action</code>メソッドを使用する代わりに、使用するMarkdownテンプレートの名前を指定するために<code>markdown</code>メソッドを使用します。テンプレートで利用可能にしたいデータの配列をメソッドの2番目の引数として渡すことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="sd">/**</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="sd"> * Get the mail representation of the notification.</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="sd"> */</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="p">{</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    <span class="nv">$url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">(</span><span class="s1">&#39;/invoice/&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>                <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">&#39;Invoice Paid&#39;</span><span class="p">)</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>                <span class="o">-&gt;</span><span class="na">markdown</span><span class="p">(</span><span class="s1">&#39;mail.invoice.paid&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">]);</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="p">}</span>
</code></pre></div>
<p><a name="writing-the-message"></a></p>
<h3 id="_29">メッセージの記述<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p>Markdownメール通知は、BladeコンポーネントとMarkdown構文を組み合わせて使用し、Laravelの事前構築済み通知コンポーネントを活用しながら、通知を簡単に構築できるようにします。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="x">&lt;x-mail::message&gt;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="x"># Invoice Paid</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="x">Your invoice has been paid!</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="x">&lt;x-mail::button :url=&quot;$url&quot;&gt;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="x">View Invoice</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="x">&lt;/x-mail::button&gt;</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="x">Thanks,&lt;br&gt;</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="x">{{ config(&#39;app.name&#39;) }}</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="x">&lt;/x-mail::message&gt;</span>
</code></pre></div>
<p><a name="button-component"></a></p>
<h4 id="_30">ボタンコンポーネント<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<p>ボタンコンポーネントは、中央揃えのボタンリンクをレンダリングします。コンポーネントは2つの引数を受け取ります。<code>url</code>とオプションの<code>color</code>です。サポートされている色は<code>primary</code>、<code>green</code>、<code>red</code>です。通知には必要なだけボタンコンポーネントを追加できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="x">&lt;x-mail::button :url=&quot;$url&quot; color=&quot;green&quot;&gt;</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="x">View Invoice</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="x">&lt;/x-mail::button&gt;</span>
</code></pre></div>
<p><a name="panel-component"></a></p>
<h4 id="_31">パネルコンポーネント<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<p>パネルコンポーネントは、通知の残りの部分とは少し異なる背景色を持つパネル内に指定されたテキストブロックをレンダリングします。これにより、指定されたテキストブロックに注意を引くことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="x">&lt;x-mail::panel&gt;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="x">This is the panel content.</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="x">&lt;/x-mail::panel&gt;</span>
</code></pre></div>
<p><a name="table-component"></a></p>
<h4 id="_32">テーブルコンポーネント<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<p>テーブルコンポーネントを使用すると、MarkdownテーブルをHTMLテーブルに変換できます。コンポーネントはMarkdownテーブルをコンテンツとして受け取ります。テーブル列の配置は、デフォルトのMarkdownテーブル配置構文を使用してサポートされます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="x">&lt;x-mail::table&gt;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="x">| Laravel       | Table         | Example       |</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="x">| ------------- | :-----------: | ------------: |</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="x">| Col 2 is      | Centered      | $10           |</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="x">| Col 3 is      | Right-Aligned | $20           |</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="x">&lt;/x-mail::table&gt;</span>
</code></pre></div>
<p><a name="customizing-the-components"></a></p>
<h3 id="_33">コンポーネントのカスタマイズ<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<p>Markdown通知コンポーネントをすべて自分のアプリケーションにエクスポートしてカスタマイズすることができます。コンポーネントをエクスポートするには、<code>vendor:publish</code> Artisanコマンドを使用して<code>laravel-mail</code>アセットタグを公開します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>vendor:publish<span class="w"> </span>--tag<span class="o">=</span>laravel-mail
</code></pre></div>
<p>このコマンドは、Markdownメールコンポーネントを<code>resources/views/vendor/mail</code>ディレクトリに公開します。<code>mail</code>ディレクトリには、<code>html</code>と<code>text</code>ディレクトリが含まれ、それぞれに利用可能なすべてのコンポーネントの表現が含まれます。これらのコンポーネントは自由にカスタマイズできます。</p>
<p><a name="customizing-the-css"></a></p>
<h4 id="css">CSSのカスタマイズ<a class="headerlink" href="#css" title="Permanent link">&para;</a></h4>
<p>コンポーネントをエクスポートした後、<code>resources/views/vendor/mail/html/themes</code>ディレクトリに<code>default.css</code>ファイルが含まれます。このファイルのCSSをカスタマイズすると、Markdown通知のHTML表現内にスタイルが自動的にインライン化されます。</p>
<p>LaravelのMarkdownコンポーネントのためにまったく新しいテーマを構築したい場合、<code>html/themes</code>ディレクトリ内にCSSファイルを配置できます。CSSファイルに名前を付けて保存した後、<code>mail</code>設定ファイルの<code>theme</code>オプションを新しいテーマの名前と一致するように更新します。</p>
<p>個々の通知のためにテーマをカスタマイズするには、通知のメールメッセージを構築する際に<code>theme</code>メソッドを呼び出すことができます。<code>theme</code>メソッドは、通知の送信時に使用するテーマの名前を受け取ります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="sd">/**</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="sd"> * Get the mail representation of the notification.</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="sd"> */</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toMail</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">MailMessage</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="p">{</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">MailMessage</span><span class="p">)</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>                <span class="o">-&gt;</span><span class="na">theme</span><span class="p">(</span><span class="s1">&#39;invoice&#39;</span><span class="p">)</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>                <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">&#39;Invoice Paid&#39;</span><span class="p">)</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>                <span class="o">-&gt;</span><span class="na">markdown</span><span class="p">(</span><span class="s1">&#39;mail.invoice.paid&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">]);</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="p">}</span>
</code></pre></div>
<p><a name="database-notifications"></a></p>
<h2 id="_34">データベース通知<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h2>
<p><a name="database-prerequisites"></a></p>
<h3 id="_35">前提条件<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h3>
<p><code>database</code>通知チャネルは、通知情報をデータベーステーブルに保存します。このテーブルには、通知タイプや通知を説明するJSONデータ構造などの情報が含まれます。</p>
<p>アプリケーションのユーザーインターフェースに通知を表示するためにテーブルをクエリすることができます。ただし、その前に、通知を保持するためのデータベーステーブルを作成する必要があります。<code>make:notifications-table</code>コマンドを使用して、適切なテーブルスキーマを持つ<a href="migrations.html">マイグレーション</a>を生成できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>php<span class="w"> </span>artisan<span class="w"> </span>make:notifications-table
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>php<span class="w"> </span>artisan<span class="w"> </span>migrate
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>通知可能なモデルが<a href="eloquent.html#uuid-and-ulid-keys">UUIDまたはULIDプライマリキー</a>を使用している場合、通知テーブルのマイグレーションで<code>morphs</code>メソッドを<a href="migrations.html#column-method-uuidMorphs"><code>uuidMorphs</code></a>または<a href="migrations.html#column-method-ulidMorphs"><code>ulidMorphs</code></a>に置き換える必要があります。</p>
</div>
<p><a name="formatting-database-notifications"></a></p>
<h3 id="_36">データベース通知のフォーマット<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<p>通知がデータベーステーブルに保存されることをサポートしている場合、通知クラスに<code>toDatabase</code>または<code>toArray</code>メソッドを定義する必要があります。このメソッドは<code>$notifiable</code>エンティティを受け取り、プレーンなPHP配列を返す必要があります。返された配列はJSONにエンコードされ、<code>notifications</code>テーブルの<code>data</code>列に保存されます。<code>toArray</code>メソッドの例を見てみましょう。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="sd">/**</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="sd"> * Get the array representation of the notification.</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="sd"> *</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="sd"> * @return array&lt;string, mixed&gt;</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="sd"> */</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">toArray</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="p">{</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>        <span class="s1">&#39;invoice_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">,</span>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>        <span class="s1">&#39;amount&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">amount</span><span class="p">,</span>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>    <span class="p">];</span>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="p">}</span>
</code></pre></div>
<p>通知がアプリケーションのデータベースに保存されると、<code>type</code>列に通知のクラス名が入力されます。ただし、通知クラスに<code>databaseType</code>メソッドを定義することで、この動作をカスタマイズできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="sd">/**</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="sd"> * Get the notification&#39;s database type.</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="sd"> *</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="sd"> * @return string</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="sd"> */</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">databaseType</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="p">{</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>    <span class="k">return</span> <span class="s1">&#39;invoice-paid&#39;</span><span class="p">;</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="p">}</span>
</code></pre></div>
<p><a name="todatabase-vs-toarray"></a></p>
<h4 id="todatabase-vs-toarray"><code>toDatabase</code> vs. <code>toArray</code><a class="headerlink" href="#todatabase-vs-toarray" title="Permanent link">&para;</a></h4>
<p><code>toArray</code>メソッドは、JavaScript駆動のフロントエンドにブロードキャストするデータを決定するために<code>broadcast</code>チャネルによっても使用されます。<code>database</code>チャネルと<code>broadcast</code>チャネルに対して2つの異なる配列表現を持ちたい場合は、<code>toArray</code>メソッドの代わりに<code>toDatabase</code>メソッドを定義する必要があります。</p>
<p><a name="accessing-the-notifications"></a></p>
<h3 id="_37">通知へのアクセス<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<p>通知がデータベースに保存された後、通知可能なエンティティからそれらにアクセスするための便利な方法が必要です。Laravelのデフォルトの<code>App\Models\User</code>モデルには、<code>Illuminate\Notifications\Notifiable</code>トレイトが含まれており、<code>notifications</code> Eloquentリレーションを返す<code>notifications</code>メソッドが含まれています。このメソッドを使用して通知にアクセスするには、他のEloquentリレーションと同様に使用できます。デフォルトでは、通知は<code>created_at</code>タイムスタンプに基づいて並べ替えられます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nv">$user</span> <span class="o">=</span> <span class="nx">App\Models\User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notifications</span> <span class="k">as</span> <span class="nv">$notification</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>    <span class="k">echo</span> <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">type</span><span class="p">;</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="p">}</span>
</code></pre></div>
<p>未読通知のみを取得したい場合は、<code>unreadNotifications</code>リレーションを使用できます。この場合も、通知は<code>created_at</code>タイムスタンプに基づいて並べ替えられます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nv">$user</span> <span class="o">=</span> <span class="nx">App\Models\User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">unreadNotifications</span> <span class="k">as</span> <span class="nv">$notification</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>    <span class="k">echo</span> <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">type</span><span class="p">;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>JavaScriptクライアントから通知にアクセスするには、現在のユーザーなどの通知可能なエンティティの通知を返す通知コントローラを定義する必要があります。その後、JavaScriptクライアントからそのコントローラのURLにHTTPリクエストを送信できます。</p>
</div>
<p>通知がデータベースに保存されたら、通知可能なエンティティからそれらにアクセスする便利な方法が必要です。Laravelのデフォルトの<code>App\Models\User</code>モデルに含まれている<code>Illuminate\Notifications\Notifiable</code>トレイトには、エンティティの通知を返す<code>notifications</code> <a href="eloquent-relationships.html">Eloquentリレーション</a>が含まれています。通知を取得するには、他のEloquentリレーションと同様にこのメソッドにアクセスできます。デフォルトでは、通知は<code>created_at</code>タイムスタンプでソートされ、最新の通知がコレクションの先頭になります。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span> <span class="o">=</span> <span class="nx">App\Models\User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notifications</span> <span class="k">as</span> <span class="nv">$notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">type</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>「未読」の通知のみを取得したい場合は、<code>unreadNotifications</code>リレーションを使用できます。これらの通知も<code>created_at</code>タイムスタンプでソートされ、最新の通知がコレクションの先頭になります。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span> <span class="o">=</span> <span class="nx">App\Models\User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">unreadNotifications</span> <span class="k">as</span> <span class="nv">$notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">type</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>JavaScriptクライアントから通知にアクセスするには、アプリケーションに通知コントローラを定義し、現在のユーザーなどの通知可能なエンティティの通知を返す必要があります。その後、JavaScriptクライアントからそのコントローラのURLにHTTPリクエストを行うことができます。</p>
</div>
<p><a name="marking-notifications-as-read"></a></p>
<h3 id="_38">通知を既読にする<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<p>通常、ユーザーが通知を閲覧したら、その通知を「既読」としてマークしたいでしょう。<code>Illuminate\Notifications\Notifiable</code>トレイトは、通知のデータベースレコードの<code>read_at</code>列を更新する<code>markAsRead</code>メソッドを提供します。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span> <span class="o">=</span> <span class="nx">App\Models\User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">unreadNotifications</span> <span class="k">as</span> <span class="nv">$notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">markAsRead</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>ただし、各通知をループする代わりに、通知のコレクションに直接<code>markAsRead</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">unreadNotifications</span><span class="o">-&gt;</span><span class="na">markAsRead</span><span class="p">();</span>
</code></pre></div>
<p>データベースから通知を取得せずに、すべての通知を既読として一括更新するクエリを使用することもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span> <span class="o">=</span> <span class="nx">App\Models\User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">unreadNotifications</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">([</span><span class="s1">&#39;read_at&#39;</span> <span class="o">=&gt;</span> <span class="nx">now</span><span class="p">()]);</span>
</code></pre></div>
<p>通知を完全にテーブルから削除するために<code>delete</code>することもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notifications</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>
<p><a name="broadcast-notifications"></a></p>
<h2 id="_39">ブロードキャスト通知<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h2>
<p><a name="broadcast-prerequisites"></a></p>
<h3 id="_40">前提条件<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h3>
<p>通知をブロードキャストする前に、Laravelの<a href="broadcasting.html">イベントブロードキャスト</a>サービスを設定し、理解しておく必要があります。イベントブロードキャストは、JavaScriptフロントエンドからサーバーサイドのLaravelイベントに反応する方法を提供します。</p>
<p><a name="formatting-broadcast-notifications"></a></p>
<h3 id="_41">ブロードキャスト通知のフォーマット<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h3>
<p><code>broadcast</code>チャンネルは、Laravelの<a href="broadcasting.html">イベントブロードキャスト</a>サービスを使用して通知をブロードキャストし、JavaScriptフロントエンドがリアルタイムで通知をキャッチできるようにします。通知がブロードキャストをサポートしている場合、通知クラスに<code>toBroadcast</code>メソッドを定義できます。このメソッドは<code>$notifiable</code>エンティティを受け取り、<code>BroadcastMessage</code>インスタンスを返す必要があります。<code>toBroadcast</code>メソッドが存在しない場合、<code>toArray</code>メソッドがブロードキャストするデータを収集するために使用されます。返されたデータはJSONにエンコードされ、JavaScriptフロントエンドにブロードキャストされます。<code>toBroadcast</code>メソッドの例を見てみましょう。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Messages\BroadcastMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のブロードキャスト可能な表現を取得します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toBroadcast</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">BroadcastMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">BroadcastMessage</span><span class="p">([</span>
        <span class="s1">&#39;invoice_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">,</span>
        <span class="s1">&#39;amount&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invoice</span><span class="o">-&gt;</span><span class="na">amount</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="broadcast-queue-configuration"></a></p>
<h4 id="_42">ブロードキャストキューの設定<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<p>すべてのブロードキャスト通知は、ブロードキャストのためにキューに入れられます。ブロードキャスト操作に使用されるキュー接続またはキュー名を設定したい場合は、<code>BroadcastMessage</code>の<code>onConnection</code>および<code>onQueue</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">BroadcastMessage</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span>
                <span class="o">-&gt;</span><span class="na">onConnection</span><span class="p">(</span><span class="s1">&#39;sqs&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">onQueue</span><span class="p">(</span><span class="s1">&#39;broadcasts&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="customizing-the-notification-type"></a></p>
<h4 id="_43">通知タイプのカスタマイズ<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<p>指定したデータに加えて、すべてのブロードキャスト通知には通知の完全なクラス名を含む<code>type</code>フィールドも含まれます。通知の<code>type</code>をカスタマイズしたい場合は、通知クラスに<code>broadcastType</code>メソッドを定義できます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * ブロードキャストされる通知のタイプを取得します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">broadcastType</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;broadcast.message&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="listening-for-notifications"></a></p>
<h3 id="_44">通知のリスニング<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h3>
<p>通知は、<code>{notifiable}.{id}</code>という規則を使用してフォーマットされたプライベートチャンネルでブロードキャストされます。したがって、IDが<code>1</code>の<code>App\Models\User</code>インスタンスに通知を送信する場合、通知は<code>App.Models.User.1</code>プライベートチャンネルでブロードキャストされます。<a href="broadcasting.html#client-side-installation">Laravel Echo</a>を使用する場合、<code>notification</code>メソッドを使用してチャンネルで通知を簡単にリスニングできます。</p>
<div class="highlight"><pre><span></span><code><span class="k">Echo</span><span class="o">.</span><span class="k">private</span><span class="p">(</span><span class="s1">&#39;App.Models.User.&#39;</span> <span class="o">+</span> <span class="nx">userId</span><span class="p">)</span>
    <span class="o">.</span><span class="nx">notification</span><span class="p">((</span><span class="nx">notification</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="o">.</span><span class="nb">log</span><span class="p">(</span><span class="nx">notification</span><span class="o">.</span><span class="nx">type</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<p><a name="customizing-the-notification-channel"></a></p>
<h4 id="_45">通知チャンネルのカスタマイズ<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<p>エンティティのブロードキャスト通知がブロードキャストされるチャンネルをカスタマイズしたい場合は、通知可能なエンティティに<code>receivesBroadcastNotificationsOn</code>メソッドを定義できます。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Broadcasting\PrivateChannel</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Notifiable</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * ユーザーが通知ブロードキャストを受信するチャンネル。</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">receivesBroadcastNotificationsOn</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;users.&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="sms-notifications"></a></p>
<h2 id="sms">SMS通知<a class="headerlink" href="#sms" title="Permanent link">&para;</a></h2>
<p><a name="sms-prerequisites"></a></p>
<h3 id="_46">前提条件<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h3>
<p>LaravelでのSMS通知の送信は、<a href="https://www.vonage.com/">Vonage</a>（旧Nexmo）によって提供されます。Vonageを介して通知を送信する前に、<code>laravel/vonage-notification-channel</code>および<code>guzzlehttp/guzzle</code>パッケージをインストールする必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="nx">composer</span> <span class="k">require</span> <span class="nx">laravel</span><span class="o">/</span><span class="nx">vonage</span><span class="o">-</span><span class="nx">notification</span><span class="o">-</span><span class="nx">channel</span> <span class="nx">guzzlehttp</span><span class="o">/</span><span class="nx">guzzle</span>
</code></pre></div>
<p>このパッケージには<a href="https://github.com/laravel/vonage-notification-channel/blob/3.x/config/vonage.php">設定ファイル</a>が含まれています。ただし、この設定ファイルを自分のアプリケーションにエクスポートする必要はありません。単に<code>VONAGE_KEY</code>および<code>VONAGE_SECRET</code>環境変数を使用して、Vonageの公開鍵と秘密鍵を定義できます。</p>
<p>鍵を定義した後、<code>VONAGE_SMS_FROM</code>環境変数を設定して、SMSメッセージをデフォルトで送信する電話番号を定義する必要があります。この電話番号は、Vonageコントロールパネル内で生成できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">VONAGE_SMS_FROM</span><span class="o">=</span><span class="mi">15556666666</span>
</code></pre></div>
<p><a name="formatting-sms-notifications"></a></p>
<h3 id="sms_1">SMS通知のフォーマット<a class="headerlink" href="#sms_1" title="Permanent link">&para;</a></h3>
<p>通知がSMSとして送信されることをサポートしている場合、通知クラスに<code>toVonage</code>メソッドを定義する必要があります。このメソッドは<code>$notifiable</code>エンティティを受け取り、<code>Illuminate\Notifications\Messages\VonageMessage</code>インスタンスを返す必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Messages\VonageMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のVonage / SMS表現を取得します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toVonage</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">VonageMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">VonageMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">content</span><span class="p">(</span><span class="s1">&#39;Your SMS message content&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="unicode-content"></a></p>
<h4 id="unicode">Unicodeコンテンツ<a class="headerlink" href="#unicode" title="Permanent link">&para;</a></h4>
<p>SMSメッセージにUnicode文字が含まれる場合、<code>VonageMessage</code>インスタンスを構築する際に<code>unicode</code>メソッドを呼び出す必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Messages\VonageMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のVonage / SMS表現を取得します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toVonage</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">VonageMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">VonageMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">content</span><span class="p">(</span><span class="s1">&#39;Your unicode message&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">unicode</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="customizing-the-from-number"></a></p>
<h3 id="from">"From"番号のカスタマイズ<a class="headerlink" href="#from" title="Permanent link">&para;</a></h3>
<p>いくつかの通知を<code>VONAGE_SMS_FROM</code>環境変数で指定された電話番号とは異なる電話番号から送信したい場合は、<code>VonageMessage</code>インスタンスの<code>from</code>メソッドを呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Messages\VonageMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のVonage / SMS表現を取得します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toVonage</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">VonageMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">VonageMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">content</span><span class="p">(</span><span class="s1">&#39;Your SMS message content&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;15554443333&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="adding-a-client-reference"></a></p>
<h3 id="_47">クライアント参照の追加<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h3>
<p>ユーザー、チーム、またはクライアントごとのコストを追跡したい場合、通知に「クライアント参照」を追加できます。Vonageでは、このクライアント参照を使用してレポートを生成できるため、特定の顧客のSMS使用状況をよりよく理解できます。クライアント参照は、最大40文字の任意の文字列です。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Messages\VonageMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のVonage / SMS表現を取得します。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toVonage</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">VonageMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">VonageMessage</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">clientReference</span><span class="p">((</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">content</span><span class="p">(</span><span class="s1">&#39;Your SMS message content&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="routing-sms-notifications"></a></p>
<h3 id="sms_2">SMS通知のルーティング<a class="headerlink" href="#sms_2" title="Permanent link">&para;</a></h3>
<p>Vonage通知を適切な電話番号にルーティングするには、通知可能なエンティティに<code>routeNotificationForVonage</code>メソッドを定義します。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Notifiable</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Vonageチャンネルの通知をルーティングする。</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">routeNotificationForVonage</span><span class="p">(</span><span class="nx">Notification</span> <span class="nv">$notification</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">phone_number</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="slack-notifications"></a></p>
<h2 id="slack">Slack通知<a class="headerlink" href="#slack" title="Permanent link">&para;</a></h2>
<p><a name="slack-prerequisites"></a></p>
<h3 id="_48">前提条件<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h3>
<p>Slack通知を送信する前に、Composerを介してSlack通知チャンネルをインストールする必要があります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>composer<span class="w"> </span>require<span class="w"> </span>laravel/slack-notification-channel
</code></pre></div>
<p>さらに、Slackワークスペース用に<a href="https://api.slack.com/apps?new_app=1">Slackアプリ</a>を作成する必要があります。</p>
<p>アプリが作成された同じSlackワークスペースにのみ通知を送信する場合は、アプリに<code>chat:write</code>、<code>chat:write.public</code>、および<code>chat:write.customize</code>スコープがあることを確認する必要があります。これらのスコープは、Slack内の「OAuth &amp; Permissions」アプリ管理タブから追加できます。</p>
<p>次に、アプリの「Bot User OAuth Token」をコピーし、アプリケーションの<code>services.php</code>設定ファイル内の<code>slack</code>設定配列に配置します。このトークンは、Slack内の「OAuth &amp; Permissions」タブで見つけることができます。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;slack&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;notifications&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;bot_user_oauth_token&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;SLACK_BOT_USER_OAUTH_TOKEN&#39;</span><span class="p">),</span>
        <span class="s1">&#39;channel&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;SLACK_BOT_USER_DEFAULT_CHANNEL&#39;</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">],</span>
</code></pre></div>
<p><a name="slack-app-distribution"></a></p>
<h4 id="_49">アプリの配布<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<p>アプリケーションがアプリケーションのユーザーが所有する外部Slackワークスペースに通知を送信する場合、Slackを介してアプリを「配布」する必要があります。アプリの配布は、Slack内のアプリの「Manage Distribution」タブから管理できます。アプリが配布されたら、<a href="socialite.html">Socialite</a>を使用して、アプリケーションのユーザーに代わって<a href="socialite.html#slack-bot-scopes">Slack Botトークンを取得</a>できます。</p>
<p><a name="formatting-slack-notifications"></a></p>
<h3 id="slack_1">Slack通知のフォーマット<a class="headerlink" href="#slack_1" title="Permanent link">&para;</a></h3>
<p>通知がSlackメッセージとして送信されることをサポートする場合、通知クラスに<code>toSlack</code>メソッドを定義する必要があります。このメソッドは<code>$notifiable</code>エンティティを受け取り、<code>Illuminate\Notifications\Slack\SlackMessage</code>インスタンスを返す必要があります。<a href="https://api.slack.com/block-kit">SlackのBlock Kit API</a>を使用してリッチな通知を構築できます。以下の例は、<a href="https://app.slack.com/block-kit-builder/T01KWS6K23Z#%7B%22blocks%22:%5B%7B%22type%22:%22header%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22Invoice%20Paid%22%7D%7D,%7B%22type%22:%22context%22,%22elements%22:%5B%7B%22type%22:%22plain_text%22,%22text%22:%22Customer%20%231234%22%7D%5D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22An%20invoice%20has%20been%20paid.%22%7D,%22fields%22:%5B%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Invoice%20No:*%5Cn1000%22%7D,%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Invoice%20Recipient:*%5Cntaylor@laravel.com%22%7D%5D%7D,%7B%22type%22:%22divider%22%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22Congratulations!%22%7D%7D%5D%7D">SlackのBlock Kitビルダー</a>でプレビューできます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\ContextBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\SectionBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Composites\ConfirmObject</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\SlackMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のSlack表現を取得する。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toSlack</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">SlackMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">SlackMessage</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;One of your invoices has been paid!&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">headerBlock</span><span class="p">(</span><span class="s1">&#39;Invoice Paid&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">contextBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">ContextBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;Customer #1234&#39;</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="o">-&gt;</span><span class="na">sectionBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">SectionBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;An invoice has been paid.&#39;</span><span class="p">);</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">field</span><span class="p">(</span><span class="s2">&quot;*Invoice No:*</span><span class="se">\n</span><span class="s2">1000&quot;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">markdown</span><span class="p">();</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">field</span><span class="p">(</span><span class="s2">&quot;*Invoice Recipient:*</span><span class="se">\n</span><span class="s2">taylor@laravel.com&quot;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">markdown</span><span class="p">();</span>
            <span class="p">})</span>
            <span class="o">-&gt;</span><span class="na">dividerBlock</span><span class="p">()</span>
            <span class="o">-&gt;</span><span class="na">sectionBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">SectionBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;Congratulations!&#39;</span><span class="p">);</span>
            <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="slack-interactivity"></a></p>
<h3 id="slack_2">Slackのインタラクティブ機能<a class="headerlink" href="#slack_2" title="Permanent link">&para;</a></h3>
<p>SlackのBlock Kit通知システムは、<a href="https://api.slack.com/interactivity/handling">ユーザーのインタラクションを処理する</a>強力な機能を提供します。これらの機能を利用するには、Slackアプリで「インタラクティブ性」を有効にし、アプリケーションによって提供されるURLを指す「リクエストURL」を設定する必要があります。これらの設定は、Slack内の「Interactivity &amp; Shortcuts」アプリ管理タブから管理できます。</p>
<p>以下の例では、<code>actionsBlock</code>メソッドを使用していますが、SlackはボタンをクリックしたSlackユーザー、クリックされたボタンのIDなどを含むペイロードを持つ<code>POST</code>リクエストを「リクエストURL」に送信します。その後、アプリケーションはペイロードに基づいてアクションを決定できます。また、リクエストがSlackによって行われたことを<a href="https://api.slack.com/authentication/verifying-requests-from-slack">検証する</a>必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\ActionsBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\ContextBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\SectionBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\SlackMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のSlack表現を取得する。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toSlack</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">SlackMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">SlackMessage</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;One of your invoices has been paid!&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">headerBlock</span><span class="p">(</span><span class="s1">&#39;Invoice Paid&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">contextBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">ContextBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;Customer #1234&#39;</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="o">-&gt;</span><span class="na">sectionBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">SectionBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;An invoice has been paid.&#39;</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="o">-&gt;</span><span class="na">actionsBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">ActionsBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                 <span class="c1">// IDはデフォルトで &quot;button_acknowledge_invoice&quot; になります...</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">button</span><span class="p">(</span><span class="s1">&#39;Acknowledge Invoice&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">primary</span><span class="p">();</span>

                <span class="c1">// IDを手動で設定...</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">button</span><span class="p">(</span><span class="s1">&#39;Deny&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">danger</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">(</span><span class="s1">&#39;deny_invoice&#39;</span><span class="p">);</span>
            <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="slack-confirmation-modals"></a></p>
<h4 id="_50">確認モーダル<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<p>ユーザーがアクションを実行する前に確認を求める場合、ボタンを定義する際に<code>confirm</code>メソッドを呼び出すことができます。<code>confirm</code>メソッドはメッセージとクロージャを受け取り、クロージャは<code>ConfirmObject</code>インスタンスを受け取ります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\ActionsBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\ContextBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Blocks\SectionBlock</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\BlockKit\Composites\ConfirmObject</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\SlackMessage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * 通知のSlack表現を取得する。</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">toSlack</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">SlackMessage</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">SlackMessage</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;One of your invoices has been paid!&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">headerBlock</span><span class="p">(</span><span class="s1">&#39;Invoice Paid&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">contextBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">ContextBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;Customer #1234&#39;</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="o">-&gt;</span><span class="na">sectionBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">SectionBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;An invoice has been paid.&#39;</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="o">-&gt;</span><span class="na">actionsBlock</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">ActionsBlock</span> <span class="nv">$block</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">button</span><span class="p">(</span><span class="s1">&#39;Acknowledge Invoice&#39;</span><span class="p">)</span>
                    <span class="o">-&gt;</span><span class="na">primary</span><span class="p">()</span>
                    <span class="o">-&gt;</span><span class="na">confirm</span><span class="p">(</span>
                        <span class="s1">&#39;Acknowledge the payment and send a thank you email?&#39;</span><span class="p">,</span>
                        <span class="k">function</span> <span class="p">(</span><span class="nx">ConfirmObject</span> <span class="nv">$dialog</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nv">$dialog</span><span class="o">-&gt;</span><span class="na">confirm</span><span class="p">(</span><span class="s1">&#39;Yes&#39;</span><span class="p">);</span>
                            <span class="nv">$dialog</span><span class="o">-&gt;</span><span class="na">deny</span><span class="p">(</span><span class="s1">&#39;No&#39;</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">);</span>
            <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="inspecting-slack-blocks"></a></p>
<h4 id="slack_3">Slackブロックの検査<a class="headerlink" href="#slack_3" title="Permanent link">&para;</a></h4>
<p>構築したブロックをすばやく検査したい場合、<code>SlackMessage</code>インスタンスで<code>dd</code>メソッドを呼び出すことができます。<code>dd</code>メソッドは、ペイロードと通知のプレビューをブラウザで表示する<a href="https://app.slack.com/block-kit-builder/">Block Kitビルダー</a>へのURLを生成してダンプします。<code>dd</code>メソッドに<code>true</code>を渡すと、生のペイロードをダンプします。</p>
<div class="highlight"><pre><span></span><code><span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">SlackMessage</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;One of your invoices has been paid!&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">headerBlock</span><span class="p">(</span><span class="s1">&#39;Invoice Paid&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">dd</span><span class="p">();</span>
</code></pre></div>
<p><a name="routing-slack-notifications"></a></p>
<h3 id="slack_4">Slack通知のルーティング<a class="headerlink" href="#slack_4" title="Permanent link">&para;</a></h3>
<p>Slack通知を適切なSlackチームとチャンネルに送信するには、通知可能なモデルに<code>routeNotificationForSlack</code>メソッドを定義します。このメソッドは次の3つの値のいずれかを返すことができます。</p>
<ul>
<li><code>null</code> - 通知自体で設定されたチャンネルへのルーティングを延期します。通知を構築する際に<code>to</code>メソッドを使用して、通知内でチャンネルを設定できます。</li>
<li>通知を送信するSlackチャンネルを指定する文字列（例：<code>#support-channel</code>）。</li>
<li><code>SlackRoute</code>インスタンス - OAuthトークンとチャンネル名を指定できます（例：<code>SlackRoute::make($this-&gt;slack_channel, $this-&gt;slack_token)</code>）。このメソッドは、外部ワークスペースに通知を送信する場合に使用する必要があります。</li>
</ul>
<p>例えば、<code>routeNotificationForSlack</code>メソッドから<code>#support-channel</code>を返すと、アプリケーションの<code>services.php</code>設定ファイルにあるBot User OAuthトークンに関連付けられたワークスペースの<code>#support-channel</code>チャンネルに通知が送信されます。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Notifiable</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Slackチャンネルへの通知ルート</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">routeNotificationForSlack</span><span class="p">(</span><span class="nx">Notification</span> <span class="nv">$notification</span><span class="p">)</span><span class="o">:</span> <span class="nx">mixed</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;#support-channel&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="notifying-external-slack-workspaces"></a></p>
<h3 id="slack_5">外部のSlackワークスペースへの通知<a class="headerlink" href="#slack_5" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>外部のSlackワークスペースに通知を送信する前に、Slackアプリが<a href="#slack-app-distribution">配布</a>されている必要があります。</p>
</div>
<p>もちろん、アプリケーションのユーザーが所有するSlackワークスペースに通知を送信したい場合が多いでしょう。そのためには、まずユーザーのSlack OAuthトークンを取得する必要があります。幸いなことに、<a href="socialite.html">Laravel Socialite</a>にはSlackドライバーが含まれており、アプリケーションのユーザーをSlackで簡単に認証し、<a href="socialite.html#slack-bot-scopes">ボットトークンを取得</a>できます。</p>
<p>ボットトークンを取得してアプリケーションのデータベースに保存したら、<code>SlackRoute::make</code>メソッドを使用して、ユーザーのワークスペースに通知をルーティングできます。さらに、アプリケーションはユーザーが通知を送信するチャンネルを指定する機会を提供する必要があるでしょう。</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Slack\SlackRoute</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Notifiable</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Slackチャンネルへの通知ルート</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">routeNotificationForSlack</span><span class="p">(</span><span class="nx">Notification</span> <span class="nv">$notification</span><span class="p">)</span><span class="o">:</span> <span class="nx">mixed</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">SlackRoute</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">slack_channel</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">slack_token</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="localizing-notifications"></a></p>
<h2 id="_51">通知のローカライズ<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h2>
<p>Laravelでは、HTTPリクエストの現在のロケール以外のロケールで通知を送信できます。通知がキューに入れられている場合、このロケールも記憶されます。</p>
<p>これを実現するために、<code>Illuminate\Notifications\Notification</code>クラスは、希望する言語を設定するための<code>locale</code>メソッドを提供します。通知が評価されている間、アプリケーションはこのロケールに変更され、評価が完了すると前のロケールに戻ります。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">((</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">locale</span><span class="p">(</span><span class="s1">&#39;es&#39;</span><span class="p">));</span>
</code></pre></div>
<p>複数の通知可能なエントリのローカライズも、<code>Notification</code>ファサードを介して行うことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Notification</span><span class="o">::</span><span class="na">locale</span><span class="p">(</span><span class="s1">&#39;es&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span>
    <span class="nv">$users</span><span class="p">,</span> <span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p><a name="user-preferred-locales"></a></p>
<h3 id="_52">ユーザーの優先ロケール<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h3>
<p>アプリケーションによっては、各ユーザーの優先ロケールを保存している場合があります。<code>HasLocalePreference</code>コントラクトを通知可能なモデルに実装することで、Laravelに通知送信時にこの保存されたロケールを使用するよう指示できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Contracts\Translation\HasLocalePreference</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Model</span> <span class="k">implements</span> <span class="nx">HasLocalePreference</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * ユーザーの優先ロケールを取得</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">preferredLocale</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">locale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>このインターフェースを実装すると、Laravelは通知やメールをモデルに送信する際に自動的に優先ロケールを使用します。したがって、このインターフェースを使用する場合、<code>locale</code>メソッドを呼び出す必要はありません。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoicePaid</span><span class="p">(</span><span class="nv">$invoice</span><span class="p">));</span>
</code></pre></div>
<p><a name="testing"></a></p>
<h2 id="_53">テスト<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h2>
<p><code>Notification</code>ファサードの<code>fake</code>メソッドを使用して、通知が送信されないようにすることができます。通常、通知の送信は実際にテストしているコードとは無関係です。ほとんどの場合、Laravelに特定の通知を送信するよう指示されたことを単にアサートするだけで十分です。</p>
<p><code>Notification</code>ファサードの<code>fake</code>メソッドを呼び出した後、通知がユーザーに送信されるように指示されたことをアサートし、通知が受け取ったデータを検査することもできます。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Pest</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="k">use</span> <span class="nx">App\Notifications\OrderShipped</span><span class="p">;</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Notification</span><span class="p">;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;orders can be shipped&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>    <span class="nx">Notification</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>    <span class="c1">// 注文の発送を実行...</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>    <span class="c1">// 通知が送信されなかったことをアサート...</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>    <span class="nx">Notification</span><span class="o">::</span><span class="na">assertNothingSent</span><span class="p">();</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>    <span class="c1">// 指定されたユーザーに通知が送信されたことをアサート...</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>    <span class="nx">Notification</span><span class="o">::</span><span class="na">assertSentTo</span><span class="p">(</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>        <span class="p">[</span><span class="nv">$user</span><span class="p">],</span> <span class="nx">OrderShipped</span><span class="o">::</span><span class="na">class</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>    <span class="p">);</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>    <span class="c1">// 通知が送信されなかったことをアサート...</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>    <span class="nx">Notification</span><span class="o">::</span><span class="na">assertNotSentTo</span><span class="p">(</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>        <span class="p">[</span><span class="nv">$user</span><span class="p">],</span> <span class="nx">AnotherNotification</span><span class="o">::</span><span class="na">class</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>    <span class="p">);</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>    <span class="c1">// 指定された数の通知が送信されたことをアサート...</span>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a>    <span class="nx">Notification</span><span class="o">::</span><span class="na">assertCount</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a><span class="p">});</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">PHPUnit</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">namespace</span> <span class="nx">Tests\Feature</span><span class="p">;</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="k">use</span> <span class="nx">App\Notifications\OrderShipped</span><span class="p">;</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Notification</span><span class="p">;</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="k">use</span> <span class="nx">Tests\TestCase</span><span class="p">;</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="k">class</span> <span class="nc">ExampleTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="p">{</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">test_orders_can_be_shipped</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>    <span class="p">{</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>        <span class="nx">Notification</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>        <span class="c1">// 注文の発送を実行...</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>        <span class="c1">// 通知が送信されなかったことをアサート...</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>        <span class="nx">Notification</span><span class="o">::</span><span class="na">assertNothingSent</span><span class="p">();</span>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>        <span class="c1">// 指定されたユーザーに通知が送信されたことをアサート...</span>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>        <span class="nx">Notification</span><span class="o">::</span><span class="na">assertSentTo</span><span class="p">(</span>
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>            <span class="p">[</span><span class="nv">$user</span><span class="p">],</span> <span class="nx">OrderShipped</span><span class="o">::</span><span class="na">class</span>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>        <span class="p">);</span>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>        <span class="c1">// 通知が送信されなかったことをアサート...</span>
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>        <span class="nx">Notification</span><span class="o">::</span><span class="na">assertNotSentTo</span><span class="p">(</span>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>            <span class="p">[</span><span class="nv">$user</span><span class="p">],</span> <span class="nx">AnotherNotification</span><span class="o">::</span><span class="na">class</span>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>        <span class="p">);</span>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>        <span class="c1">// 指定された数の通知が送信されたことをアサート...</span>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>        <span class="nx">Notification</span><span class="o">::</span><span class="na">assertCount</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a>    <span class="p">}</span>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a><span class="p">}</span>
</code></pre></div>
<p><code>assertSentTo</code>または<code>assertNotSentTo</code>メソッドにクロージャを渡して、指定された「真実テスト」を通過する通知が送信されたことをアサートすることもできます。指定された真実テストを通過する通知が少なくとも1つ送信された場合、アサーションは成功します。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Notification</span><span class="o">::</span><span class="na">assertSentTo</span><span class="p">(</span>
    <span class="nv">$user</span><span class="p">,</span>
    <span class="k">function</span> <span class="p">(</span><span class="nx">OrderShipped</span> <span class="nv">$notification</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$channels</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$order</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">order</span><span class="o">-&gt;</span><span class="na">id</span> <span class="o">===</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p><a name="on-demand-notifications"></a></p>
<h4 id="_54">オンデマンド通知<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<p>テストしているコードが<a href="#on-demand-notifications">オンデマンド通知</a>を送信する場合、<code>assertSentOnDemand</code>メソッドを使用して、オンデマンド通知が送信されたことをテストできます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Notification</span><span class="o">::</span><span class="na">assertSentOnDemand</span><span class="p">(</span><span class="nx">OrderShipped</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
<p><code>assertSentOnDemand</code>メソッドにクロージャを第2引数として渡すことで、オンデマンド通知が正しい「ルート」アドレスに送信されたかどうかを判断できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Notification</span><span class="o">::</span><span class="na">assertSentOnDemand</span><span class="p">(</span>
    <span class="nx">OrderShipped</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
    <span class="k">function</span> <span class="p">(</span><span class="nx">OrderShipped</span> <span class="nv">$notification</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$channels</span><span class="p">,</span> <span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$notifiable</span><span class="o">-&gt;</span><span class="na">routes</span><span class="p">[</span><span class="s1">&#39;mail&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p><a name="notification-events"></a></p>
<h2 id="_55">通知イベント<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h2>
<p><a name="notification-sending-event"></a></p>
<h4 id="_56">通知送信イベント<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h4>
<p>通知が送信されると、通知システムによって<code>Illuminate\Notifications\Events\NotificationSending</code>イベントがディスパッチされます。これには「通知可能」エンティティと通知インスタンス自体が含まれます。このイベントの<a href="events.html">イベントリスナー</a>をアプリケーション内に作成できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Events\NotificationSending</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CheckNotificationStatus</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * 指定されたイベントを処理</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">NotificationSending</span> <span class="nv">$event</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><code>NotificationSending</code>イベントのイベントリスナーが<code>handle</code>メソッドから<code>false</code>を返す場合、通知は送信されません。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 指定されたイベントを処理</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">NotificationSending</span> <span class="nv">$event</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>イベントリスナー内で、イベントの<code>notifiable</code>、<code>notification</code>、および<code>channel</code>プロパティにアクセスして、通知の受信者や通知自体について詳しく知ることができます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 指定されたイベントを処理</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">NotificationSending</span> <span class="nv">$event</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// $event-&gt;channel</span>
    <span class="c1">// $event-&gt;notifiable</span>
    <span class="c1">// $event-&gt;notification</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="notification-sent-event"></a></p>
<h4 id="_57">通知送信済みイベント<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h4>
<p>通知が送信されると、通知システムによって<code>Illuminate\Notifications\Events\NotificationSent</code><a href="events.html">イベント</a>がディスパッチされます。これには「通知可能」エンティティと通知インスタンス自体が含まれます。このイベントの<a href="events.html">イベントリスナー</a>をアプリケーション内に作成できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Notifications\Events\NotificationSent</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LogNotification</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * 指定されたイベントを処理</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">NotificationSent</span> <span class="nv">$event</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>イベントリスナー内で、イベントの<code>notifiable</code>、<code>notification</code>、<code>channel</code>、および<code>response</code>プロパティにアクセスして、通知の受信者や通知自体について詳しく知ることができます。</p>
<div class="highlight"><pre><span></span><code><span class="sd">/**</span>
<span class="sd"> * 指定されたイベントを処理</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">NotificationSent</span> <span class="nv">$event</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// $event-&gt;channel</span>
    <span class="c1">// $event-&gt;notifiable</span>
    <span class="c1">// $event-&gt;notification</span>
    <span class="c1">// $event-&gt;response</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="custom-channels"></a></p>
<h2 id="_58">カスタムチャンネル<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h2>
<p>Laravelにはいくつかの通知チャンネルが同梱されていますが、他のチャンネルを介して通知を配信するために独自のドライバを作成したい場合があります。Laravelはこれを簡単に行えるようにしています。まず、<code>send</code>メソッドを含むクラスを定義します。このメソッドは、<code>$notifiable</code>と<code>$notification</code>の2つの引数を受け取る必要があります。</p>
<p><code>send</code>メソッド内で、通知のメソッドを呼び出してチャンネルが理解できるメッセージオブジェクトを取得し、その後、希望する方法で<code>$notifiable</code>インスタンスに通知を送信できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">namespace</span> <span class="nx">App\Notifications</span><span class="p">;</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="k">class</span> <span class="nc">VoiceChannel</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="p">{</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>    <span class="sd">/**</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="sd">     * 指定された通知を送信する。</span>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="sd">     */</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">send</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">,</span> <span class="nx">Notification</span> <span class="nv">$notification</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>    <span class="p">{</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>        <span class="nv">$message</span> <span class="o">=</span> <span class="nv">$notification</span><span class="o">-&gt;</span><span class="na">toVoice</span><span class="p">(</span><span class="nv">$notifiable</span><span class="p">);</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>        <span class="c1">// $notifiableインスタンスに通知を送信...</span>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>    <span class="p">}</span>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="p">}</span>
</code></pre></div>
<p>通知チャンネルクラスを定義したら、任意の通知の<code>via</code>メソッドからクラス名を返すことができます。この例では、通知の<code>toVoice</code>メソッドは音声メッセージを表すオブジェクトを返すことができます。例えば、これらのメッセージを表すために独自の<code>VoiceMessage</code>クラスを定義することができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="o">&lt;?</span><span class="nx">php</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="k">namespace</span> <span class="nx">App\Notifications</span><span class="p">;</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="k">use</span> <span class="nx">App\Notifications\Messages\VoiceMessage</span><span class="p">;</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="k">use</span> <span class="nx">App\Notifications\VoiceChannel</span><span class="p">;</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="k">use</span> <span class="nx">Illuminate\Bus\Queueable</span><span class="p">;</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="k">use</span> <span class="nx">Illuminate\Contracts\Queue\ShouldQueue</span><span class="p">;</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="k">use</span> <span class="nx">Illuminate\Notifications\Notification</span><span class="p">;</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="k">class</span> <span class="nc">InvoicePaid</span> <span class="k">extends</span> <span class="nx">Notification</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="p">{</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>    <span class="k">use</span> <span class="nx">Queueable</span><span class="p">;</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>    <span class="sd">/**</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="sd">     * 通知チャンネルを取得する。</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="sd">     */</span>
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">via</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>    <span class="p">{</span>
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>        <span class="k">return</span> <span class="nx">VoiceChannel</span><span class="o">::</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>    <span class="p">}</span>
<a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>
<a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>    <span class="sd">/**</span>
<a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a><span class="sd">     * 通知の音声表現を取得する。</span>
<a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a><span class="sd">     */</span>
<a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">toVoice</span><span class="p">(</span><span class="nx">object</span> <span class="nv">$notifiable</span><span class="p">)</span><span class="o">:</span> <span class="nx">VoiceMessage</span>
<a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a>    <span class="p">{</span>
<a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a>        <span class="c1">// ...</span>
<a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>    <span class="p">}</span>
<a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a><span class="p">}</span>
</code></pre></div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
<nav class="md-footer-nav">
    
    
</nav>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["back-to-top", "navigation.expand", "navigation.tabs", "navigation.footer", "navigation.sections", "navigation.expand", "content.code.copy", "hide_repository_button", "content.code.annotate", "content.tabs.link", "toc.none", "content.action.edit"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>