
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/koriym/laravel11-ja/http-client.html">
      
      
        <link rel="prev" href="helpers.html">
      
      
        <link rel="next" href="localization.html">
      
      
      <link rel="icon" href="assets/images/favicon_io/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>HTTPクライアント - L11JA</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.35f28582.min.css">
      
      


    
    

    

    
      <link rel="stylesheet" href="assets/css/php.css">
    
      <link rel="stylesheet" href="assets/css/mkdocs_material_extra.css">
    
      <link rel="stylesheet" href="assets/css/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-G60CEHXLQ1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-G60CEHXLQ1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-G60CEHXLQ1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#http" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!-- Determine classes -->



<!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
          class="md-header__inner md-grid"
          aria-label="Header"
  >

    <!-- Link to home -->
    <a
            href="."
            title="L11JA"
            class="md-header__button md-logo"
            aria-label="L11JA"
            data-md-component="logo"
    >
      
  <img src="assets/images/logo.png" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans'; font-size: 20px" >
            L11JA
            </span>
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans Batak'; font-size: 20px" >
            
              HTTPクライアント
            
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette toggle -->
    

    <!-- User preference: color palette -->
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
    <label class="md-header__button md-icon" for="__search">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
    </label>

    <!-- Search interface -->
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
    <div class="md-header__source">
      

<!--
  Check whether the repository is hosted on one of the supported code hosting
  platforms (GitHub, GitLab or Bitbucket) to show icon.
-->


  


<!-- Repository containing source -->
<a href="https://github.com/koriym/l11ja" title="source.link.title"
    class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" fill="#000"/></svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="releases.html" class="md-tabs__link">
          
  
  プロローグ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="installation.html" class="md-tabs__link">
          
  
  はじめに

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="lifecycle.html" class="md-tabs__link">
          
  
  アーキテクチャ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="routing.html" class="md-tabs__link">
          
  
  基本

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="artisan.html" class="md-tabs__link">
          
  
  掘り下げる

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="authentication.html" class="md-tabs__link">
          
  
  セキュリティ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="database.html" class="md-tabs__link">
          
  
  データベース

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="eloquent.html" class="md-tabs__link">
          
  
  Eloquent ORM

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="testing.html" class="md-tabs__link">
          
  
  テスト

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="starter-kits.html" class="md-tabs__link">
          
  
  パッケージ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="L11JA" class="md-nav__button md-logo" aria-label="L11JA" data-md-component="logo">
      
  <img src="assets/images/logo.png" alt="logo">

    </a>
    L11JA
  </label>
  
    <div class="md-nav__source">
      

<!--
  Check whether the repository is hosted on one of the supported code hosting
  platforms (GitHub, GitLab or Bitbucket) to show icon.
-->


  


<!-- Repository containing source -->
<a href="https://github.com/koriym/l11ja" title="source.link.title"
    class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" fill="#000"/></svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    プロローグ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            プロローグ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="releases.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リリースノート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="upgrade.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アップグレードガイド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contributions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    貢献ガイド
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            はじめに
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    インストール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="configuration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    設定
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="structure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ディレクトリ構造
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="frontend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    フロントエンド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="starter-kits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スターターキット
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deployment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    デプロイ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    アーキテクチャ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            アーキテクチャ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="lifecycle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リクエストライフサイクル
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="container.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    サービスコンテナ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="providers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    サービスプロバイダ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="facades.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファサード
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            基本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="routing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ルーティング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="middleware.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ミドルウェア
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="csrf.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSRF保護
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="controllers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コントローラ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="requests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リクエスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="responses.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    レスポンス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="views.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ビュー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="blade.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bladeテンプレート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vite.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アセットバンドル
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="urls.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    URL生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="session.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    セッション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="validation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    バリデーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="errors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    エラー処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="logging.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ログ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    掘り下げる
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            掘り下げる
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="artisan.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artisanコンソール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="broadcasting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブロードキャスティング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cache.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    キャッシュ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コレクション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concurrency.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    並行処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="context.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コンテキスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contracts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コントラクト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="events.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    イベント
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="filesystem.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファイルストレージ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="helpers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ヘルパー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    HTTPクライアント
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="http-client.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    HTTPクライアント
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      はじめに
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストの作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="リクエストの作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uri" class="md-nav__link">
    <span class="md-ellipsis">
      URIテンプレート
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストのダンプ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストデータ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="リクエストデータ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    <span class="md-ellipsis">
      GETリクエストのクエリパラメータ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      フォームURLエンコードリクエストの送信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      生のリクエストボディの送信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      マルチパートリクエスト
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      ヘッダー
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      認証
    </span>
  </a>
  
    <nav class="md-nav" aria-label="認証">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      ベアラートークン
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      タイムアウト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      リトライ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      エラー処理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラー処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      例外のスロー
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guzzle" class="md-nav__link">
    <span class="md-ellipsis">
      Guzzle ミドルウェア
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guzzle ミドルウェア">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      グローバルミドルウェア
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guzzle_1" class="md-nav__link">
    <span class="md-ellipsis">
      Guzzle オプション
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guzzle オプション">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      グローバルオプション
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      並行リクエスト
    </span>
  </a>
  
    <nav class="md-nav" aria-label="並行リクエスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      並行リクエストのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      マクロ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      テスト
    </span>
  </a>
  
    <nav class="md-nav" aria-label="テスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      レスポンスのフェイク
    </span>
  </a>
  
    <nav class="md-nav" aria-label="レスポンスのフェイク">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      特定のURLのフェイク
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      レスポンスシーケンスのフェイク
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      フェイクコールバック
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      ストレイリクエストの防止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストの検査
    </span>
  </a>
  
    <nav class="md-nav" aria-label="リクエストの検査">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      リクエスト/レスポンスの記録
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      イベント
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="localization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ローカライゼーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mail.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="notifications.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通知
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="packages.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    パッケージ開発
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="processes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プロセス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queues.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    キュー
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rate-limiting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    レート制限
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="strings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文字列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="scheduling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    タスクスケジューリング
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    セキュリティ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            セキュリティ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="authentication.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認証
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="authorization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認可
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="verification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メール確認
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="encryption.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    暗号化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="hashing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ハッシュ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="passwords.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    パスワードリセット
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    データベース
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            データベース
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    クエリビルダ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pagination.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ページネーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migrations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    マイグレーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="seeding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    シーディング
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="redis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Eloquent ORM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Eloquent ORM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-relationships.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    リレーションシップ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コレクション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-mutators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ミューテータ / キャスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-resources.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APIリソース
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-serialization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    シリアライゼーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="eloquent-factories.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ファクトリ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    テスト
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            テスト
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="console-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コンソールテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dusk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブラウザテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database-testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    データベース
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mocking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    モック
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    パッケージ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            パッケージ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="starter-kits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スターターキット
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="billing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashier (Stripe)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cashier-paddle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashier (Paddle)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dusk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ブラウザテスト
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="envoy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Envoy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fortify.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fortify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="folio.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="homestead.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homestead
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="horizon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horizon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mix.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="octane.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Octane
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="passport.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passport
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pennant.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pennant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pint.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="precognition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Precognition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="prompts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prompts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pulse.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pulse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reverb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reverb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sail.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sail
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sanctum.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sanctum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="scout.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="socialite.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Socialite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="telescope.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telescope
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="valet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Valet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      はじめに
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストの作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="リクエストの作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uri" class="md-nav__link">
    <span class="md-ellipsis">
      URIテンプレート
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストのダンプ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストデータ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="リクエストデータ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    <span class="md-ellipsis">
      GETリクエストのクエリパラメータ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      フォームURLエンコードリクエストの送信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      生のリクエストボディの送信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      マルチパートリクエスト
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      ヘッダー
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      認証
    </span>
  </a>
  
    <nav class="md-nav" aria-label="認証">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      ベアラートークン
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      タイムアウト
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      リトライ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      エラー処理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="エラー処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      例外のスロー
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guzzle" class="md-nav__link">
    <span class="md-ellipsis">
      Guzzle ミドルウェア
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guzzle ミドルウェア">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      グローバルミドルウェア
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guzzle_1" class="md-nav__link">
    <span class="md-ellipsis">
      Guzzle オプション
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guzzle オプション">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      グローバルオプション
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      並行リクエスト
    </span>
  </a>
  
    <nav class="md-nav" aria-label="並行リクエスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      並行リクエストのカスタマイズ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      マクロ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      テスト
    </span>
  </a>
  
    <nav class="md-nav" aria-label="テスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      レスポンスのフェイク
    </span>
  </a>
  
    <nav class="md-nav" aria-label="レスポンスのフェイク">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      特定のURLのフェイク
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      レスポンスシーケンスのフェイク
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      フェイクコールバック
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      ストレイリクエストの防止
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      リクエストの検査
    </span>
  </a>
  
    <nav class="md-nav" aria-label="リクエストの検査">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      リクエスト/レスポンスの記録
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      イベント
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/koriym/l11ja/edit/master/docs/http-client.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="http">HTTPクライアント<a class="headerlink" href="#http" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="#introduction">はじめに</a></li>
<li><a href="#making-requests">リクエストの作成</a><ul>
<li><a href="#request-data">リクエストデータ</a></li>
<li><a href="#headers">ヘッダー</a></li>
<li><a href="#authentication">認証</a></li>
<li><a href="#timeout">タイムアウト</a></li>
<li><a href="#retries">リトライ</a></li>
<li><a href="#error-handling">エラーハンドリング</a></li>
<li><a href="#guzzle-middleware">Guzzleミドルウェア</a></li>
<li><a href="#guzzle-options">Guzzleオプション</a></li>
</ul>
</li>
<li><a href="#concurrent-requests">同時リクエスト</a></li>
<li><a href="#macros">マクロ</a></li>
<li><a href="#testing">テスト</a><ul>
<li><a href="#faking-responses">レスポンスのフェイク</a></li>
<li><a href="#inspecting-requests">リクエストの検査</a></li>
<li><a href="#preventing-stray-requests">ストレイリクエストの防止</a></li>
</ul>
</li>
<li><a href="#events">イベント</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>Laravelは、<a href="http://docs.guzzlephp.org/en/stable/">Guzzle HTTPクライアント</a>を中心に、表現力豊かで最小限のAPIを提供しており、他のWebアプリケーションと通信するために、すばやく送信HTTPリクエストを作成できます。LaravelのGuzzleラッパーは、最も一般的なユースケースと素晴らしい開発者体験に焦点を当てています。</p>
<p><a name="making-requests"></a></p>
<h2 id="_2">リクエストの作成<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>リクエストを作成するには、<code>Http</code>ファサードが提供する<code>head</code>、<code>get</code>、<code>post</code>、<code>put</code>、<code>patch</code>、<code>delete</code>メソッドを使用できます。まず、他のURLに対して基本的な<code>GET</code>リクエストを作成する方法を見てみましょう。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">);</span>
</code></pre></div>
<p><code>get</code>メソッドは<code>Illuminate\Http\Client\Response</code>のインスタンスを返し、これにはレスポンスを検査するために使用できるさまざまなメソッドが用意されています。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">body</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="o">:</span> <span class="nx">mixed</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">object</span><span class="p">()</span> <span class="o">:</span> <span class="nx">object</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">collect</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Illuminate\Support\Collection</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resource</span><span class="p">()</span> <span class="o">:</span> <span class="nx">resource</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">()</span> <span class="o">:</span> <span class="nx">int</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">successful</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">failed</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">clientError</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">header</span><span class="p">(</span><span class="nv">$header</span><span class="p">)</span> <span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="p">()</span> <span class="o">:</span> <span class="k">array</span><span class="p">;</span>
</code></pre></div>
<p><code>Illuminate\Http\Client\Response</code>オブジェクトはPHPの<code>ArrayAccess</code>インターフェースも実装しているため、レスポンス上のJSONレスポンスデータに直接アクセスできます。</p>
<div class="highlight"><pre><span></span><code><span class="k">return</span> <span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com/users/1&#39;</span><span class="p">)[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
</code></pre></div>
<p>上記のレスポンスメソッドに加えて、以下のメソッドを使用して、レスポンスが特定のステータスコードを持っているかどうかを判断できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">ok</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>                  <span class="c1">// 200 OK</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">created</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>             <span class="c1">// 201 Created</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">accepted</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>            <span class="c1">// 202 Accepted</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">noContent</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>           <span class="c1">// 204 No Content</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">movedPermanently</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>    <span class="c1">// 301 Moved Permanently</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">found</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>               <span class="c1">// 302 Found</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">badRequest</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>          <span class="c1">// 400 Bad Request</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">unauthorized</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>        <span class="c1">// 401 Unauthorized</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">paymentRequired</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>     <span class="c1">// 402 Payment Required</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">forbidden</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>           <span class="c1">// 403 Forbidden</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">notFound</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>            <span class="c1">// 404 Not Found</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">requestTimeout</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>      <span class="c1">// 408 Request Timeout</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">conflict</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>            <span class="c1">// 409 Conflict</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">unprocessableEntity</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span> <span class="c1">// 422 Unprocessable Entity</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">tooManyRequests</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>     <span class="c1">// 429 Too Many Requests</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">serverError</span><span class="p">()</span> <span class="o">:</span> <span class="nx">bool</span><span class="p">;</span>         <span class="c1">// 500 Internal Server Error</span>
</code></pre></div>
<p><a name="uri-templates"></a></p>
<h4 id="uri">URIテンプレート<a class="headerlink" href="#uri" title="Permanent link">&para;</a></h4>
<p>HTTPクライアントでは、<a href="https://www.rfc-editor.org/rfc/rfc6570">URIテンプレート仕様</a>を使用してリクエストURLを構築することもできます。URIテンプレートで展開可能なURLパラメータを定義するには、<code>withUrlParameters</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nx">Http</span><span class="o">::</span><span class="na">withUrlParameters</span><span class="p">([</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="s1">&#39;endpoint&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://laravel.com&#39;</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;docs&#39;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="s1">&#39;version&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;11.x&#39;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="s1">&#39;topic&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;validation&#39;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;{+endpoint}/{page}/{version}/{topic}&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="dumping-requests"></a></p>
<h4 id="_3">リクエストのダンプ<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>送信前に送信リクエストインスタンスをダンプし、スクリプトの実行を終了したい場合は、リクエスト定義の先頭に<code>dd</code>メソッドを追加できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">return</span> <span class="nx">Http</span><span class="o">::</span><span class="na">dd</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="request-data"></a></p>
<h3 id="_4">リクエストデータ<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>もちろん、<code>POST</code>、<code>PUT</code>、<code>PATCH</code>リクエストを作成する際に、リクエストと一緒に追加のデータを送信するのが一般的です。これらのメソッドは、データの配列を2番目の引数として受け取ります。デフォルトでは、データは<code>application/json</code>コンテンツタイプを使用して送信されます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Steve&#39;</span><span class="p">,</span>
    <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Network Administrator&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="get-request-query-parameters"></a></p>
<h4 id="get">GETリクエストのクエリパラメータ<a class="headerlink" href="#get" title="Permanent link">&para;</a></h4>
<p><code>GET</code>リクエストを作成する際に、クエリ文字列をURLに直接追加するか、<code>get</code>メソッドの2番目の引数としてキー/値のペアの配列を渡すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>または、<code>withQueryParameters</code>メソッドを使用することもできます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">withQueryParameters</span><span class="p">([</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">)</span>
</code></pre></div>
<p><a name="sending-form-url-encoded-requests"></a></p>
<h4 id="url">フォームURLエンコードリクエストの送信<a class="headerlink" href="#url" title="Permanent link">&para;</a></h4>
<p><code>application/x-www-form-urlencoded</code>コンテンツタイプを使用してデータを送信したい場合は、リクエストを作成する前に<code>asForm</code>メソッドを呼び出す必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">asForm</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sara&#39;</span><span class="p">,</span>
    <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Privacy Consultant&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="sending-a-raw-request-body"></a></p>
<h4 id="_5">生のリクエストボディの送信<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>リクエストを作成する際に生のリクエストボディを提供したい場合は、<code>withBody</code>メソッドを使用できます。コンテンツタイプはメソッドの2番目の引数を介して提供できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withBody</span><span class="p">(</span>
    <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$photo</span><span class="p">),</span> <span class="s1">&#39;image/jpeg&#39;</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/photo&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="multi-part-requests"></a></p>
<h4 id="_6">マルチパートリクエスト<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>ファイルをマルチパートリクエストとして送信したい場合は、リクエストを作成する前に<code>attach</code>メソッドを呼び出す必要があります。このメソッドは、ファイルの名前とその内容を受け取ります。必要に応じて、3番目の引数をファイル名として、4番目の引数をファイルに関連付けられたヘッダーとして提供できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">attach</span><span class="p">(</span>
    <span class="s1">&#39;attachment&#39;</span><span class="p">,</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;photo.jpg&#39;</span><span class="p">),</span> <span class="s1">&#39;photo.jpg&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/attachments&#39;</span><span class="p">);</span>
</code></pre></div>
<p>ファイルの生の内容の代わりに、ストリームリソースを渡すこともできます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$photo</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;photo.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">attach</span><span class="p">(</span>
    <span class="s1">&#39;attachment&#39;</span><span class="p">,</span> <span class="nv">$photo</span><span class="p">,</span> <span class="s1">&#39;photo.jpg&#39;</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/attachments&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="headers"></a></p>
<h3 id="_7">ヘッダー<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p><code>withHeaders</code>メソッドを使用してリクエストにヘッダーを追加できます。この<code>withHeaders</code>メソッドは、キー/値のペアの配列を受け取ります。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withHeaders</span><span class="p">([</span>
    <span class="s1">&#39;X-First&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;X-Second&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span>
<span class="p">])</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div>
<p>アプリケーションがリクエストに対して期待するコンテンツタイプを指定するには、<code>accept</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">accept</span><span class="p">(</span><span class="s1">&#39;application/json&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">);</span>
</code></pre></div>
<p>利便性のために、<code>acceptJson</code>メソッドを使用して、アプリケーションがリクエストに対して<code>application/json</code>コンテンツタイプを期待していることをすばやく指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">acceptJson</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">);</span>
</code></pre></div>
<p><code>withHeaders</code>メソッドは、新しいヘッダーをリクエストの既存のヘッダーにマージします。必要に応じて、<code>replaceHeaders</code>メソッドを使用してすべてのヘッダーを完全に置き換えることができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withHeaders</span><span class="p">([</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="s1">&#39;X-Original&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">replaceHeaders</span><span class="p">([</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="s1">&#39;X-Replacement&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">])</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="p">]);</span>
</code></pre></div>
<p><a name="authentication"></a></p>
<h3 id="_8">認証<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p><code>withBasicAuth</code>メソッドと<code>withDigestAuth</code>メソッドをそれぞれ使用して、基本認証とダイジェスト認証の資格情報を指定できます。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 基本認証...</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withBasicAuth</span><span class="p">(</span><span class="s1">&#39;taylor@laravel.com&#39;</span><span class="p">,</span> <span class="s1">&#39;secret&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>

<span class="c1">// ダイジェスト認証...</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withDigestAuth</span><span class="p">(</span><span class="s1">&#39;taylor@laravel.com&#39;</span><span class="p">,</span> <span class="s1">&#39;secret&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p><a name="bearer-tokens"></a></p>
<h4 id="_9">ベアラートークン<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>リクエストの<code>Authorization</code>ヘッダーにベアラートークンをすばやく追加したい場合は、<code>withToken</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withToken</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p><a name="timeout"></a></p>
<h3 id="_10">タイムアウト<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p><code>timeout</code>メソッドを使用して、レスポンスを待つ最大秒数を指定できます。デフォルトでは、HTTPクライアントは30秒後にタイムアウトします。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">timeout</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p>指定されたタイムアウトを超えると、<code>Illuminate\Http\Client\ConnectionException</code>のインスタンスがスローされます。</p>
<p>サーバーへの接続を試みる間に待機する最大秒数を指定するには、<code>connectTimeout</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">connectTimeout</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p><a name="retries"></a></p>
<h3 id="_11">リトライ<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>HTTPクライアントがクライアントまたはサーバーエラーが発生した場合にリクエストを自動的に再試行するようにしたい場合は、<code>retry</code>メソッドを使用できます。<code>retry</code>メソッドは、リクエストを試行する最大回数とLaravelが再試行間に待機するミリ秒数を受け取ります。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p>再試行間に待機するミリ秒数を手動で計算したい場合は、<code>retry</code>メソッドの2番目の引数としてクロージャを渡すことができます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Exception</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">int</span> <span class="nv">$attempt</span><span class="p">,</span> <span class="nx">Exception</span> <span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$attempt</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p>便宜上、<code>retry</code> メソッドの最初の引数として配列を提供することもできます。この配列は、後続の試行の間に何ミリ秒スリープするかを決定するために使用されます：</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">retry</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p>必要に応じて、<code>retry</code> メソッドに3番目の引数を渡すことができます。3番目の引数は、再試行を実際に試みるかどうかを決定する callable である必要があります。例えば、最初のリクエストが <code>ConnectionException</code> に遭遇した場合にのみリクエストを再試行したい場合があります：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Exception</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Client\PendingRequest</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$exception</span><span class="p">,</span> <span class="nx">PendingRequest</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$exception</span> <span class="nx">instanceof</span> <span class="nx">ConnectionException</span><span class="p">;</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p>リクエストの試行が失敗した場合、新しい試行が行われる前にリクエストに変更を加えたい場合があります。これは、<code>retry</code> メソッドに提供した callable に渡されるリクエスト引数を変更することで実現できます。例えば、最初の試行が認証エラーを返した場合に新しい認証トークンでリクエストを再試行したい場合があります：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Exception</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Client\PendingRequest</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Client\RequestException</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withToken</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getToken</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">retry</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$exception</span><span class="p">,</span> <span class="nx">PendingRequest</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$exception</span> <span class="nx">instanceof</span> <span class="nx">RequestException</span> <span class="o">||</span> <span class="nv">$exception</span><span class="o">-&gt;</span><span class="na">response</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">()</span> <span class="o">!==</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">withToken</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getNewToken</span><span class="p">());</span>

    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p>すべてのリクエストが失敗した場合、<code>Illuminate\Http\Client\RequestException</code> のインスタンスがスローされます。この動作を無効にしたい場合は、<code>throw</code> 引数に <code>false</code> の値を指定できます。無効にすると、すべての再試行が試行された後にクライアントが受信した最後のレスポンスが返されます：</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="k">throw</span><span class="o">:</span> <span class="k">false</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>接続の問題ですべてのリクエストが失敗した場合でも、<code>throw</code> 引数が <code>false</code> に設定されている場合でも、<code>Illuminate\Http\Client\ConnectionException</code> がスローされます。</p>
</div>
<p><a name="error-handling"></a></p>
<h3 id="_12">エラー処理<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>Guzzle のデフォルトの動作とは異なり、Laravel の HTTP クライアントラッパーはクライアントまたはサーバーエラー（サーバーからの <code>400</code> および <code>500</code> レベルのレスポンス）で例外をスローしません。これらのエラーのいずれかが返されたかどうかは、<code>successful</code>、<code>clientError</code>、または <code>serverError</code> メソッドを使用して判断できます：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ステータスコードが &gt;= 200 かつ &lt; 300 かどうかを判定...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">successful</span><span class="p">();</span>

<span class="c1">// ステータスコードが &gt;= 400 かどうかを判定...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">failed</span><span class="p">();</span>

<span class="c1">// レスポンスが 400 レベルのステータスコードを持つかどうかを判定...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">clientError</span><span class="p">();</span>

<span class="c1">// レスポンスが 500 レベルのステータスコードを持つかどうかを判定...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">serverError</span><span class="p">();</span>

<span class="c1">// クライアントまたはサーバーエラーが発生した場合、指定されたコールバックを即座に実行...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">onError</span><span class="p">(</span><span class="nx">callable</span> <span class="nv">$callback</span><span class="p">);</span>
</code></pre></div>
<p><a name="throwing-exceptions"></a></p>
<h4 id="_13">例外のスロー<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>レスポンスインスタンスがあり、レスポンスステータスコードがクライアントまたはサーバーエラーを示している場合に <code>Illuminate\Http\Client\RequestException</code> のインスタンスをスローしたい場合は、<code>throw</code> または <code>throwIf</code> メソッドを使用できます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Response</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>

<span class="c1">// クライアントまたはサーバーエラーが発生した場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throw</span><span class="p">();</span>

<span class="c1">// エラーが発生し、指定された条件が true の場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throwIf</span><span class="p">(</span><span class="nv">$condition</span><span class="p">);</span>

<span class="c1">// エラーが発生し、指定されたクロージャが true を返す場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throwIf</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nx">Response</span> <span class="nv">$response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">// エラーが発生し、指定された条件が false の場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throwUnless</span><span class="p">(</span><span class="nv">$condition</span><span class="p">);</span>

<span class="c1">// エラーが発生し、指定されたクロージャが false を返す場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throwUnless</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nx">Response</span> <span class="nv">$response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">);</span>

<span class="c1">// レスポンスが特定のステータスコードを持つ場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throwIfStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>

<span class="c1">// レスポンスが特定のステータスコードを持たない場合に例外をスロー...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">throwUnlessStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>

<span class="k">return</span> <span class="nv">$response</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
</code></pre></div>
<p><code>Illuminate\Http\Client\RequestException</code> インスタンスには、返されたレスポンスを検査できるようにするパブリックの <code>$response</code> プロパティがあります。</p>
<p><code>throw</code> メソッドは、エラーが発生しなかった場合にレスポンスインスタンスを返し、<code>throw</code> メソッドに他の操作を連鎖させることができます：</p>
<div class="highlight"><pre><span></span><code><span class="k">return</span> <span class="nx">Http</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">throw</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">();</span>
</code></pre></div>
<p>例外がスローされる前に追加のロジックを実行したい場合は、<code>throw</code> メソッドにクロージャを渡すことができます。クロージャが呼び出された後、例外は自動的にスローされるため、クロージャ内から例外を再スローする必要はありません：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Client\RequestException</span><span class="p">;</span>

<span class="k">return</span> <span class="nx">Http</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">throw</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Response</span> <span class="nv">$response</span><span class="p">,</span> <span class="nx">RequestException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">();</span>
</code></pre></div>
<p><a name="guzzle-middleware"></a></p>
<h3 id="guzzle">Guzzle ミドルウェア<a class="headerlink" href="#guzzle" title="Permanent link">&para;</a></h3>
<p>Laravel の HTTP クライアントは Guzzle によって動作しているため、<a href="https://docs.guzzlephp.org/en/stable/handlers-and-middleware.html">Guzzle Middleware</a> を利用して、送信リクエストを操作したり、受信レスポンスを検査したりできます。送信リクエストを操作するために、<code>withRequestMiddleware</code> メソッドを介して Guzzle ミドルウェアを登録します：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Psr\Http\Message\RequestInterface</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withRequestMiddleware</span><span class="p">(</span>
    <span class="k">function</span> <span class="p">(</span><span class="nx">RequestInterface</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">withHeader</span><span class="p">(</span><span class="s1">&#39;X-Example&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">);</span>
</code></pre></div>
<p>同様に、<code>withResponseMiddleware</code> メソッドを介してミドルウェアを登録することで、受信 HTTP レスポンスを検査できます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Psr\Http\Message\ResponseInterface</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withResponseMiddleware</span><span class="p">(</span>
    <span class="k">function</span> <span class="p">(</span><span class="nx">ResponseInterface</span> <span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$header</span> <span class="o">=</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getHeader</span><span class="p">(</span><span class="s1">&#39;X-Example&#39;</span><span class="p">);</span>

        <span class="c1">// ...</span>

        <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="global-middleware"></a></p>
<h4 id="_14">グローバルミドルウェア<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>すべての送信リクエストと受信レスポンスに適用されるミドルウェアを登録したい場合があります。これを実現するには、<code>globalRequestMiddleware</code> および <code>globalResponseMiddleware</code> メソッドを使用します。通常、これらのメソッドはアプリケーションの <code>AppServiceProvider</code> の <code>boot</code> メソッドで呼び出す必要があります：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nx">Http</span><span class="o">::</span><span class="na">globalRequestMiddleware</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nv">$request</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">withHeader</span><span class="p">(</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="s1">&#39;User-Agent&#39;</span><span class="p">,</span> <span class="s1">&#39;Example Application/1.0&#39;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">));</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="nx">Http</span><span class="o">::</span><span class="na">globalResponseMiddleware</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nv">$response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">withHeader</span><span class="p">(</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="s1">&#39;X-Finished-At&#39;</span><span class="p">,</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">toDateTimeString</span><span class="p">()</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="p">));</span>
</code></pre></div>
<p><a name="guzzle-options"></a></p>
<h3 id="guzzle_1">Guzzle オプション<a class="headerlink" href="#guzzle_1" title="Permanent link">&para;</a></h3>
<p><code>withOptions</code> メソッドを使用して、送信リクエストに追加の <a href="http://docs.guzzlephp.org/en/stable/request-options.html">Guzzle リクエストオプション</a>を指定できます。<code>withOptions</code> メソッドは、キー/値ペアの配列を受け取ります：</p>
<div class="highlight"><pre><span></span><code><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withOptions</span><span class="p">([</span>
    <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="global-options"></a></p>
<h4 id="_15">グローバルオプション<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>すべての送信リクエストに対してデフォルトのオプションを設定するには、<code>globalOptions</code> メソッドを利用できます。通常、このメソッドはアプリケーションの <code>AppServiceProvider</code> の <code>boot</code> メソッドから呼び出す必要があります：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="sd">/**</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="sd"> * Bootstrap any application services.</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="sd"> */</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="p">{</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="nx">Http</span><span class="o">::</span><span class="na">globalOptions</span><span class="p">([</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>        <span class="s1">&#39;allow_redirects&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="p">]);</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="p">}</span>
</code></pre></div>
<p><a name="concurrent-requests"></a></p>
<h2 id="_16">並行リクエスト<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<p>複数の HTTP リクエストを同時に行いたい場合があります。つまり、リクエストを順次ではなく同時に発行したい場合です。これにより、遅い HTTP API とのやり取りで大幅なパフォーマンス向上が見込めます。</p>
<p>幸いなことに、<code>pool</code> メソッドを使用してこれを実現できます。<code>pool</code> メソッドは、<code>Illuminate\Http\Client\Pool</code> インスタンスを受け取るクロージャを受け取り、リクエストプールにリクエストを簡単に追加して発行できます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Pool</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nv">$responses</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">pool</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nx">Pool</span> <span class="nv">$pool</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://localhost/first&#39;</span><span class="p">),</span>
    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://localhost/second&#39;</span><span class="p">),</span>
    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://localhost/third&#39;</span><span class="p">),</span>
<span class="p">]);</span>

<span class="k">return</span> <span class="nv">$responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ok</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
       <span class="nv">$responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ok</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
       <span class="nv">$responses</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ok</span><span class="p">();</span>
</code></pre></div>
<p>ご覧のとおり、各レスポンスインスタンスは、プールに追加された順序に基づいてアクセスできます。必要に応じて、<code>as</code> メソッドを使用してリクエストに名前を付けることができ、対応するレスポンスに名前でアクセスできます：</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Pool</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nv">$responses</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">pool</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nx">Pool</span> <span class="nv">$pool</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">as</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://localhost/first&#39;</span><span class="p">),</span>
    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">as</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://localhost/second&#39;</span><span class="p">),</span>
    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">as</span><span class="p">(</span><span class="s1">&#39;third&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://localhost/third&#39;</span><span class="p">),</span>
<span class="p">]);</span>

<span class="k">return</span> <span class="nv">$responses</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ok</span><span class="p">();</span>
</code></pre></div>
<p><a name="customizing-concurrent-requests"></a></p>
<h4 id="_17">並行リクエストのカスタマイズ<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p><code>pool</code> メソッドは、<code>withHeaders</code> や <code>middleware</code> メソッドなどの他の HTTP クライアントメソッドと連鎖できません。プールされたリクエストにカスタムヘッダーやミドルウェアを適用したい場合は、プール内の各リクエストでそれらのオプションを設定する必要があります：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Pool</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="s1">&#39;X-Example&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;example&#39;</span><span class="p">,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="p">];</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="nv">$responses</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">pool</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="nx">Pool</span> <span class="nv">$pool</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">withHeaders</span><span class="p">(</span><span class="nv">$headers</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://laravel.test/test&#39;</span><span class="p">),</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">withHeaders</span><span class="p">(</span><span class="nv">$headers</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://laravel.test/test&#39;</span><span class="p">),</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">withHeaders</span><span class="p">(</span><span class="nv">$headers</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http://laravel.test/test&#39;</span><span class="p">),</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="p">]);</span>
</code></pre></div>
<p><a name="macros"></a></p>
<h2 id="_18">マクロ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<p>LaravelのHTTPクライアントでは、"マクロ"を定義できます。これは、アプリケーション全体でサービスとやり取りする際に、一般的なリクエストパスやヘッダーを設定するための流暢で表現力豊かなメカニズムとして機能します。始めるには、アプリケーションの<code>App\Providers\AppServiceProvider</code>クラスの<code>boot</code>メソッド内でマクロを定義します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="sd">/**</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="sd"> * アプリケーションサービスのブートストラップ</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="sd"> */</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="p">{</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="nx">Http</span><span class="o">::</span><span class="na">macro</span><span class="p">(</span><span class="s1">&#39;github&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>        <span class="k">return</span> <span class="nx">Http</span><span class="o">::</span><span class="na">withHeaders</span><span class="p">([</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>            <span class="s1">&#39;X-Example&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;example&#39;</span><span class="p">,</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>        <span class="p">])</span><span class="o">-&gt;</span><span class="na">baseUrl</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">);</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    <span class="p">});</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="p">}</span>
</code></pre></div>
<p>マクロを設定したら、アプリケーション内のどこからでも、指定された設定で保留中のリクエストを作成するために呼び出すことができます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">github</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="testing"></a></p>
<h2 id="_19">テスト<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<p>多くのLaravelサービスは、テストを簡単かつ表現力豊かに書くための機能を提供しており、LaravelのHTTPクライアントも例外ではありません。<code>Http</code>ファサードの<code>fake</code>メソッドを使用すると、HTTPクライアントにリクエストが行われたときにスタブ/ダミーのレスポンスを返すように指示できます。</p>
<p><a name="faking-responses"></a></p>
<h3 id="_20">レスポンスのフェイク<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>例えば、すべてのリクエストに対して空の<code>200</code>ステータスコードのレスポンスを返すようにHTTPクライアントに指示するには、引数なしで<code>fake</code>メソッドを呼び出します。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div>
<p><a name="faking-specific-urls"></a></p>
<h4 id="url_1">特定のURLのフェイク<a class="headerlink" href="#url_1" title="Permanent link">&para;</a></h4>
<p>また、<code>fake</code>メソッドに配列を渡すこともできます。配列のキーはフェイクしたいURLパターンを表し、それに対応するレスポンスを指定します。<code>*</code>文字はワイルドカード文字として使用できます。フェイクされていないURLに対するリクエストは実際に実行されます。<code>Http</code>ファサードの<code>response</code>メソッドを使用して、これらのエンドポイントのスタブ/ダミーレスポンスを構築できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
    <span class="c1">// GitHubエンドポイントのJSONレスポンスをスタブする</span>
    <span class="s1">&#39;github.com/*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">),</span>

    <span class="c1">// Googleエンドポイントの文字列レスポンスをスタブする</span>
    <span class="s1">&#39;google.com/*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">),</span>
<span class="p">]);</span>
</code></pre></div>
<p>すべての一致しないURLに対してフォールバックURLパターンを指定したい場合は、単一の<code>*</code>文字を使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
    <span class="c1">// GitHubエンドポイントのJSONレスポンスをスタブする</span>
    <span class="s1">&#39;github.com/*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="mi">200</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Headers&#39;</span><span class="p">]),</span>

    <span class="c1">// 他のすべてのエンドポイントの文字列レスポンスをスタブする</span>
    <span class="s1">&#39;*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Headers&#39;</span><span class="p">]),</span>
<span class="p">]);</span>
</code></pre></div>
<p><a name="faking-response-sequences"></a></p>
<h4 id="_21">レスポンスシーケンスのフェイク<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<p>特定のURLが特定の順序で一連のフェイクレスポンスを返す必要がある場合、<code>Http::sequence</code>メソッドを使用してレスポンスを構築できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
    <span class="c1">// GitHubエンドポイントの一連のレスポンスをスタブする</span>
    <span class="s1">&#39;github.com/*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">sequence</span><span class="p">()</span>
                            <span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
                            <span class="o">-&gt;</span><span class="na">push</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="mi">200</span><span class="p">)</span>
                            <span class="o">-&gt;</span><span class="na">pushStatus</span><span class="p">(</span><span class="mi">404</span><span class="p">),</span>
<span class="p">]);</span>
</code></pre></div>
<p>レスポンスシーケンス内のすべてのレスポンスが消費された場合、それ以降のリクエストはレスポンスシーケンスが例外をスローする原因となります。シーケンスが空の場合に返すデフォルトのレスポンスを指定したい場合は、<code>whenEmpty</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
    <span class="c1">// GitHubエンドポイントの一連のレスポンスをスタブする</span>
    <span class="s1">&#39;github.com/*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">sequence</span><span class="p">()</span>
                            <span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
                            <span class="o">-&gt;</span><span class="na">push</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="mi">200</span><span class="p">)</span>
                            <span class="o">-&gt;</span><span class="na">whenEmpty</span><span class="p">(</span><span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">()),</span>
<span class="p">]);</span>
</code></pre></div>
<p>レスポンスのシーケンスをフェイクしたいが、特定のURLパターンをフェイクする必要がない場合は、<code>Http::fakeSequence</code>メソッドを使用できます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fakeSequence</span><span class="p">()</span>
        <span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">whenEmpty</span><span class="p">(</span><span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">());</span>
</code></pre></div>
<p><a name="fake-callback"></a></p>
<h4 id="_22">フェイクコールバック<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<p>特定のエンドポイントに対してどのようなレスポンスを返すかを決定するためにより複雑なロジックが必要な場合、<code>fake</code>メソッドにクロージャを渡すことができます。このクロージャは<code>Illuminate\Http\Client\Request</code>のインスタンスを受け取り、レスポンスインスタンスを返す必要があります。クロージャ内で、どのようなタイプのレスポンスを返すかを決定するために必要なロジックを実行できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Request</span><span class="p">;</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><a name="preventing-stray-requests"></a></p>
<h3 id="_23">ストレイリクエストの防止<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>HTTPクライアントを介して送信されるすべてのリクエストが、個々のテストまたは完全なテストスイート全体でフェイクされていることを確認したい場合、<code>preventStrayRequests</code>メソッドを呼び出すことができます。このメソッドを呼び出した後、対応するフェイクレスポンスがないリクエストは、実際のHTTPリクエストを行う代わりに例外をスローします。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">preventStrayRequests</span><span class="p">();</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
    <span class="s1">&#39;github.com/*&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">),</span>
<span class="p">]);</span>

<span class="c1">// &quot;ok&quot;レスポンスが返される</span>
<span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/laravel/framework&#39;</span><span class="p">);</span>

<span class="c1">// 例外がスローされる</span>
<span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;https://laravel.com&#39;</span><span class="p">);</span>
</code></pre></div>
<p><a name="inspecting-requests"></a></p>
<h3 id="_24">リクエストの検査<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p>レスポンスをフェイクする際、クライアントが受け取るリクエストを検査して、アプリケーションが正しいデータやヘッダーを送信していることを確認したい場合があります。これを実現するには、<code>Http::fake</code>を呼び出した後に<code>Http::assertSent</code>メソッドを呼び出します。</p>
<p><code>assertSent</code>メソッドは、<code>Illuminate\Http\Client\Request</code>インスタンスを受け取り、リクエストが期待に一致するかどうかを示すブール値を返すクロージャを受け取ります。テストがパスするためには、少なくとも1つのリクエストが指定された期待に一致する必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">withHeaders</span><span class="p">([</span>
    <span class="s1">&#39;X-First&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
<span class="p">])</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span>
    <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Developer&#39;</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">assertSent</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">hasHeader</span><span class="p">(</span><span class="s1">&#39;X-First&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
           <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;http://example.com/users&#39;</span> <span class="o">&amp;&amp;</span>
           <span class="nv">$request</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Taylor&#39;</span> <span class="o">&amp;&amp;</span>
           <span class="nv">$request</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Developer&#39;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>必要に応じて、<code>assertNotSent</code>メソッドを使用して特定のリクエストが送信されなかったことをアサートできます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Http</span><span class="p">;</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;http://example.com/users&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span>
    <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Developer&#39;</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">assertNotSent</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;http://example.com/posts&#39;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p><code>assertSentCount</code>メソッドを使用して、テスト中に「送信」されたリクエストの数をアサートできます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">assertSentCount</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</code></pre></div>
<p>または、<code>assertNothingSent</code>メソッドを使用して、テスト中にリクエストが送信されなかったことをアサートできます。</p>
<div class="highlight"><pre><span></span><code><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">();</span>

<span class="nx">Http</span><span class="o">::</span><span class="na">assertNothingSent</span><span class="p">();</span>
</code></pre></div>
<p><a name="recording-requests-and-responses"></a></p>
<h4 id="_25">リクエスト/レスポンスの記録<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<p><code>recorded</code>メソッドを使用して、すべてのリクエストとそれに対応するレスポンスを収集できます。<code>recorded</code>メソッドは、<code>Illuminate\Http\Client\Request</code>と<code>Illuminate\Http\Client\Response</code>のインスタンスを含む配列のコレクションを返します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="s1">&#39;https://laravel.com&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(</span><span class="nx">status</span><span class="o">:</span> <span class="mi">500</span><span class="p">),</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="s1">&#39;https://nova.laravel.com/&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(),</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p">]);</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;https://laravel.com&#39;</span><span class="p">);</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;https://nova.laravel.com/&#39;</span><span class="p">);</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="nv">$recorded</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">recorded</span><span class="p">();</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="p">[</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$recorded</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</code></pre></div>
<p>さらに、<code>recorded</code>メソッドは、<code>Illuminate\Http\Client\Request</code>と<code>Illuminate\Http\Client\Response</code>のインスタンスを受け取るクロージャを受け取り、期待に基づいてリクエスト/レスポンスのペアをフィルタリングするために使用できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Request</span><span class="p">;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Response</span><span class="p">;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nx">Http</span><span class="o">::</span><span class="na">fake</span><span class="p">([</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="s1">&#39;https://laravel.com&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(</span><span class="nx">status</span><span class="o">:</span> <span class="mi">500</span><span class="p">),</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="s1">&#39;https://nova.laravel.com/&#39;</span> <span class="o">=&gt;</span> <span class="nx">Http</span><span class="o">::</span><span class="na">response</span><span class="p">(),</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">]);</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;https://laravel.com&#39;</span><span class="p">);</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="nx">Http</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;https://nova.laravel.com/&#39;</span><span class="p">);</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="nv">$recorded</span> <span class="o">=</span> <span class="nx">Http</span><span class="o">::</span><span class="na">recorded</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Response</span> <span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    <span class="k">return</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">()</span> <span class="o">!==</span> <span class="s1">&#39;https://laravel.com&#39;</span> <span class="o">&amp;&amp;</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>           <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">successful</span><span class="p">();</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="p">});</span>
</code></pre></div>
<p><a name="events"></a></p>
<h2 id="_26">イベント<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h2>
<p>Laravelは、HTTPリクエストの送信プロセス中に3つのイベントを発火します。<code>RequestSending</code>イベントはリクエストが送信される前に発火し、<code>ResponseReceived</code>イベントは特定のリクエストに対するレスポンスが受信された後に発火します。<code>ConnectionFailed</code>イベントは、特定のリクエストに対してレスポンスが受信されなかった場合に発火します。</p>
<p><code>RequestSending</code>と<code>ConnectionFailed</code>イベントはどちらも、<code>Illuminate\Http\Client\Request</code>インスタンスを検査するために使用できるパブリックな<code>$request</code>プロパティを持っています。同様に、<code>ResponseReceived</code>イベントは<code>$request</code>プロパティと<code>$response</code>プロパティを持っており、<code>Illuminate\Http\Client\Response</code>インスタンスを検査するために使用できます。これらのイベントに対して<a href="events.html">イベントリスナー</a>を作成できます。</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span> <span class="nx">Illuminate\Http\Client\Events\RequestSending</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LogRequest</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * 指定されたイベントを処理します。</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">RequestSending</span> <span class="nv">$event</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// $event-&gt;request ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
<nav class="md-footer-nav">
    
    
</nav>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["back-to-top", "navigation.expand", "navigation.tabs", "navigation.footer", "navigation.sections", "navigation.expand", "content.code.copy", "hide_repository_button", "content.code.annotate", "content.tabs.link", "toc.none", "content.action.edit"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>